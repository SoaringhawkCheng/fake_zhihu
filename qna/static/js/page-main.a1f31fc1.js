(function(z){
var sI=function(a){if(a.ur){var b=(0,window.$)(a.ur);b.stop().text("草稿已经保存").fadeTo(600,.5).delay(3E3).fadeOut(600,function(){b.text("")})}};var tI=function(a){a.ready(function(){var a=this.Ta;this.Zd?z.rs(a,a.value.length):a.Ka.lastChild?z.Yu(a.Ka.lastChild):a.wg();this.em&&(this.em.scrollTop=this.em.scrollHeight)})};var uI=function(a){return a.Zd?a.Ta:a.Ta.m()};var vI=function(a,b){a.params=b};var wI=function(a){a.FA=!0;a.$F=z.Qn(a.m()).height;z.NG+=a.$F;z.A(z.kv,function(a){a&&!a.FA&&a.lm&&a.Mq()})};
var xI=function(a){var b={};z.A(a.data.Dd(),function(a){b[a]=this.data.get(a)},a);return b};var yI=function(){this.gD="";this.$N=zI};var AI=function(a,b,c){function d(){if(!g&&z.kn(this,a)){var f=this;g=(0,window.setTimeout)(function(){z.kn(f,a)&&(b.call(c),f.ea.pa(f,"update",d))},2E3)}else z.kn(this,a)||((0,window.clearTimeout)(g),g=void 0)}var f=z.Lm,g=void 0;f.ea.g(f,"update",d)};var BI=function(){this.Wk="";this.PN=CI};
var DI=function(a){return a instanceof yI&&a.constructor===yI&&a.$N===zI?a.gD:"type_error:Const"};var EI=function(){this.LK="";this.cO=FI};var GI=function(a){function b(a){if(z.ma(a))z.A(a,b);else{if(!(a instanceof z.Dd)){var g=null;a.hA&&(g=a.pm());a=z.Gd(z.Ma(a.sk?a.Ah():String(a)),g)}d+=z.Fd(a);a=a.pm();0==c?c=a:0!=a&&c!=a&&(c=null)}}var c=0,d="";z.A(arguments,b);return z.Gd(d,c)};var HI=function(a,b){b.all=!0;return z.Gr(a,b)};
var II=function(a){a=void 0===a?{}:a;z.tt.call(this,a.data,0);this.tO=a.Cl;this.oQ=a.nQ;this.vp=""};var JI=function(a){a=void 0===a?{}:a;z.tt.call(this);this.Uf=a.Uf||this.Uf;this.Zf=a.Zf||this.Zf};var KI=function(){z.tt.call(this,null,null,"搜索话题");this.cf="";this.data=[z.Mk[0]]};var LI=function(a,b){return window.$.post("/question/askpeople",{qid:a,uid:b,op:"remove"})};
var MI=function(){var a=z.Y;return 1===a||0===a?"匿名用户":['\x3ca data-hovercard\x3d"p$t$',a[1],'" href\x3d"/people/',a[1],'" title\x3d"'+a[0]+'" class\x3d"','zm-item-link-avatar"\x3e','\x3cimg class\x3d"zm-item-img-avatar" src\x3d"'+a[2]+'" /\x3e',"\x3c/a\x3e"].join("")};var NI=function(a,b){return z.ma(a)?['\x3ca data-hovercard\x3d"p$t$',a[1],'" href\x3d"/people/',a[1],'"',b?' class\x3d"'+b+'"':"",' title\x3d"',a[0],'"\x3e',a[0],"\x3c/a\x3e"].join(""):"匿名用户"};
var OI=function(a){if(0===a||1===a)return"匿名用户";var b=z.M("a",{href:"/people/"+a[1],title:a[0]},a[0]);b.setAttribute("data-hovercard","p$t$"+a[1]);return b};var PI=function(a){if(0===a||1===a)return z.M("span");if(z.ma(a)){var b=z.M("a",{href:"/people/"+a[1],title:a[0],"class":"zm-item-link-avatar"},z.M("img",{src:a[2],"class":"zm-list-avatar"}));b.setAttribute("data-hovercard","p$t$"+a[1]);return b}};var QI=function(a){return 1===a?!0:z.ma(a)?a[3]===z.Y[3]:!1};
var RI=function(a){if(!SI.test("input"))throw Error("Invalid tag name \x3cinput\x3e.");if("INPUT"in TI)throw Error("Tag name \x3cinput\x3e is not allowed for SafeHtml.");var b=null,c="\x3cinput";if(a)for(var d in a){if(!SI.test(d))throw Error('Invalid attribute name "'+d+'".');var f=a[d];if(null!=f){var g;g=d;if(f instanceof yI)f=DI(f);else if("style"==g.toLowerCase()){if(!z.sa(f))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof f+" given: "+f);
if(!(f instanceof z.Bd)){var h="",k=void 0;for(k in f){if(!/^[-_a-zA-Z0-9]+$/.test(k))throw Error("Name allows only [-_a-zA-Z0-9], got: "+k);var l=f[k];if(null!=l){if(l instanceof yI)l=DI(l);else if(UI.test(l)){for(var n=!0,q=!0,v=0;v<l.length;v++){var F=l.charAt(v);"'"==F&&q?n=!n:'"'==F&&n&&(q=!q)}n&&q||(l="zClosurez")}else l="zClosurez";h+=k+":"+l+";"}}f=h?(new z.Bd).Dp(h):z.Rl}f=f instanceof z.Bd&&f.constructor===z.Bd&&f.ON===z.Cd?f.dC:"type_error:SafeStyle"}else{if(/^on/i.test(g))throw Error('Attribute "'+
g+'" requires goog.string.Const value, "'+f+'" given.');if(g.toLowerCase()in VI)if(f instanceof EI)f=f instanceof EI&&f.constructor===EI&&f.cO===FI?f.LK:"type_error:TrustedResourceUrl";else if(f instanceof BI)f=f instanceof BI&&f.constructor===BI&&f.PN===CI?f.Wk:"type_error:SafeUrl";else if(z.oa(f))f instanceof BI||(f=f.sk?f.Ah():String(f),WI.test(f)||(f="about:invalid#zClosurez"),h=new BI,h.Wk=f,f=h),f=f.Ah();else throw Error('Attribute "'+g+'" on tag "input" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+
f+'" given.');}f.sk&&(f=f.Ah());g=g+'\x3d"'+z.Ma(String(f))+'"';c+=" "+g}}d=void 0;null!=d?z.ma(d)||(d=[d]):d=[];!0===XI.input?c+="\x3e":(b=GI(d),c+="\x3e"+z.Fd(b)+"\x3c/input\x3e",b=b.pm());(a=a&&a.dir)&&(b=/^(ltr|rtl|auto)$/i.test(a)?0:null);return z.Gd(c,b)};var YI=function(a,b){var c=z.qb(a,b,void 0);return 0<=c?(Array.prototype.splice.call(a,c,1),!0):!1};var ZI=function(a){20<a.length&&(a=a.substring(0,17)+"...");return a};var $I=function(){z.Q.call(this);this.Sf="zm-pm-item"};
var aJ=function(a){if(a.nb().length){var b=new z.El;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a.Eu);z.Al(b,function(a){return z.V.Ya(a,{module:"MessageItem"},function(){return{card:{card_type:"Content",content:{type:"Message",token:String((0,window.$)(a).data("token"))}}}})})}};var bJ=function(a,b){z.T.confirm("删除私信","你确定要删除这封私信吗？",function(a){a&&cJ(this,b)},a)};
var cJ=function(a,b){var c=new z.ep(!0);a.o().ta(c,"success",function(){var a=z.Dn(c);a.r?z.T.message(a.msg):window.location.reload()});c.ajax("/inbox/delete","type\x3dsingle\x26token\x3d"+b)};var dJ=function(){z.Q.call(this);this.Sf="zm-pm-item"};var eJ=function(a){var b=new z.ep(!0);b.on("success",function(){var a=z.Dn(b);a.r?z.T.message(a.msg):window.location.reload()});b.ajax("/inbox/delete","type\x3dthread\x26token\x3d"+a)};
var fJ=function(a,b,c,d,f){z.tE.call(this,a,b,f);this.ez=c||"people";this.YQ=d||["zg-follow","zg-unfollow"]};var gJ=function(a,b,c,d){z.H.call(this);this.h=a;this.ez=b||"people";this.XQ=c||["zg-btn-follow","zg-btn-unfollow"];this.text=d||["关注","取消关注"]};var hJ=function(a){z.H.call(this);this.url=a||"/topic"};
var iJ=function(a,b,c){var d=c[0],f="";"topic"!==d[0]&&d[3]&&(f='data-parent\x3d"'+d[3]+'"');b.html('\x3ca href\x3d"'+("topic"===d[0]?"/topic/"+d[2]+"/organize/entire":"javascript:;")+'" data-token\x3d"'+d[2]+'" '+f+' name\x3d"'+d[0]+'"\x3e'+d[1]+"\x3c/a\x3e\x3cul class\x3d'zm-topic-organize-list'\x3e\x3c/ul\x3e");"topic"!==c[0][0]&&b.addClass("zm-topic-organize-loadmore");b=(0,window.$)("ul",(0,window.$)(b));if(1<c.length)for(c=c[1],d=0;d<c.length;d++){var f=c[d],g=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");
b.append(g);iJ(a,g,f)}};var jJ=function(a,b,c){z.Lv.call(this,a,b,c)};var kJ=function(a){var b=a.De;return"question"===a.Nk?"/question/"+b:"//zhuanlan.zhihu.com/p/"+b};var lJ=function(a,b){z.Q.call(this);a?(this.ia={title:a.title,id:a.id,indexItem:a.tT,subTopic:a.RY},this.N={isEdit:!1}):(this.ia={title:"",id:void 0,indexItem:[],subTopic:[]},this.N={isEdit:!0});mJ(this,b)};
var mJ=function(a,b){function c(){a.Ph=!1}function d(a){if("string"===typeof a)try{return JSON.parse(a)}catch(b){return{}}else return a}a.service={oO:function(f){a.Ph=!0;return window.$.ajax({method:"post",url:"/topic_index_modules",data:{topicId:b,title:f.title}}).then(function(a,b,f){c();b=d(a);return 201===f.status?b.topicIndexModuleId:window.$.Deferred().reject(d(a).msg||a)},c)},FZ:function(f,g){a.Ph=!0;return window.$.ajax({method:"patch",url:"/topic_index_modules/"+f,data:{title:g,topicId:b}}).then(function(a,
b,f){c();if(204!==f.status)return window.$.Deferred().reject(d(a).msg||a)},c)},kQ:function(f){a.Ph=!0;return window.$.ajax({method:"delete",url:"/topic_index_items/"+f,data:{topicId:b,topicIndexModuleId:a.ia.id}}).then(function(a,b,f){c();if(204!==f.status)return window.$.Deferred().reject(d(a).msg||a)},c)},GE:function(f){a.Ph=!0;return window.$.ajax({method:"post",data:{objectType:f.Nk,topicIndexModuleId:a.ia.id,objectId:f.De,topicId:b},url:"/topic_index_items"}).then(function(a,b,f){c();b=d(a);
return 201===f.status?b:window.$.Deferred().reject(b.msg||a)},c)},rO:function(f){a.Ph=!0;return window.$.ajax({method:"post",data:{topicIndexModuleId:f.wr,subTopicId:f.qZ,topicId:b},url:"/topic_index_subtopics"}).then(function(a,b,f){c();b=d(a);return 201===f.status?b.topicIndexSubtopicId:window.$.Deferred().reject(b.msg||a)},c)},mQ:function(f){a.Ph=!0;return window.$.ajax({method:"delete",url:"/topic_index_subtopics/"+f,data:{topicId:b,topicIndexModuleId:a.ia.id}}).then(function(a,b,f){c();if(204!==
f.status)return window.$.Deferred().reject(d(a).msg||a)},c)},lQ:function(f){a.Ph=!0;return window.$.ajax({method:"delete",url:"/topic_index_modules/"+f,data:{topicId:b}}).then(function(a,b,f){c();if(204!==f.status)return window.$.Deferred().reject(d(a).msg||a)},c)},EZ:function(f,g){a.Ph=!0;return window.$.ajax({method:"PATCH",url:"/topic_index_items/"+f,data:{previousItemId:g.JK,nextItemId:g.OJ,topicIndexModuleId:g.wr,topicId:b}}).then(function(a,b,f){c();if(204!==f.status)return window.$.Deferred().reject(d(a).msg||
a)},c)}}};
var nJ=function(a,b,c){for(var d=Object.keys(b),f={key:void 0,Ne:void 0},d=z.ha(d),g=d.next();!g.done;f={key:f.key,Ne:f.Ne},g=d.next())switch(f.key=g.value,f.key){case "title":a.ia.title=a.qD.value=a.cd.textContent=b.title;a.dispatchEvent({type:oJ,data:{id:a.ia.id,title:a.ia.title}});break;case "id":a.ia.id=b.id;a.NO.name=b.id;break;case "indexItem":f.Ne=a;c||(a.QK.value="");g=[b];c&&g.push(c);g.forEach(function(a){return function(b){for(var d=b[a.key][0],f=b[a.key][1],g=0;g<f;g++)a.Ne.gC.children[d+g].remove(),
c||a.Ne.Mo.children[d+g].remove();a.Ne.ia[a.key].splice.apply(a.Ne.ia[a.key],[].concat(z.ia(b[a.key])));if(2<b[a.key].length){for(d=2;d<b[a.key].length;d++)f=(0,window.$)(a.Ne.gC.children[b[a.key][0]]),g=b[a.key][d],g='\x3cli class\x3d"TopicIndex-questionItem"\x3e\n      \x3ca class\x3d"question_link" target\x3d"_blank" href\x3d"'+kJ(g)+'"\x3e'+g.text+"\x3c/a\x3e\n    \x3c/li\x3e",f[0]?(0,window.$)(g).insertBefore(f):(0,window.$)(a.Ne.gC).append(g),c||(0,window.$)(a.Ne.Mo).append(pJ(b[a.key][d]));
c||qJ(a.Ne,a.Ne.Mo)}}}(f));break;case "subTopic":for(var g=b[f.key][0],h=b[f.key][1],k=0;k<h;k++)a.Zv.children[g+k].remove();if(2<b[f.key].length)for(g=2;g<b[f.key].length;g++)(0,window.$)(a.Zv).append(rJ(b[f.key][g]));a.ia[f.key].splice.apply(a.ia[f.key],[].concat(z.ia(b[f.key])))}};
var sJ=function(a,b){for(var c=Object.keys(b),c=z.ha(c),d=c.next();!d.done;d=c.next())switch(d.value){case "isEdit":if(a.N.isEdit=b.isEdit,!1===b.isEdit){if(!a.ia.id){a.dispatchEvent(tJ);return}d=a.Ha.removeClass("is-edit").children(".is-hide");0===a.ia.subTopic.length&&(d=d.not(".TopicIndex-subTopicsWrap"));d.removeClass("is-hide");a.Ha.find(".TopicIndex-editWrap").addClass("is-hide")}else a.BI=!0,a.Ha.addClass("is-edit").children().not(".zg-anchor-hidden").addClass("is-hide"),(0,window.$)(a.EQ).removeClass("is-hide")}};
var uJ=function(a,b){switch(b.type){case "title":a.jM.textContent=b.Ua;break;case "question":a.RK.textContent=b.Ua;break;case "topic":a.nM.textContent=b.Ua}};
var vJ=function(a,b,c){var d=new II({data:c,Cl:function(b){var c=a.ia.subTopic;return a.ia.id?a.service.rO({wr:a.ia.id,qZ:b[3]}).then(function(d){uJ(a,{type:"topic",Ua:""});nJ(a,{subTopic:[c.length,0,{text:b[0],De:b[3],id:d,token:b[1]}]});return b}).fail(function(b){uJ(a,{type:"topic",Ua:b||"添加失败"})}):(d.Pb=!1,uJ(a,{type:"title",Ua:"请输入标题"}))},nQ:function(b){var c=a.ia.subTopic.findIndex(function(a){return(0,window.parseInt)(a.De)===(0,window.parseInt)(b)});return a.service.mQ(a.ia.subTopic[c].id).then(function(){uJ(a,
{type:"topic",Ua:""});nJ(a,{subTopic:[c,1]});return b}).fail(function(b){return uJ(a,{type:"topic",Ua:b||"删除失败"})})}});d.bq=3;d.w(b.find(".zm-tag-editor")[0])};
var wJ=function(a,b){var c=(0,z.Zv)(xJ);new z.Qs(b,{source:"/question/autocomplete",ej:b.offsetParent,select:function(b){uJ(a,{type:"question",Ua:""});if(!a.ia.id)return uJ(a,{type:"question",Ua:"请输入标题后才能添加问题"});if(30<=a.ia.indexItem.length)return uJ(a,{type:"question",Ua:"问题数不能超过 30 个"}),"";a.service.GE({wr:a.ia.id,De:b.url_token,Nk:"question"}).then(function(c){nJ(a,{indexItem:[a.ia.indexItem.length,0,{Nk:"question",De:b.url_token,id:c.topicIndexItemId,text:b.title}]});uJ(a,{type:"question",Ua:""})}).fail(function(b){return uJ(a,
{type:"question",Ua:b||"添加失败"})})},rd:function(a,b,g){g.innerHTML=c(a.data)}});b.addEventListener("input",function(c){(c=c.target.value.trim())||uJ(a,{type:"question",Ua:""});if(c.startsWith("http")){for(var f={article:/http[s]?:\/\/zhuanlan.zhihu.[a-z]{3}\/p\/(\d+)/,question:/http[s]?:\/\/www.zhihu.com\/question\/(\d+)/},g=void 0,h=Object.keys(f),h=z.ha(h),k=h.next();!k.done;k=h.next()){var k=k.value,l=f.article.exec(c);if(l&&l[1]){g={Nk:k,De:l[1],wr:a.ia.id};break}}g&&a.service.GE(g).then(function(c){uJ(a,
{type:"question",Ua:""});g.title=c.topicIndexItemTitle;nJ(a,{indexItem:[a.ia.indexItem.length,0,{De:g.De,id:c.topicIndexItemId,text:g.title,Nk:g.Nk}]});b.value=""}).fail(function(b){return uJ(a,{type:"question",Ua:b||"添加失败"})})}})};
var qJ=function(a,b){if(!z.sm.fb){a.Gc&&a.Gc.dispose();var c=new z.Ss;a.Gc=c;c.HC("question-cursor-move");z.Us(c,"question-cursor-move opacity-40");z.Ts(c,b,0);c.init();a.Gc=c;a.Gc.H=(0,window.$)(b);a.o().g(a.Gc,"dragend",function(c){uJ(a,{type:"topic",Ua:""});c=c.WF;var f=c.dataset.id,g=a.ia.indexItem.findIndex(function(a){return Number(a.id)===Number(f)}),h={wr:a.ia.id,JK:c.previousElementSibling?c.previousElementSibling.dataset.id:0,OJ:c.nextElementSibling?c.nextElementSibling.dataset.id:0},k=
[].indexOf.call(b.children,c);a.Pb===c||k===g||0===h.JK&&0===h.OJ||(a.service.EZ(f,h).then(function(){a.Pb=null;nJ(a,{indexItem:[g,1]},{indexItem:[k,0,a.ia.indexItem[g]]});a.dispatchEvent("sort");uJ(a,{type:"question",Ua:""})}).fail(function(b){a.Pb=null;uJ(a,{type:"question",Ua:b||"调整失败"})}),a.Pb=c)});(0,window.$)(b).find("a, i").on("mousedown",function(a){return a.stopPropagation()})}};
var yJ=function(a){return"\n    \x3cdiv class\x3d\"TopicIndex-editWrap\"\x3e\n      \x3cdiv class\x3d'TopicIndex-edit'\x3e\n        \x3cdiv class\x3d'TopicIndex-editTitle'\x3e标题\x3cspan class\x3d\"TopicIndex-errTips\"\x3e\x3c/span\x3e\x3c/div\x3e\n        \x3cdiv class\x3d'TopicIndex-editContent'\x3e\n          \x3cinput type\x3d'text' class\x3d'TopicIndex-editSectionTitle zg-form-text-input js-change' placeholder\x3d'输入标题' value\x3d\""+(a&&a.title?a.title:"")+"\" role\x3d'combobox'\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d'TopicIndex-edit'\x3e\n        \x3cdiv class\x3d'TopicIndex-editTitle'\x3e相关问题或文章\x3cspan class\x3d\"TopicIndex-errTips\"\x3e\x3c/span\x3e\x3c/div\x3e\n        \x3cdiv class\x3d'TopicIndex-display'\x3e\n          \x3cdiv class\x3d'TopicIndex-questionList'\x3e"+
(a&&a.indexItem?a.indexItem&&a.indexItem.map(function(a){return'\x3cdiv class\x3d"TopicIndex-questionItem item" data-id\x3d'+a.id+'\x3e\n                \x3cspan class\x3d"zg-icon-drag-wrap"\x3e\x3ci class\x3d"zg-icon-drag"\x3e\x3c/i\x3e\x3c/span\x3e\n                \x3ca class\x3d"question_link" target\x3d"_blank" href\x3d"'+kJ(a)+'"\x3e'+a.text+'\x3c/a\x3e\n                \x3ca class\x3d"TopicIndex-binButton zu-bin-button js-delete" name\x3d"delete"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e删除\x3c/a\x3e\n            \x3c/div\x3e'}).join("")||
""||"":"")+"\n          \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d'TopicIndex-editContent'\x3e\n          \x3cinput type\x3d'text' class\x3d'zg-form-text-input TopicIndex-editQuesInput' placeholder\x3d'搜索问题或粘贴问题、文章链接' role\x3d'combobox' autoComplete\x3d'off' /\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d'TopicIndex-edit'\x3e\n        \x3cdiv class\x3d'TopicIndex-editTitle'\x3e\n          \x3cspan class\x3d\"TopicIndex-editTitleText\"\x3e相关话题\x3cspan class\x3d\"TopicIndex-errTips\"\x3e\x3c/span\x3e\x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d\"zm-tag-editor zg-section\"\x3e\n          \x3cdiv class\x3d\"zm-tag-editor-labels zg-clear\"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d'zm-command clearfix'\x3e\n        \x3cspan class\x3d'zg-left'\x3e\x3ca class\x3d'js-finish submit-button zg-btn-blue' name\x3d'exit'\x3e完成\x3c/a\x3e\x3c/span\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e"};
var zJ=function(a){return'\x3ca class\x3d"zg-anchor-hidden" name\x3d"'+a.id+'"\x3e\x3c/a\x3e\n    \x3ch3 class\x3d"TopicIndex-sectionTitle"\x3e'+a.title+'\x3c/h3\x3e\n    \x3cul class\x3d"TopicIndex-questionList"\x3e'+(a.indexItem&&a.indexItem.map(function(a){return'\x3cli class\x3d"TopicIndex-questionItem"\x3e\n        \x3ca class\x3d"question_link" target\x3d"_blank" href\x3d"'+kJ(a)+'"\x3e'+a.text+"\x3c/a\x3e\n      \x3c/li\x3e"}).join("")||"")+'\n    \x3c/ul\x3e\n    \x3cdiv class\x3d"TopicIndex-subTopicsWrap"\x3e\n      \x3cspan class\x3d"TopicIndex-subLabel"\x3e相关话题：\x3c/span\x3e\n      \x3cdiv class\x3d"TopicIndex-subTopics clearfix"\x3e'+
(a.subTopic&&a.subTopic.map(function(a){return'\x3cspan data-id\x3d"'+a.id+'"\x3e\x3ca class\x3d"zm-item-tag" href\x3d"/topic/'+a.token+'" data-tip\x3d"t$b$'+a.token+'" data-token\x3d"'+a.token+'" data-topicid\x3d"'+a.De+'"\x3e'+a.text+"\x3c/a\x3e\x3c/span\x3e"}).join("")||"")+'\n      \x3c/div\x3e\n    \x3c/div\x3e\n    \x3ca class\x3d"TopicIndex-editButton zu-edit-button js-edit" name\x3d"edit"\x3e\n      \x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改\x3c/a\x3e'};
var pJ=function(a){return'\n    \x3cdiv class\x3d"TopicIndex-questionItem item" data-id\x3d"'+a.id+'"\x3e\n      \x3cspan class\x3d"zg-icon-drag-wrap"\x3e\x3ci class\x3d"zg-icon-drag"\x3e\x3c/i\x3e\x3c/span\x3e\n      \x3ca class\x3d"question_link" target\x3d"_blank" href\x3d"'+kJ(a)+'"\x3e'+a.text+'\x3c/a\x3e\n      \x3ca class\x3d"TopicIndex-binButton zu-bin-button js-delete" name\x3d"delete"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e删除\x3c/a\x3e\n    \x3c/div\x3e'};
var rJ=function(a){return'\x3cspan data-id\x3d"'+a.id+'"\x3e\x3ca class\x3d"zm-item-tag" href\x3d"/topic/'+a.token+'" data-tip\x3d"t$b$'+a.token+'" data-token\x3d"'+a.token+'" data-topicid\x3d"'+a.De+'"\x3e'+a.text+"\x3c/a\x3e\x3c/span\x3e"};var AJ=function(a){z.Q.call(this);this.Nm=z.mm;this.VT=!1;this.token=z.Mk[0][1];this.list=a};var BJ=function(a){a.VT=!0;a.H.toggleClass("is-edit",!0);a.ql.text("")};var CJ=function(a,b){a.ql.text("string"===typeof b?b:"未知错误")};
var DJ=function(a,b){if(b instanceof Array)a.dh.append(b.map(function(a){return EJ(a)}).join("")),a.list=b;else{var c=b.uN,d=b.tN;c&&(a.dh.append(EJ(c)),a.list.push(c));"number"===typeof d&&(a.dh.children().eq(d).remove(),a.list.splice(d,1))}(0,window.$)(".TopicBook-item").each(function(a,b){z.V.Ya(b,{module:"EBookItem",index:""},function(){return{card:{content:{type:"EBook",id:b.getAttribute("data-book-id")}}}})})};
var EJ=function(a){var b=a.title,c=a.ZE,d=a.jI,f=a.RA,g=a.link;return"\n    \x3c"+(g?'a href\x3d"'+g+'" target\x3d"_blank"':"div")+' class\x3d"TopicBook-item" data-book-id\x3d"'+a.id+'"\x3e\n      \x3cdiv class\x3d"TopicBook-itemImgWrapper"\x3e\n        \x3cimg class\x3d"TopicBook-itemImg" src\x3d"'+(d&&d.replace(/.(jpg|png|jpeg)/,function(a,b){return"_200x0."+b}))+'"\x3e\n        '+(f?'\x3cdiv class\x3d"TopicBook-previewTips js-preview"\x3e试读\x3c/div\x3e':"")+'\n      \x3c/div\x3e\n      \x3cp class\x3d"TopicBook-itemTitle"\x3e'+
b+'\x3c/p\x3e\n      \x3cp class\x3d"TopicBook-itemAuthors"\x3e'+(c&&c.slice(0,2).join("、")+(2<c.length?"等":""))+'\x3c/p\x3e\n        \x3cdiv class\x3d"TopicBook-itemActions"\x3e\n        \x3c/div\x3e\n      \x3cbutton class\x3d"TopicBook-delButton js-delete"\x3e\x3c/button\x3e\n    \x3c/'+(g?"a":"div")+"\x3e\n    "};
var FJ=function(a){return window.$.ajax({method:"get",url:"/topic_index/book/info?link\x3d"+(0,window.encodeURIComponent)(a)}).then(function(b){return b.errcode?window.$.Deferred().reject(b.msg):{id:b.id,title:b.title,ZE:b.authors,jI:b.image_url,RA:b.kindle_url,link:b.link||a}})};
var GJ=function(a){return window.$.ajax({method:"get",url:"/topic_index/"+a+"/books"}).then(function(a){return a.errcode?window.$.Deferred().reject(a.msg):a.map(function(a){return{id:a.id,title:a.title,ZE:a.authors,jI:a.image_url,RA:a.kindle_url,link:a.link}})})};var HJ=function(a,b){return window.$.ajax({method:"post",url:"/topic_index/"+a+"/book",data:{book_id:b}}).then(function(a){if(a&&a.errcode)return window.$.Deferred().reject(a.msg)})};var IJ=function(a){return a.children("a").attr("href").substr(1)};
var JJ=function(a){return{id:a.data("id"),title:a.find(".TopicIndex-sectionTitle").text(),tT:[].concat(z.ia(a[0].querySelectorAll(".TopicIndex-questionItem"))).map(function(a){a=(0,window.$)(a);var c=a.children(),d=c.attr("href"),f=d&&d.match(/\/question\/(\d)+/);return{id:a.data("id"),De:f?f[1]:d&&d.match(/\d+/g)[0],Nk:f?"question":"article",text:c.text()}}),RY:[].concat(z.ia(a[0].querySelectorAll(".TopicIndex-subTopics span"))).map(function(a){a=(0,window.$)(a);var c=a.children();return{id:a.data("id"),
De:c.data("topicid"),token:c.data("token"),text:c.text()}})}};var KJ=function(a,b){z.Q.call(this);this.ia={id:a,Nm:b};this.Ug=[]};var LJ=function(a){var b=a.ia,c=b.Nm;GJ(b.id).then(function(b){if(b&&b.length||c)b=new AJ(b),b.render(a.Ww[0]),a.jg.append('\n          \x3cdiv class\x3d"TopicIndex-tocItem"\x3e\x3ca class\x3d"TopicIndex-tocLink" href\x3d"#TopicBook"\x3e书籍推荐\x3c/a\x3e\x3c/div'),a.yl=a.jg.find("a"),a.zs.push((0,window.$)(b.m()).offset().top),a.jg.toggleClass("is-hide",2>=a.yl.length)})};
var MJ=function(a){if(!z.sm.fb&&a.ia.Nm){a.Gc&&a.Gc.dispose();var b=new z.Ss;a.Gc=b;b.HC("toc-cursor-move");z.Us(b,"toc-cursor-move opacity-40");z.Ts(b,a.xl[0],0);b.init();a.Gc=b;a.o().g(a.Gc,"dragend",function(b){b=b.WF;var d=IJ((0,window.$)(b)),f=[].findIndex.call(a.qf,function(a){return Number(a.dataset.id)===Number(d)}),g={target_module_id:d,pre_module_id:b.previousElementSibling?IJ((0,window.$)(b.previousElementSibling)):0,post_module_id:b.nextElementSibling?IJ((0,window.$)(b.nextElementSibling)):
0},h=a.xl.children().index((0,window.$)(b));a.Pb===b||h===f||0===g.pre_module_id&&0===g.post_module_id||(window.$.ajax({method:"post",url:"/topic_index/"+a.ia.id+"/module_rearranged",data:g}).done(function(){a.Pb=null;h<f?a.qf.eq(h).before(a.qf.eq(f)):a.qf.eq(h).after(a.qf.eq(f));var b=a.Ug.splice(f,1)[0];h>a.Ug.length-1?a.Ug[h]=b:a.Ug.splice(h,0,b);a.qf=a.H.find(".TopicIndex-section")}).fail(function(){a.Pb=null;z.T.alert("模块移动失败")}),a.Pb=b)});a.xl.find("a").on("mousedown",function(a){a.target===
a.currentTarget&&a.stopPropagation()})}};var NJ=function(a,b){a.o().g(b,tJ,function(){a.Ug.splice(a.Ug.indexOf(b),1);b.dispose()})};var OJ=function(a,b){a.o().g(b,oJ,function(b){PJ(a,b.data)})};
var PJ=function(a,b){for(var c=!0,d=a.xl.children(),f=0;f<d.length;f++){var g=d.eq(f),h=g.children("a"),k=h.attr("href").substr(1);Number(b.id)===Number(k)&&(b.title?h.text(b.title).prepend(QJ):g.remove(),c=!1)}c&&a.xl.append('\x3cli class\x3d"TopicIndex-tocItem"\x3e\n    \x3ca class\x3d"TopicIndex-tocLink TopicIndex-tocLink--edit" href\x3d"#'+b.id+'"\x3e\n      \x3cspan class\x3d"TopicIndex-dragIcon js-drag"\x3e\n        \x3cspan class\x3d"zg-icon-drag-wrap"\x3e\x3ci class\x3d"zg-icon-drag"\x3e\x3c/i\x3e\x3c/span\x3e\n      \x3c/span\x3e\n      '+
b.title+"\n    \x3c/a\x3e\n  \x3c/li\x3e");a.yl=a.jg.find("a");a.zs=Array.from((0,window.$)(".TopicIndex-section, .TopicBook"),function(a){return(0,window.$)(a).offset().top});a.jg.toggleClass("is-hide",2>=a.yl.length);MJ(a);a.qf=a.H.find(".TopicIndex-section")};var RJ=function(a,b){var c=z.Uo(function(a){b.toggleClass("TopicIndex-toc--sticky",a)},function(){return 150<z.Re(window.document).y});c();a.o().g(window,"scroll",c)};
var SJ=function(a,b){function c(){var b=z.Re(window.document).y,c=0;a.zs.some(function(a,d){b>a&&(c=d+1)});return Math.min(c,a.zs.length-1)}var d=window.location.hash,f=b.find("a"),g=0;Array.from(f).some(function(a,b){if((0,window.$)(a).attr("href")===d)return g=b,!0});f.eq(g).addClass("TopicIndex-tocLink--active");a.zs=Array.from(a.qf,function(a){return(0,window.$)(a).offset().top});a.o().g(window,"scroll",function(){var b=c();b!==g&&(a.yl.eq(g).removeClass("TopicIndex-tocLink--active"),g=b,a.yl.eq(g).addClass("TopicIndex-tocLink--active"))})};
var TJ=function(){z.Q.call(this)};var UJ=function(){z.Q.call(this);var a=z.Mk;this.eg=a[0][3];this.ji=a[0];this.Cx=a[4];this.HA=a[5];this.Th="topic"};
var VJ=function(){(0,window.$)(".zm-topic-list-container").on("click",".js-questionUnhelpful",function(a){a=(0,window.$)(a.currentTarget);var b=a.data("qid"),c=a.data("isRevert");if(b)return c?(a.text("没有帮助").data("isRevert",!1),window.$.post("/question/revert-unhelpful",{qid:b})):(a.text("撤销没有帮助").data("isRevert",!0),window.$.post("/question/unhelpful",{qid:b})),!1})};
var WJ=function(){var a=z.J("zh-topic-log-list");if(a&&((new fJ(a,null,null,"js-topic-log-more",!0)).init(),(0,window.$)(a).on("click",'a[name\x3d"revert"]',z.Uo(function(a){!1!==a&&z.pE(this)},z.zE({vr:!0}))),a=(0,window.$)(".topic-info .zm-topic-log-nav"),a[0])){var b=(0,window.$)(".zu-top-feed-list-wrap"),c=new TJ;z.zn(c,b[0]);var d=(0,window.$)(c.m()).hide();"#index-log"===window.location.hash&&(b.hide().children(".zu-button-more").hide(),d.show().children(".zu-button-more").show());a.children().eq("#index-log"===
window.location.hash?1:0).addClass("is-active").siblings().removeClass("is-active");a.on("click","li",function(a){a=(0,window.$)(a.currentTarget);a.hasClass("is-active")||(a.addClass("is-active").siblings().removeClass("is-active"),"#index-log"===a.find("a").attr("href")?(b.hide().children(".zu-button-more").hide(),d.show().children(".zu-button-more").show()):(d.hide().children(".zu-button-more").hide(),b.show().children(".zu-button-more").show()))})}};
var XJ=function(a){if(z.J("zh-topic-admin-page-wrap")){var b=z.J("zh-topic-del-btn");b&&a.o().g(b,"click",a.wV)}};var YJ=function(a,b){var c=z.Me("li",null,a.mx);z.A(c,function(a){a.getAttribute("data-token")===b[1]&&z.P(a,!1)})};var ZJ=function(a){var b=window.location.pathname.split("/").pop(),c=z.J("zh-topic-users-list-wrap");c&&(a=new fJ(c,["/topic",(0,window.encodeURI)(a.ji[1]),b].join("/"),null,["zg-btn-follow","zg-btn-unfollow"],!0),a.mj("zm-person-item"),a.init())};
var $J=function(a){var b=z.J("zh-topic-side-head");if(b){var c=z.L("zu-entry-focus-button",b);c&&a.o().g(c,"click",function(){(0,z.RG)(c,"topic","",["zg-btn-green","zg-btn-white"])});a.Ng=z.J("zh-topic-operation-menu");a.Ng&&a.o().g(a.Ng,"click",a.QC)}if(b=z.J("zh-current-topic-bio")){var d=new z.Lv(!0,"/topic/bio/update","bio");vI(d,["tid\x3d"+a.eg]);d.fc='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e你在 '+a.ji[0]+" 话题中的经验\x3c/a\x3e";d.lG=!0;d.w(b)}var f=(0,window.$)(".zm-topic-side-person-list .js-showAll");
if(f.length)f.on("click",function(){(0,window.$)(".zm-topic-side-person-list").addClass("show-all");f.remove()})};var aK=function(a){z.af(a,z.Ye('\x3ca href\x3d"/question/23261456" class\x3d"zg-link-gray-normal"\x3e\x3ci class\x3d"icon-info" style\x3d"vertical-align: -3px; margin-right: 6px"\x3e\x3c/i\x3e如何参与知乎话题的公共编辑？\x3c/a\x3e'))};
var bK=function(a){if(z.J("zh-topic-organize-page-wrap")){var b=z.J("zh-topic-organize-parent-editor");if(b)if(z.Y.Ut){var c=new z.Bt(null,a.eg,!0);c.Ru=!0;c.w(b);c.addEventListener("remove_tag",function(a){(a=a.data&&a.data.id)&&(0,window.$)("#wedge-"+a).remove()})}else aK(b);if(b=z.J("zh-topic-organize-child-editor"))z.Y.Ut?(c=new z.Bt(null,a.eg,!1),c.Ru=!0,c.w(b),(0,window.$)("a.entire-link").insertAfter(c.Lo).show()):aK(b);(0,window.$)("#zm-topic-manage-relation").on("change",'[type\x3d"checkbox"]',
function(){var a=(0,window.$)(this).closest("li").attr("id").split("-")[1];window.$.post("/topic/update",{action:"set_topic_edge",parent_topic_id:a,topic_id:z.Mk[0][3],edge:this.checked^0}).done(function(a){if(!a)return z.T.message("网络异常");if(a.r)return z.T.message(a.msg)})});a.lx=z.J("zh-topic-alias-input");new z.Wj(a.lx,"输入话题别名");a.mx=z.J("zh-topic-alias-list");a.o().g(z.J("zh-topic-alias-container"),"click",a.iW);if(b=z.J("zh-topic-merge"))a.Ma=new KI,a.Ma.w(b);(b=z.J("zh-topic-merge-btn"))&&a.o().g(b,
"click",a.JV)}};var cK=function(){var a=z.J("zh-topic-organize-page-children");a&&(new hJ("/topic/"+(0,window.encodeURIComponent)(z.Mk[0][1])+"/organize/entire")).w(a)};var dK=function(a){var b=z.J("zh-topic-side-related-topics");b&&(a.wX=b,a.nC=new z.ep(!1),a.o().g(a.nC,"complete",a.UV),a.nC.ajax("/topic/related?tid\x3d"+a.eg))};
var eK=function(a){if(z.Y.a0)(0,window.$)("div.topic-avatar").addClass("disabled");else{var b=z.L("zm-entry-head-avatar-edit-button");if(b){var c=new z.Az(2,z.Mk[0][3]);c.w(b);var d=z.L("zm-avatar-editor-preview");z.G(c,"beforepost",function(){(0,window.$)("\x3cdiv class\x3d'avatar-edit-preview-loading topic'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e").appendTo(d.parentNode)});z.G(c,"success",function(){window.$.post("/topic/"+z.Mk[0][1]+"/avatar",{avatar_path:c.getData().url}).then(function(a){if(!a)return z.T.message("网络异常");
if(a.r)return z.T.message(a.msg);d&&(d.src=c.getData().url)}).always(function(){(0,window.$)(".avatar-edit-preview-loading").remove()})});a.o().g(c,"beforeopen",z.Uo(z.zE({vr:!0}),z.Dq(z.r,!0)))}}};var fK=function(a){gK(a);hK(a);a.IJ&&a.o().g(a.IJ,"afterload",function(b){z.U.Bb({type:"ga_click_topic_more",data:b.data,target:a.IJ.de})})};
var gK=function(a){var b=z.J("zh-topic-feed-list");if(b){var c=new z.El;a.K(c);c.use("locationSource",{Bu:0,offset:function(a){return z.jb(a).getAttribute("data-score")}});c.use("childConstructor",{factory:z.gE}).use("expandLimit");c.w(b);a.o().g(c,"click!",function(a){"comment"===a.namespace&&a.Oc.fill("category",this.Th).fill("label","topic_activity")})}};
var hK=function(a){var b=z.J("zh-topic-top-page-list");if(b){var c=new z.El({bg:!1});a.K(c);c.use("childConstructor",{factory:z.gE}).use("expandLimit");c.w(b);a.o().g(c,"click!",function(a){"comment"===a.namespace&&a.Oc.fill("category",this.Th).fill("label","topic_activity")})}};
var iK=function(){function a(a){if(!a)return z.T.message("网络异常");if(a.r)return z.T.message(a.msg)}(0,window.$)("#zh-topic-manage-relation-form").on("change",'input[type\x3d"radio"]',function(){window.$.post("/topic/update",{action:"set_topic_weaknode",topic_id:z.Mk[0][3],weak:(0,window.$)(this).val()}).done(a)});(0,window.$)("#zh-topic-manage-lock-form").on("change",'[type\x3d"checkbox"]',function(){window.$.post("/topic/lock",{url_token:z.Mk[0][1],lock_type:this.name,lock_value:(0,window.$)(this).is(":checked")?
1:0}).done(a)})};var jK=function(a){var b=(0,window.$)(".topic-info a[name\x3dshare]"),c=b.get(0),d=window.location.href,f={index:[/\/topic\/\d+$/],hot:[/\/topic\/\d+\/newest/],top_answers:[/\/topic\/\d+\/top-answers/],unanswered:[/\/topic\/\d+\/unanswered/,/\/topic\/\d+\/questions/]},g=Object.keys(f).find(function(a){return f[a].some(function(a){return a.test(window.location.pathname)})})||"";c&&(z.uD(c,"topic",a.ji[1],d).yb(a),b.click(function(){z.W("share","click_share_topic_page",g)}))};
var kK=function(){var a=(0,window.$)(".TopicIndex")[0];a&&(new KJ(z.Mk[0][1],z.mm)).w(a)};var lK=function(a){z.Q.call(this,a)};var mK=function(a,b,c){var d,f,g=[];for(d in c)f=c[d],z.na(f)?z.A(f,(0,z.t)(function(a){g.push(RI({type:"hidden",name:d,value:String(a)}))},a)):g.push(RI({type:"hidden",name:d,value:String(f)}));z.Fe(b,GI(g))};var nK=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"day"})})};
var oK=function(a){return window.$.get("/node/ExploreHotFavlistsInnerV2",{params:JSON.stringify({offset:a})})};var pK=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"month"})})};var qK=function(){z.H.call(this)};var rK=function(){z.Q.call(this);var a=z.Jk||[0,0];this.zu=a[0];this.visible=!!a[1];this.Th="collection"};
var sK=function(){var a=z.J("zh-favlist-following-wrap");a&&((new fJ(a,null,"favlist",null,!0)).init(),(0,window.$)(a).on("click","a.zg-unfollow",function(a){"/collections"===window.location.pathname&&(a=(0,window.$)(a.target).attr("href"),/\/collection\/\d+\/followers/.test(a)?z.ui({category:"collection",action:"visit_collection_followers",label:"collections_my_followed_collections_collection_followers_count"}):z.ui({category:"collection",action:"click_unfollow_collection",label:"collections_my_followed_collections_unfollow_collection"}))}).on("click",
".zm-item-title \x3e a",function(){var a=window.location.pathname;"/collections"===a?z.ui({category:"collection",action:"visit_collection",label:"collections_my_followed_collections_collection"}):"/collections/mine"===a&&z.ui({category:"collection",action:"visit_collection",label:"collections_my_collection"})}))};
var tK=function(a){var b=z.J("zh-list-side-head");if(b){var c=z.L("zu-entry-focus-button",b);c&&a.o().g(c,"click",function(){(0,z.RG)(c,"favlist","",["zg-btn-green","zg-btn-white"])});a.Ng=z.J("zh-list-operation-menu");a.Ng&&a.o().g(a.Ng,"click",a.QC)}(b=z.J("zh-single-answer-author-info"))&&(new gJ(b)).init();(b=z.J("zh-list-create-new-list"))&&a.o().g(b,"click",a.BY);(b=z.J("zh-fav-list-side-bar-creator"))&&(new gJ(b)).init();z.V.Ya((0,window.$)(".zu-main-sidebar")[0],{module:"RightSideBar"});b=
(0,window.$)("#zh-fav-list-side-bar-report");b.length&&(b.on("click",function(b){(new z.Jz({type:"favlist",id:a.zu})).render();z.V.trackEvent(b.currentTarget,{action:"ReportIntent",element:"Button"})}),z.V.Ya(b[0],{module:"CollectionItem"},function(){return{card:{card_type:"Content",content:{type:"Collection",token:String(z.Jk[2])}}}}))};
var uK=function(a){z.T.confirm("删除收藏夹","你确定要删除这个收藏夹吗？",function(a){a&&(a=new z.zr,a.add("favlist_id",this.zu),a.add("_xsrf",(new z.rg(window.document)).get("_xsrf")),(new lK).post(xI(a),"/collection/delete"))},a)};
var vK=function(a){a.Ja||(a.Ja=new z.tC(a.zu,"favlist"),a.K(a.Ja),a.o().g(a.Ja,"click!",function(a){"comment"===a.namespace&&(a.Oc.fill("category",this.Th).fill("label","collection"),a.Oc.action=a.Oc.action.replace("favlist","collection"))}),z.xC(a.Ja,a.Lu,(0,window.$)(".toggle-comment",a.Lu)[0]))};var wK=function(a){a.GM=new z.ep(!0);a.o().g(a.GM,"complete",function(){window.location.reload()});a.GM.ajax("/collection/update","favlist_id\x3d"+a.zu+"\x26is_public\x3d1")};
var xK=function(a,b){z.H.call(this);this.qa=a;this.Ib=b;this.data=z.X};var yK=function(a){a.ev&&a.ev.aa(a.data.xb?"撤消匿名身份":"使用匿名身份")};var zK=function(a,b){return a?b?new z.PA(a):new z.Sz(a):new z.Wz};var AK=function(a){a.Yk.innerHTML="";z.P(a.Yk,!1);a.Sp=!1;a.Zm.Vq("问题重定向");z.fp("/question/unredirect",null,"POST","qid\x3d"+a.qa+"\x26rqid\x3d"+a.Fv)};
var BK=function(a,b){z.Q.call(this);this.Hy=this.lr=null;this.tK=b;this.content=a;this.type=b.type;this.token=b.token;this.title=this.type===CK?"一句话介绍":"在 "+b.ji+" 话题下的话题经验"};var DK=function(a){a.zj.focus();z.rs(a.zj.get()[0],a.zj.val().length)};var EK=function(a,b){a.lr=b;(0,window.$)(a.h).attr("class","zm-bio-item "+a.lr)};var FK=function(a,b){z.H.call(this);this.ET=b;this.gG=a;this.items=[];this.eJ=!1;this.kY=z.jm.selected_bio};var GK=function(){HK||(HK=new FK(z.lm,!1));return HK};
var IK=function(a){var b=z.X.Ga;a.eJ=!0;a.$K=b};var JK=function(a){window.$.get("/question/"+a.$K+"/bios").then(function(b){a.QU=!0;a.gG=b.msg;KK(a)})};var KK=function(a){if(!a.QU&&a.eJ)JK(a);else{if(!a.ua){a.ua=new z.R;a.ua.La("编辑话题经验");z.Rh(a.ua,null);a.ua.$q(!0);var b=a.ua.S();z.S.add(a.ua.m(),"bio-editor-modal");b.innerHTML='\x3cdiv class\x3d"bio-editor-modal-title"\x3e可以填写你从事的职业、取得的资格或过往的经历，让你在这个问题下的回答更具说服力。\x3c/div\x3e';a.render(b)}a.ua.F(!0)}};
var LK=function(a,b,c){b=new BK(b,c);b.render(a.HT);c.token===a.kY&&b.yc(!0);b.yb(a);a.items.push(b)};var MK=function(a){var b=a.getSelection();b&&window.$.post("/question/"+a.$K+"/bio",{bio:b.getToken()}).then(function(){a.sa({action:"edit_topic_experience_success",attributes:{topic_experience_topic_id:b.getToken(),topic_experience_topic_content:b.cb()}})})};
var NK=function(a,b){z.Q.call(this);this.bb=a;this.pt=uI(this.bb);this.isContentEditable=this.bb.isContentEditable();this.fZ=30;this.he=new z.td(1E3*this.fZ);this.qa=z.X?z.X.qa:0;this.CI=b||!1};var OK=function(a){PK(a,"保存中…");a.Ky();a.IT()};var QK=function(a){a.he.stop()};var RK=function(a){a.nD&&((0,window.clearInterval)(a.nD),a.nD=null)};var SK=function(a,b){var c=z.fj(b||(0,z.I)());/^\d/.test(c)&&(c=" "+c);PK(a,"已存于"+c)};
var PK=function(a,b,c){var d=(0,window.$)(a.oI);c?d.addClass("warning"):d.removeClass("warning");z.P(a.cu,!0);z.of(a.oI,b)};var TK=function(a){UK(a);var b={qid:a.qa,timestamp:(0,z.I)()};(0,window.setTimeout)(function(){window.$.post("/draft/delete",b)},500)};var UK=function(a){a.cJ&&(a.cJ.abort(),a.Xs());RK(a);z.P(a.cu,!1);a.dispatchEvent("clearContent")};
var VK=function(a,b){z.Q.call(this);this.hY=(0,window.$)(a).children();this.contents=[];this.oh=0;this.bt=[];this.className=b||"";this.bF=!1;this.delay=0;this.os=null;z.A(this.hY,function(a){a=(0,window.$)(a).addClass("carousel-inner-content");this.contents.push(a);this.bt.push((0,window.$)("\x3cdiv\x3e\x3c/div\x3e").addClass("carousel-dot"))},this)};
var WK=function(a,b){if(0>b||b>=a.contents.length)return!1;a.os&&((0,window.clearTimeout)(a.os),a.os=null);a.bt[a.oh].removeClass("carousel-dot-selected");a.contents[a.oh].hide();a.bt[b].addClass("carousel-dot-selected");a.contents[b].show();a.oh=b;XK(a);return!0};var XK=function(a){var b=a.oh;a.bF&&(a.os=(0,window.setTimeout)(function(){b===a.oh&&(b===a.contents.length-1?WK(a,0):a.next())},a.delay))};
var YK=function(){function a(){function a(){return new window.Promise(function(a){v.onAnimationEnd(function(){a()},400)})}function b(a){return z.nb(a,function(a,b){return a.then(b)},window.Promise.resolve())}if(!d){d=!0;var c=(0,window.$)("#copyright-demo-region1"),f=(0,window.$)("#copyright-demo-region2"),n=(0,window.$)("#copyright-demo-region3"),q=(0,window.$)("#copyright-demo-region4"),v=(0,window.$)("#copyright-demo-indicator");(0,window.$)(".frame2-region").removeClass("copyright-demo-region-selected");
b([function(){v.show().addClass("indicator-move1");c.addClass("copyright-demo-region1-select-animation");return a()},function(){c.removeClass("copyright-demo-region1-select-animation").addClass("copyright-demo-region-selected");v.removeClass("indicator-move1").addClass("indicator-move2");return a()},function(){f.addClass("copyright-demo-region-selected");v.removeClass("indicator-move2").addClass("indicator-move3");return a()},function(){n.addClass("copyright-demo-region-selected");v.removeClass("indicator-move3").addClass("indicator-move4");
return a()}]).then(function(){q.addClass("copyright-demo-region-selected");v.removeClass("indicator-move4");d=!1})}}function b(){var a=(0,window.$)(".copyright-demo-pointer"),b=(0,window.$)(".copyright-demo-noty");a.css("opacity","0");b.css("opacity","0");a.addClass("copyright-demo-pointer-show-animation");b.addClass("copyright-demo-noty-show-animation");(0,window.setTimeout)(function(){a.removeClass("copyright-demo-pointer-show-animation");b.removeClass("copyright-demo-noty-show-animation");a.css("opacity",
"1");b.css("opacity","1")},1100)}var c=z.VD.rJ(z.Y[2]).addClass("copyright-demo-noty"),d=!1,f=(0,window.$)((0,window.$)("#copyright-demo-template").html());(0,window.$)("#copyright-demo-frame3",f).append(c);c=new VK(f,"copyright-demo");c.g("rightShow",function(c){1===c.offset?a():2===c.offset&&b()});f=new z.R;c.render(f.S());f.La("功能演示");z.Zh(f,462);return{dialog:f,sF:c}};
var ZK=function(){var a=(0,window.$)('\x3cdiv id\x3d"copyright-demo-helper" style\x3d"display: none; position: absolute;"\x3e\x3cp class\x3d"copyright-demo-helper-intro"\x3e 勾选后，我们将限制其他用户的复制操作，并给予提醒 \x3c/p\x3e\x3cp class\x3d"copyright-demo-helper-btn"\x3e 查看演示 \x3c/p\x3e\x3c/div\x3e'),b=new z.Px({I:"data-copyright-demo"});b.er=250;b.pp=750;b.ai(a[0]);b.g("trigger",function(a){b.setPosition(new z.xx(a.anchor,4))});var c=null;(0,window.$)(".copyright-demo-helper-btn").click(function(){c||(c=YK(),$K());
b.F(!1);WK(c.sF,0);var a=c.sF;a.bF=!0;a.delay=3E3;XK(a);c.dialog.F(!0)})};var $K=function(a){a=void 0===a?aL:a;if("number"===typeof a){aL=a;var b=void 0,c,d;switch(a){case 0:c="勾选后，我们将限制其他用户的复制操作，并给予提醒";d="复制将受限，同时会弹出提醒";b="保留所有权利，禁止转载";break;case 2:c="选择后，我们将在其他用户复制时给予提醒",d="系统会弹出提醒",b="如需转载，请点击文末的申请转载按钮"}(0,window.$)(".copyright-demo-helper-intro").text(c);(0,window.$)(".copyright-demo-effect").text(d);(0,window.$)(".copyright-demo-noty .tooltip-inner").text(b)}};
var bL=function(a,b){z.Pv.call(this,!1);this.xb=!!a;this.OM=b;this.fc="\x26nbsp";this.Cx=z.jm||z.Y[4];this.rw=this.Jy=this.ZG=this.enabled=!0;if(z.Y.Sd||!z.Y.jb())this.eB='\x3cspan style\x3d"font-style: normal;color: #999;"\x3e写回答…\x3c/span\x3e'};var cL=function(a,b){b?dL(a,b,"添加话题经验，提升回答可信度"):dL(a,"","填写话题经验，提升回答可信度")};var eL=function(a,b){b?dL(a,b,"修改话题经验"):dL(a,"","填写话题经验，提升回答可信度")};
var dL=function(a,b,c){b=void 0===b?"":b;c=void 0===c?"修改":c;a.iu&&(b&&(b=z.Ma("，"+ZI(b.trim()))),a.kF.innerHTML=b+'\x3ca name\x3d"edit_bio" class\x3d"zu-edit-button" href\x3d"#"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e'+c+"\x3c/a\x3e")};
var fL=function(a){if(z.X.uc&&!window.localStorage.getItem("no_more_org_question_rule"))(0,window.$)(a.m()).one("focus",".zm-editable-editor-field-element",function(){z.T({title:"机构提问规则",content:'\n          \x3cdiv class\x3d"zh-question-answer-form-orgRule"\x3e\n            \x3cp\x3e这是一个「机构提问」，请在回答前了解以下规则：\x3c/p\x3e\n            \x3col\x3e\n              \x3cli\x3e提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。\x3c/li\x3e\n              \x3cli\x3e「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。\x3c/li\x3e\n              \x3cli\x3e提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。\x3c/li\x3e\n            \x3c/ol\x3e\n            \x3ca class\x3d"knowMore" href\x3d"/org-intro#org-question" target\x3d"_blank"\x3e了解更多\x3c/a\x3e\n          \x3c/div\x3e',modal:!0,
ga:!0,buttons:{yes:"知道了",cancel:"不再显示"}},function(a){a||window.localStorage.setItem("no_more_org_question_rule",!0)})})};var gL=function(a,b,c){b=(0,window.$)(b);(0,window.$)(a.oc).hide();c=(0,window.$)(c);(0,window.$)(a.Xj).append(b).after(c);(z.$h||a.Zd)&&b.addClass("activate-mask-tip-answer-simple");a=z.Dq(z.r,!0,"#draft");b.on("click",a);c.on("click",a)};
var hL=function(a){a.ol?a.ol.show():(a.ol=(0,window.$)('\x3cdiv class\x3d"question-tip-box-bottom"\x3e确定想要回答你自己提出的问题吗？\x3cbr\x3e如果需要对问题做出更多的解释和说明，请编辑问题描述。 如果需要对其他回答做出回应，请在相应回答下通过评论发布。\x3cbr\x3e\x3cdiv class\x3d"zg-clear"\x3e\x3ca href\x3d"javascript:" class\x3d"zg-right zg-btn zg-btn-blue" name\x3d"confirm"\x3e确定\x3c/a\x3e\x3ca href\x3d"javascript:" class\x3d"zg-right zg-link-gray " name\x3d"cancel"\x3e取消\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e'),a.ol.on("click",'[name\x3d"cancel"]',function(){a.ol.hide()}).on("click",
'[name\x3d"confirm"]',function(){a.ol.hide();(0,window.$)(a.mc).hide();a.gb(!0);a.Xg()}),(0,window.$)(a.mc).after(a.ol))};var iL=function(a){var b=(0,window.$)("input[name\x3danno-checkbox]",a.oc)[0],c=(0,window.$)("label",a.oc)[0];a.eo=b;z.X.xb&&(a.eo.checked=!0);z.fo(c,!0)};
var jL=function(a){var b=(0,window.$)(".demo-trigger",a.oc);if(b.length){var c=Number(a.Ls.value);switch(c){case 1:b.attr("hidden","");break;default:$K(c)}(0,window.$)(a.Ls).on("change",function(d){d=Number(d.target.value);2!==d||z.Y.DA?(1===d?b.attr("hidden",""):(b.removeAttr("hidden"),$K(d)),c=d):(a.Ls.value=c,window.open("/copyright/invite","copyright_invite"))})}};
var kL=function(a){var b=GK();a.Dx||(IK(b),a.o().g(b,"change",a.yB).g(b,"trackRequested",function(a){a.label="add_answer_box_edit_topic_experience";z.ui(a)}));a.Dx=!0;KK(b)};var lL=function(a,b){z.Q.call(this);this.mX=a;this.UE=b};var mL=function(a,b,c,d,f){z.Pv.call(this,d,b,c);this.qa=a;this.KI=this.Oq=!1;this.zW=f};var nL=function(a,b){a.KI=b};
var oL=function(){var a=z.M("select",{style:"1px solid #999 "}),b=z.M("option",{value:"none"},"请选择一个修改理由...");a.appendChild(b);z.A(pL,function(b,d){var f=z.M("option",{value:b.value},d+1+". "+b.label);a.appendChild(f)});return a};var qL=function(a,b,c){a.BJ.innerHTML=b;z.S.set(a.BJ,c||"zg-error-text")};var rL=function(){z.Q.call(this)};var sL=function(){z.R.call(this);this.Fe(!0);this.F(!0)};
var tL=function(a,b){a.La("提问无人问津？");a.aa(b);a.ga();(0,window.$)(".js-gonext",a.h).on("click",function(){var b=(0,window.$)(this).parents('[class^\x3d"view"]').attr("class");"view-starting"===b?(a.La("第一条"),uL(a,"firsttip")):"view-firsttip"===b?(a.La("第二条"),uL(a,"secondtip")):"view-secondtip"===b?(a.La("第三条"),uL(a,"thirdtip")):"view-thirdtip"===b&&a.F(!1)})};var vL=function(a,b){a.La("邀请回答小窍门");a.aa(b);a.ga();(0,window.$)(".js-close",a.h).on("click",function(){a.F(!1)})};
var uL=function(a,b){(0,window.$)('[class^\x3d"view"]',a.h).hide();(0,window.$)(".view-"+b,a.h).show()};var wL=function(a){z.V.Ya(a,{module:"UserItem"},function(){return{card:{content:{type:"User",member_hash_id:(0,window.$)(a).find(".invite-button").data("uid")}}}})};var xL=function(a,b){z.V.trackCardShow(a,{},{search:{raw_query:(0,window.$)(b).find(".search-input").val()}})};
var yL=function(a,b){z.Q.call(this);this.lX=a;this.Eq=b;this.Y=null;this.vb=!1;this.Jm=null;this.yk=[];this.Kc=!1;this.BU="loading";this.yI="zg-btn-white"};var zL=function(a){var b=a.BU;a.H.addClass(b).html(AL);window.$.get("/node/QuestionInvitePanelV2",{params:{question_id:a.lX}}).done(function(c){a.Kc=!0;a.H.removeClass(b);c=(0,window.$)(c);a.H.replaceWith(c);a.h=c[0];c.toggle(a.pd());a.H=c;BL(a)})};
var BL=function(a){var b=a.m();a.o().g(z.sp,"anon_change",a.kV);(0,window.$)(".cancel-anon",b).click(window.$.proxy(a.DR,a));if(!(0,window.$)(".error-message",b).length){var c=z.L("search-input",b),d=z.L("invite-title",b);a.kA(c,d);a.Sn=(0,window.$)(".suggest-persons",b);a.Sn.on("click","button",window.$.proxy(a.DH,a));z.V.Ya(a.Sn[0],{module:"UserList"});(0,window.$)(".person",a.Sn).each(function(a,c){wL(c);"none"!==c.style.display&&xL(c,b)});(0,window.$)(".js-more",b).one("click",function(a){z.V.trackEvent(a.target,
{action:"LoadMore",element:"Button"});a=(0,window.$)('.person[style\x3d"display:none"]',this.Sn);a.each(function(a,c){"none"===c.style.display&&xL(c,b)});a.show();(0,window.$)(this).remove()});a.Nr=(0,window.$)(".invite-status",b);a.Nr.on("click","button",window.$.proxy(a.ER,a)).on("mouseenter mouseleave",".invited-shortlist",function(a){(0,window.$)(".invited-hovercard",this).toggleClass("in","mouseenter"===a.type)});CL(a)}};
var DL=function(a,b){var c=z.X;a.dispatchEvent(new z.WB("click!invitation",{category:"invitation",action:"ask_to_answer",label:b,value:c.HI?null:c.Te}))};var EL=function(a,b){return!!z.pb(a.yk,function(a){return a.id===b})};var FL=function(a,b,c){var d=(0,window.$)(".invite-button",a.Sn).filter(function(){return this.getAttribute("data-uid")===b}).get(0);d&&GL(a,d,c)};var GL=function(a,b,c){a=a.yI;c?(z.S.add(b,a),z.of(b,"收回邀请")):(z.S.remove(b,a),z.of(b,"邀请回答"))};
var CL=function(a){a.yk=window.$.map((0,window.$)(".invited-fulllist",a.Nr).children(),a.DK)};var HL=function(a,b){a.yk&&YI(a.yk,function(a){return a.id===b})&&IL(a)};var IL=function(a){var b=a.yk,c={each:z.A,fullList:function(){return(0,z.Zv)(JL,{persons:b,helper:c})}};b.length?a.Nr.html((0,z.Zv)(KL,{persons:b,helper:c,maxInvites:15})):a.Nr.html("你可以通过邀请其他用户来更快获得回答")};var LL=function(a){z.Q.call(this);this.data=a;this.Ja=null};
var ML=function(a){var b=z.L("panel-container",a.h);b&&(a.Rm=new rL,a.K(a.Rm),a.Rm.w(b),a.Ja=new z.tC(a.data.qa,"question"),a.Rm.K(a.Ja),z.xC(a.Ja,a.Rm.m(),(0,window.$)(".toggle-comment",a.h)[0]),a.Cp(),a.Fh(),NL(a))};var OL=function(a){if(!a.Gf){var b=z.L("zm-meta-panel",a.h);b&&(a.Gf=new z.qv(null,a.h)).w(b)}};
var NL=function(a){if("normal"===z.X.status){var b=new yL(a.data.qa,a.data.Ga);b.render(a.Rm.m());var c=(0,window.$)('a[name\x3d"invite"]',a.m());a.o().g(b,["expand","collapse"],function(a){c.text("expand"===a.type?"收起邀请":"邀请回答")});a.Rm.K(b);z.X.EY&&(b.Lc(!0),a.dispatchEvent(new z.WB("show!invitation",{category:"invitation",action:"ask_to_answer_card",label:""})));a.AA=b}};
var PL=function(a,b){var c=a.vO;c||(c=new z.EA,c.w(z.J("zh-question-admin-menu")),z.Ch(c,function(a){a.Da(a.m().getAttribute("data-action"))}),a.o().g(c,"action",function(a){a=this.BE=a.target;(new z.ZB).open(a.m(),{id:this.data.qa,type:"question"},(0,z.t)(this.SP,this))}),a.vO=c);c.W()?c.F(!1):z.FA(c,new z.oA(b,1,!0),0,new z.Gg(5,0,5,0))};
var QL=function(a){z.T.confirm("删除问题","你确定要删除这个问题吗？相关的评论也将被删除。",function(a){if(a){var c=new z.ep(!0);z.G(c,"complete",function(){var a=z.Dn(c);a&&!a.r?window.location.href="/":z.T.message(a.msg)});c.ajax("/question/delete/"+this.data.qa)}},a)};var RL=function(a){z.T.confirm("锁定问题","锁定后该问题将无法添加新的回答，你确认要锁定吗？",function(b){b&&window.$.post("/question/"+a.data.Ga+"/org_lock").then(function(a){a.r?z.T.message(a.msg):(z.T.message("操作成功！"),window.location.reload())})})};
var SL=function(a){z.T.confirm("解除锁定问题","你确认要解除锁定吗？",function(b){b&&window.$.post("/question/"+a.data.Ga+"/org_unlock").then(function(a){a.r?z.T.message(a.msg):(z.T.message("操作成功！"),window.location.reload())})})};var TL=function(a,b,c){z.Pv.call(this,a,b,c)};var UL=function(a){z.OD.call(this);z.Mb(this.options={},VL,a||{});this.qa=this.options.qa;this.ib=this.options.ib;this.ry=this.options.ry;this.vb=!0};
var WL=function(a){var b=z.L("zm-item-answer",a.h)||a.h;a.ib=b.getAttribute("data-aid");a.Sh="1"===b.getAttribute("data-isowner");a.Ga=b.getAttribute("data-atoken");a.Mp="1"===b.getAttribute("data-deleted");a.jy=Number(b.getAttribute("data-created"));b.getAttribute("data-helpful");a.ZT="1"===b.getAttribute("data-good");b.getAttribute("data-copyable");a.Wi="1"===b.getAttribute("data-collapsed");a.xb=null};
var XL=function(a){if(!a.Se&&a.Sh&&z.X&&a.ib){a.Se=new TL(!1,"/answer/content","content");z.Ac(a,a.Se);a.Se.rw=!0;a.Se.Jy=!0;a.Se.mH=bL.prototype.mH;var b=z.L("zm-item-rich-text",a.h);vI(a.Se,["id\x3d"+a.qa]);a.Se.w(b);a.o().g(a.Se,"shouldUpdateContent",function(a){if(z.ma(a.data))return!1});a.o().g(a.h,"click",function(a){"suggest_edit"===a.target.name&&(this.Se.Xg(),(0,window.$)(".zh-question-censor-tip",this.h).hide());return!0})}};
var YL=function(a){window.$.post("/answer/unremove",{aid:a.ib}).then(function(){a.Mp=!1;z.P(a.h,!0);a.Zw="cancel_delete";a.dispatchEvent("change");XL(a)})};var ZL=function(){z.Q.call(this);this.data=z.X||{};this.qa=this.data.qa;this.Sp=!1;this.vi={};this.tx=[];this.gs=[];this.$i=0;this.Lk=z.km&&z.km.url_token?z.km:null;this.Hy=(0,window.$)("#zh-question-title").data("editable")};
var $L=function(){var a=z.be(window.location.href,"oauthsuccess");if(a&&"wechat"===a&&z.lj&&z.Y.jb()){z.Hk=Object.assign({},z.Hk,{link:""+window.location.origin+window.location.pathname});window.history.pushState({},"",""+window.location.origin+window.location.pathname);var b=(0,window.$)(".oauth-success-template--"+a);if(b.length){var c=(0,window.$)(b.html()),d="oauth-success--"+a+"--open";(0,window.$)("body").append(c);window.setTimeout(function(){c.addClass(d)},0);c.one("click",function(){c.removeClass(d)});
window.setTimeout(function(){c.removeClass(d)},5E3)}}};var aM=function(a){z.Y.Uh&&window.$.post("/question/popup",{action:"no_answer",question_token:a.data.Ga},function(a){a&&tL(new sL,a)})};
var bM=function(a){(0,window.$)(".js-ignore-invite").click(function(){(0,window.$)(".question-invited-by").hide();window.$.post("/question/askpeople",{qid:a.data.Ga,uid:z.Y.be,op:"pass"})});(0,window.$)(".js-invite-others").click(window.$.proxy(function(){var a=(0,window.$)('#zh-question-meta-wrap a[name\x3d"invite"]')[0];a&&(z.Hr(a,{OD:function(){return!1},rx:!0}),this.tv.AA.Lc(!0))},a))};
var cM=function(a){"close"===z.X.status||z.X.Np||(a.Ma=new z.tt(a.data.In,a.data.qa),a.Ma.bq=5,a.Ma.Mu=1,a.Ma.FE=!0,a.Ma.Ru=!0,a.Ma.w(z.L("zm-tag-editor",a.h)),a.o().g(a.Ma,["remove_tag","add_tag"],function(){z.U.Bb("ga_edit_question_topic_changed")}),a.o().g(a.Ma,"start_editing",function(){z.U.Bb("ga_question_topic_edit_finish_changed")}),a.Ma.addEventListener("beforeedit",z.zE({Gq:!0})))};
var dM=function(a){var b=z.J("zh-question-title");z.X.Np?b.children[0].appendChild(z.Ye('\x3ca class\x3d"Button Button--text QuestionPage-titleButton" href\x3d"/question/24501563" target\x3d"_blank" data-tooltip\x3d"s$t$该问题已被锁定公共编辑"\x3e\x3cspan class\x3d"sprite-global-icon-lock"\x3e\x3c/span\x3e\x3c/a\x3e')):(a.ud=new mL(a.data.qa,"/question/title","content",!1,!0),a.ud.lG=!0,a.ud.Zd=!0,a.ud.Oq=!0,nL(a.ud,QI(a.data.Uh)),a.ud.w(b),a.o().g(a.ud,"change",function(){z.sp.dispatchEvent("question_title_change");
window.document.title=this.ud.cb()+" - 知乎"}),a.o().g(a.ud,"click_edit",function(){z.U.Bb("ga_question_title_edit_start")}),a.o().g(a.ud,"cancel_edit",function(){z.U.Bb("ga_question_title_edit_cancel")}),a.o().g(a.ud,"save_changed",function(){z.U.Bb("ga_question_title_edit_save_changed")}),a.o().g(a.ud,"save_unchanged",function(){z.U.Bb("ga_question_title_edit_save_unchanged")}),a.ud.addEventListener("beforeedit",z.zE({Gq:!0})))};
var eM=function(a,b){var c=z.J("zh-question-detail");if(c){var d=new z.yD({LF:"zm-editable-content"});a.o().g(d,"expand",b).g(d,"invalid",b);d.w(c)}};var fM=function(a){a.HF&&(a.data.Ds=+a.HF.innerHTML,z.Y.jb()||(a.data.Ds=0),z.P(a.Di,0<a.data.Ds),a.hs&&z.of(a.hs,a.data.Te?a.data.Te+" 个回答":"还没有回答"),a.Bn&&z.P(a.Bn,1<a.data.Te),z.P(a.Di,0<a.data.Ds))};
var gM=function(a){var b=z.J("zh-question-answer-wrap");if(b){var c=!Boolean((0,window.$)(".question-page-pager").length),d=void 0;if(c){var f={},d=new z.El({use:[],bg:a.data.Te>a.data.LW});d.use("nodeSource",{filter:function(a){var b=/data-atoken=\"(.*?)\"/;return a.filter(function(a){a=b.exec(a)[1];return f[a]?!1:f[a]=!0})}});(0,window.$)(".zm-item-answer").each(function(a,b){f[(0,window.$)(b).attr("data-atoken")]=!0})}else d=new z.El({use:[],bg:!1});a.jf=d;a.K(d);a.o().g(d,"itemcreated",function(b){d.K(hM(a,
b.item))});d.w(b);c&&(b=d.Hg(),d.use("expandLimit"),"#draft"===window.location.hash&&b.done(function(){iM(a,a.bb.m());a.bb.Ig.focus();var b=window.getSelection(),c=window.document.createRange();c.selectNodeContents(a.bb.Ig);c.collapse(!1);b.removeAllRanges();b.addRange(c)}))}};
var hM=function(a,b,c){var d=new UL({qa:a.qa});d.yb(a);d.w(b);a.vi[d.ib]=d;a.gs.push(d.ib);a.o().g(d,"change",a.xB);d.Sh&&(a.$i=d.ib,d.$O=z.Y,a.o().g(d.Se,"change",a.yS),a.ti=d);d.Wi?d.Sh&&a.vo.appendChild(d.m()):a.tx.push({added_time:d.jy,vote:c,aid:d.ib});d.Mp&&z.P(d.m(),!1);return d};
var jM=function(a){var b=null,c=null,d,f={suggest:"建议修改",evaluate:"建议修改",close:"关闭"};z.gm.ne||"normal"===z.X.status||(c="被"+f[z.X.status]+'的问题不允许添加新的回答。\x3ca data-tooltip\x3d"s$b$为什么部分问题会被「关闭」「建议修改」？" href\x3d"//www.zhihu.com/question/21290061"\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark"\x3e\x3c/i\x3e\x3c/a\x3e');a.$i?(d=a.vi[a.$i],b="#answer-"+d.ib,d=d.Mp):a.Lk&&(b="/question/"+z.X.Ga+"/answer/"+a.Lk.url_token,d=a.Lk.is_delete);b&&(c=d?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':
'一个问题你只能回答一次，但你可以对 \x3ca href\x3d"'+b+'"\x3e现有的回答\x3c/a\x3e 进行修改');!z.Y.Uh||a.$i||a.Lk||(c='添加回答：\x3ca href\x3d"javascript:;" name\x3d"answer_my_question"\x3e回答自己的提问\x3c/a\x3e');a.data.HA&&(c='该问题目前已经被锁定，无法添加新答案。\x3ca href\x3d"/question/19604313" target\x3d"_blank"\x3e问题为什么会被锁定？\x3c/a\x3e');c&&a.bb.gb(!1,c)};
var kM=function(a){a.hs=z.J("zh-question-answer-num");a.js=z.J("zh-question-answer-wrap");a.Di=z.J("zh-question-collapsed-link");a.vo=z.J("zh-question-collapsed-wrap");a.HF=z.J("zh-question-collapsed-num");a.SE=z.J("zh-question-answer-form-wrap");a.hl=z.J("zh-question-notification-summary");a.Bn=z.J("zh-answers-filter");a.uv=z.J("zh-add-question-sug");a.hs&&(a.data.Te=+a.hs.getAttribute("data-num"));a.js&&(a.data.LW=+a.js.getAttribute("data-pagesize"));a.Di&&a.o().g(a.Di,"click",a.UY);a.uv&&a.o().g(a.uv,
"click",a.AH);a.Bn&&z.Im&&a.o().g(a.Bn,"click",function(a){a.stopPropagation();z.S.add(this.Bn,"activated");this.o().ta(window.document,"click",function(){z.S.remove(this.Bn,"activated")})})};var lM=function(a,b){var c=z.J("zh-question-collapsed-switcher");b?(c.name="collap",a.GF=!0,z.P(a.vo,!0),z.S.add(a.Di,"zu-question-collap-title-active")):(a.GF=!1,c.name="expand",z.P(a.vo,!1),z.S.remove(a.Di,"zu-question-collap-title-active"))};
var mM=function(a){a.NP=!0;var b=a.vo,c=window.$.get("/node/QuestionCollapsedAnswerListV2",{params:{question_id:a.data.qa}});c.done(function(c){c=z.Ye(c);lM(a,!0);z.S.remove(b,"zm-question-collapsed-list-loading");b.appendChild(c);z.A(z.gf(b),function(b){b!==d&&hM(a,b,99999)})});var d=z.gf(b)[0];d&&(z.P(d,!1),c.done(function(){z.P(d,!0)}));z.P(b,!0);z.S.add(b,"zm-question-collapsed-list-loading")};
var nM=function(a){if(a.SE){a.bb=new bL(a.data.xb,z.Y);a.K(a.bb);a.bb.w(a.SE);z.gm.ne&&z.gm.ne.length?a.bb.aa(z.gm.ne[0]):!z.sm.fb&&z.B&&a.bb.aa("\x3cp\x3e\x3c/p\x3e");if(!(a.data.HA||a.$i||a.Lk&&a.Lk.url_token))if(a.data.ho&&a.data.ho.length&&a.data.ho[3]!==z.Y.be)a.bb.gb(!1,"只有 "+NI(a.data.ho)+" 能回答此问题");else if("normal"===z.X.status||z.gm.ne)z.Y.Uh||a.bb.Xg();a.o().g(a.bb,"change",a.iV);a.o().g(a.bb,oM,a.rV);a.bb.ready(function(){var a=this.qz();a&&"writing"===window.location.hash.slice(1)&&a.execCommand("toggleFullScreen")});
z.Y&&z.V.Ya(a.bb,{module:"AnswerEditView"},function(){return{card:{card_type:"Content",content:{type:"Answer",author_id:z.Y.be,parent_token:String(a.data.Ga)}}}})}};var pM=function(a,b){if(b=b||window.location.hash.slice(1)){var c=b.split("-"),d=c[1];"answer"===c[0]&&((c=a.eH(d))&&(c.Wi&&!a.GF?iM(a,a.Di):iM(a,c.m())),a.VK=d)}};
var iM=function(a,b){if(b){var c=z.fh(window.document.body).top,d=a.eT?z.Yg(a.hl).height:0,c={paddingTop:c+d};"number"===window.$.type(c)&&(c={offsetTop:c});c.OD=HI;z.Hr(b,c);z.rr(b);a.dk&&a.dk.Kn()}};var qM=function(){ZL.call(this);this.data=z.X;this.qa=this.data.qa};var rM=function(a){var b=(0,window.$)(".awesome-answer-list").get(0);if(b){var c=new z.El({use:["expandLimit"],bg:!1});a.K(c);a.o().g(c,"itemcreated",function(a){var b=new z.OD;b.w(a.item);c.K(b)});c.w(b)}};
var sM=function(){var a=(0,window.$)("#react-answer-warrants");a.length&&z.$w("AnswerWarrant").then(function(b){return b.renderList(a)})};
var tM=function(a){var b=z.L("zm-item-answer",z.J("zh-question-answer-wrap"));if(b){a.Ib=new UL({qa:a.qa,oG:!0});a.K(a.Ib);a.Ib.w(b);b=a.o();b.g(a.Ib,"change",a.xB);if(a.Ib.Sh){b.g(z.sp,"anon_change",function(a){uM(this,a.xb)});var c=a.Ib.Se;c&&b.g(c,"change",function(){var a=(0,z.ab)(c.cb()[0]),a=z.Ye(a);z.Bo(a,this.Ib.h);this.Ib.dispose();tM(this)})}vM(a);a.Ib.iw();a.Ib.Ja.yx=!1;a.Ib.Ki=!1;a.Ib.aq()}};
var uM=function(a,b){var c=(0,window.$)("#js-sidebar-author-info");if(!(0,window.$)("a[name\x3dfocus]",c).length){var d={0:"fullname",1:"url_token",2:"avatar_path",3:"hash",4:"headline"},f=z.nb(z.Y,function(a,b,c){a[d[c]]=b;return a},{}),f=(0,z.Zv)(a.aP,{author:!b&&f});c.html(f)}};var wM=function(){var a=(0,window.$)("#zh-question-answer-collestions");a.length&&(0,window.$)("a[name\x3dfocus]",a).click(function(){(0,z.RG)(this,"favlist")})};
var vM=function(a){a.Ib?a.Ib.Mp?(a.Ys.innerHTML=a.Ib.Sh?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':"此答案已经被作者删除",z.P(a.Ib.m(),!1)):z.P(a.Ib.m(),!0):a.Ys.innerHTML="此答案已经被作者删除"};var xM=function(a,b){this.cq=this.Af=1;this.an=b||4;this.items=a||[];this.xF=[];this.cq=Math.ceil(this.items.length/this.an)};var yM=function(a,b,c){b=(b-1)*a.an;return a.items.slice(b,b+c)};var zM=function(a){return yM(a,a.Af,a.an)};
var AM=function(a,b){var c=yM(a,a.Af+1,1)[0];if(a.kp()&&c){var d=a.remove(b);a.remove(c);a.items.splice(d,0,c);return c}};var BM=function(a){z.Q.apply(this,arguments)};var CM=function(a){var b=window.$.makeArray((0,window.$)("\x3cdiv\x3e").html(a.oN.html()).children().add(a.Za.children()));a.QB=new xM(b,DM);a.Or.on("click",function(){EM(a,a.Za.find("."+a.gz).length)})};
var FM=function(a){a.Za.on("click","[data-follow]",function(b){var c=(0,window.$)(b.target),d={id:c.data("id"),name:c.closest(".topic-item").find("h3 a").text(),U0:c.data("token")};c.hasClass(a.gz)?(b=(0,window.$)(b.target).closest(".topic-item"),a.QB.remove(b[0]),1===a.Za.find("."+a.gz).length&&(a.Or.hasClass("disabled")?a.ub.fadeOut():(0,window.setTimeout)(function(){EM(a,0)})),a.dispatchEvent({type:GM,data:d})):c.hasClass(a.yZ)&&a.dispatchEvent({type:HM,data:d})})};
var EM=function(a,b){a.Or.hasClass("disabled")||(a.QB.random(b)||(a.Or.addClass("disabled"),a.ub.find(".hidden-topics-plaza").show()),a.Za.html(zM(a.QB)))};var IM=function(a){z.Q.apply(this,arguments)};
var JM=function(a){a.o().g(window,"hashchange",a.PH);a.PH({data:!0});a.ub.on("click",".zm-topic-cat-more a",function(){var b=a.ni.find(KM).length;window.$.get("/followed_topics",{offset:b,limit:LM-b},function(b){b.payload.length&&(b=b.payload.map(function(b){return MM(a,b)}).join(""),a.ni.append(b));a.ni.find(".zm-topic-cat-more").remove();+(0,window.$)(".topic-feed-title .follow-topics-count").text()>LM&&a.ni.append('\x3cli class\x3d"zm-topic-cat-more js-topic-all"\x3e\x3ca target\x3d"_blank" class\x3d"zg-link-gray" href\x3d"'+
(0,window.$)(".topic-feed-title a").attr("href")+'"\x3e查看全部\x3c/a\x3e\x3c/li\x3e')})})};var NM=function(a){a.Lr.on("click","a",function(b){(0,window.$)(b.currentTarget).hasClass("current")||(a.Lr.find("a").removeClass(OM),(0,window.$)(b.currentTarget).addClass(OM),PM(a))})};var QM=function(a,b){var c=a.ub.find(".no-topics"),d=a.ub.find(".topic-feed-title a"),f=d.find("span"),g=+f.text();(g+=b)?(d.show(),c.hide()):(d.hide(),c.show());f.html(g);a.WT&&RM(a,g)};
var RM=function(a,b){a.Nw||(a.Nw=(0,window.$)('\x3ca href\x3d"#" class\x3d"new-follow-topics"\x3e新关注 \x3cspan\x3e'+b+"\x3c/span\x3e 个话题，点击查看\x3c/a\x3e"),a.Nw.insertBefore(".topic-recommend").click(function(a){a.preventDefault();window.location.reload()}));a.Nw[b?"show":"hide"]().find("span").html(b)};var SM=function(a,b){return a.filter(function(a,d){return(0,window.$)(d).text()===b})};
var TM=function(a){a.jf&&(a.removeChild(a.jf),a.jf.dispose(),a.jf=null);var b=a.Za,c=new z.El({use:["autoload"]});a.K(c);c.use("nodeSource",{offset:function(){return Number(b.find(".feed-item").last().data("score"))||0}});c.use("childConstructor",{factory:z.gE}).use("expandLimit");c.w(b.get(0));a.o().g(c,"next",a.KE);a.jf=c};
var PM=function(a,b){var c=a.Lr.find(".current").data("feedType"),c={params:{topic_id:b,feed_type:c}},d=a.Za.data("init");window.$.extend(!0,d,c);a.Za.attr("data-init",JSON.stringify(d));a.Za.empty();a.jf.Qp()&&TM(a);a.jf.nh();a.bB=a.jf.Hg()};
var UM=function(a,b,c){a.cB&&"pending"===a.cB.state()&&a.cB.abort();a.cB=window.$.get("/node/TopicAvatarV2",{params:{topic_id:b,avatar_type:"topic"}},function(b){if(b&&b.r)z.T.message("错误");else{var f=c.data("href");a.Tn.find(".js-topic-title-avatar").html(b).attr("href",f);a.Tn.find(".js-topic-title-name").text(c.text()).attr("href",f);a.Tn.show()}})};var MM=function(a,b){a.pM||(a.pM=(0,z.Zv)(VM));return a.pM(b)};var WM=function(){z.Q.call(this)};var XM=function(){z.Q.call(this);this.fY=z.tm.searchKeyword};
var YM=function(){var a=(0,window.$)("#js-search-question-form");a.length&&a.submit(function(b){b.preventDefault();b=z.Tv.ba();b.show();z.Uv(b,(0,window.$)(".title-input",a).val())})};var ZM=function(a){var b=(0,window.encodeURIComponent)(a.fY);(0,window.$)("ul.list[data-paging]").on("click",".item a[href!\x3d#]",function(a){a=a.currentTarget;a.host&&(a=(0,window.$)(a).closest(".item").index()+1,z.Ai.set("s-q",b),z.Ai.set("s-i",a),z.Ai.set("sid",(0,z.kG)()))})};
var $M=function(a){function b(a,b){var h=(0,window.$)(a);window.$.each(b(),function(a,b){h.on("click",a,function(a){d.apply(null,c(b,a))})})}function c(a,b){return z.mb(a,function(a){return z.qa(a)?a(b):a})}var d=z.Ba(z.W,"search");b(".related-topics",function(){return{"a.avatar-link":["visit_topic","search_result_card_topic_avatar"],"a.name-link":["visit_topic","search_result_card_topic"],"a[href$\x3dquestions]":["visit_topic_questions","search_result_card_topic"],"a[href$\x3dtop-answers]":["visit_topic_topanswers",
"search_result_card_topic"],"a[href$\x3dfollowers]":["visit_topic_followers","search_result_card_topic"],"button.zg-btn-follow":["click_follow_topic","search_result_card_topic"],"button.zg-btn-unfollow":["click_unfollow_topic","search_result_card_topic"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_topic"]}});b(".related-users",function(){return{"a.avatar-link":["visit_people_profile","search_result_card_people_avatar"],"a.name-link":["visit_people_profile","search_result_card_people"],
"a[href$\x3danswers]":["visit_people_answers","search_result_card_people"],"a[href$\x3dfollowers]":["visit_people_followers","search_result_card_people"],"a[href$\x3dposts]":["visit_people_posts","search_result_card_people"],"button.zg-btn-follow":["click_follow_people","search_result_card_people"],"button.zg-btn-unfollow":["click_unfollow_people","search_result_card_people"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_people"]}});b(window.document.body,function(){var a=
z.Ba(z.Ja,"search_result_%s_more_button");return{"ul.list.contents + .zu-button-more":["click_search_result_more",a("all")],"ul.list.users + .zu-button-more":["click_search_result_more",a("user")],"ul.list.topics + .zu-button-more":["click_search_result_more",a("topic")]}});b(".search-tabs",function(){var a=z.Ba(z.Ja,"search_result_tab_%s");return{'a[href^\x3d"/search?type\x3dquestion"]':["click_search_result_tab",a("all")],'a[href^\x3d"/search?type\x3dpeople"]':["click_search_result_tab",a("user")],
'a[href^\x3d"/search?type\x3dtopic"]':["click_search_result_tab",a("topic")]}});b(".secondary-tabs",function(){return{'a:not([href*\x3d"sort\x3dupvote"])':["click_search_result_relatrank"],'a[href*\x3d"sort\x3dupvote"]':["click_search_result_agreerank"]}});b(".range-selector",function(){var a=z.Ba(z.Ja,"search_result_range_%s");return{'a[href*\x3d"range\x3d1d"]':["click_search_result_range",a("1d")],'a[href*\x3d"range\x3d1w"]':["click_search_result_range",a("1w")],'a[href*\x3d"range\x3d3m"]':["click_search_result_range",
a("3m")]}});b("ul.list.contents",function(){function a(){return function(a){return"search_result_all_list_"+((0,window.$)(a.target).closest(".item").index()+1)+""}}return{".js-title-link":["visit_question",a()],".js-expand, .summary":["click_expand",a()],".js-collapse":["click_collapse_answer",a()],"a.zg-follow":["click_follow_question",a()],"a.zg-unfollow":["click_unfollow_question",a()]}});b("ul.list.users",function(){function a(b){return function(a){return"search_result_user_list_"+((0,window.$)(a.target).closest(".item").index()+
1)+(b||"")}}return{"a.avatar-link":["visit_people_profile",a("_avatar")],"a.name-link":["visit_people_profile",a()],"a[href$\x3danswers]":["visit_people_answers",a()],"a[href$\x3dfollowers]":["visit_people_followers",a()],"a[href$\x3dposts]":["visit_people_posts",a()],"button.zg-btn-follow":["click_follow_people",a()],"button.zg-btn-unfollow":["click_unfollow_people",a()]}});b("ul.list.topics",function(){function a(b){return function(a){return"search_result_topic_list_"+((0,window.$)(a.target).closest(".item").index()+
1)+(b||"")}}return{"a.avatar-link":["visit_topic",a("_avatar")],"a.name-link":["visit_topic",a()],"a[href$\x3dquestions]":["visit_topic_questions",a()],"a[href$\x3dfollowers]":["visit_topic_followers",a()],"button.zg-btn-follow":["click_follow_topic",a()],"button.zg-btn-unfollow":["click_unfollow_topic",a()]}});a.o().g(a,"click!",function(a){"comment"===a.namespace&&a.Oc.fill("category","search").fill("label","search_result_answer")})};
var aN=function(){var a=z.xj(window.location.href).Ed().get("q");return{raw_query:a,restrict_type:{people:"User",topic:"Topic"}[a]}};var bN=function(){z.H.call(this);this.aA=[];this.ia=[]};var cN=function(a){for(var b=[],c=0;3>c;c++){var d=a.ia.shift();d&&b.push(d)}3===b.length?(a.Fu.innerHTML=b.join(""),dN(a)):eN(a)};var dN=function(a){var b=z.Co("suggest-item",a.Fu);z.A(b,function(a){this.aA.push(a.id.split("-")[1])},a)};
var eN=function(a){a.Fu.innerHTML='\x3cimg class\x3d"bubble-loading" src\x3d"'+z.sm.bD+'/img/noti-loading.gif"\x3e';window.$.post("/lookup/suggest_member",{ids:a.aA.join(",")}).done((0,z.t)(a.uV,a))};var fN=function(a){z.Q.apply(this,arguments)};var gN=function(a){var b={};(0,window.$)("meta",a).each(function(){var a=(0,window.$)(this);b[a.attr("name")]=a.attr("content")});return b};var hN=function(a){fN.apply(this,arguments)};
var iN=function(a){var b=(0,window.$)(a.m()),c=(0,window.$)(".js-list",b),d=(0,window.$)(".js-hidden-list",b),f=(0,window.$)(".pager",b),g=window.$.makeArray((0,window.$)("\x3cdiv\x3e").html(d.html()).children().add(c.children())),h=new xM(g,4);h.Vc(function(a){f.find(".next").toggleClass("disabled",!a.kp);f.find(".prev").toggleClass("disabled",!a.Tt)});(0,window.$)(".pager",b).on("click",".next:not(.disabled)",function(){h.next();c.html(zM(h))}).on("click",".prev:not(.disabled)",function(){h.prev();
c.html(zM(h))});var g=(0,window.$)(g),k=window.innerWidth/100,l=c.children().length,n=b.find(".items"),q=45.5*k-16.3+8;z.sm.fb&&n.outerWidth(q*l-7);b.on("click",".js-ignore",function(b){var c=(0,window.$)(b.target).closest(".item");window.$.post("/actioncard/uninterest",{type:a.Fj,token:c.data("token"),reason:c.data("reason")});var d=AM(h,c[0]),f=c.siblings().length;if(0===f&&!d)return a.dispatchEvent("Ignore");c.fadeOut(function(){return d?c.replaceWith(d):c.remove()});z.sm.fb&&n.outerWidth(q*f-
7);z.V.trackEvent(b.target,{action:"Ignore",element:"Button"})});var v=(b="suggested_members"===a.Fj)?"UserItem":"TopicItem",F=b?"User":"Topic",K="suggested_members"===a.Fj?"suggestedUsers":z.db(a.Fj,"_").replace("_","");g.each(function(a,b){return z.V.Ya(b,{module:v,index:""},function(){return{card:{card_type:K,content:{type:F,token:String((0,window.$)(b).data("token"))}}}})});a.tH=function(){return{list:{list_size:c.find(".item").length,new_item_size:d.find(".item").length}}}};
var jN=function(a){a=a.content_type;z.iD.call(this,{question:"question",article:"post",promotion:"promotion"}[a]||a);this.Ki=!1};
var kN=function(a){for(var b=a.m(),c=[{value:"close",label:"不感兴趣",Of:a.Kb.bind(a)},{value:"agreement",label:"知乎广告介绍",Of:a.sW}],d=new z.Xz,c=z.ha(c),f=c.next();!f.done;f=c.next())f=f.value,f=new z.Sz(f.label,f),d.Ia(f);b=(0,window.$)(".AdFeed-menuBtn",b)[0];c=new z.vA("ad",d);c.Hk.yf=7;c.Sb=z.Hl;c.w(b);z.Ac(c,a);z.V.Ya(d,{module:"AdMenu"},function(){return{card:{card_type:"Content",content:a.Vo()}}});a.o().g(d,"action",function(a){a=a.target;a.X().Of(a)})};var lN=function(){z.iD.call(this,"roundtable")};
var mN=function(a,b){z.Q.call(this);this.pE=a;this.QQ=b};
var nN=function(a,b){var c=(0,window.$)('meta[itemprop\x3d"ZReactor"]',b);c.length||(c=(0,window.$)(a.h).closest(".feed-item").find('meta[itemprop\x3d"ZReactor"]'));var d=(0,window.$)(".feed-source [data-timestamp]",b).data("timestamp"),c=c.data("meta");if(!c)return null;var f=c.source_type.split("_"),g=function(a){a=a[0];return"promotion"===a?null:{member:"User",topic:"Topic",column:"Column",roundtable:"Roundtable",favorites:"Collection"}[a]}(f),d={actor_type:g,action_type:function(a){var b=a[a.length-
2];return"topic"===a[0]&&"popular"===b?"Follow":{answer:"Publish",ask:"Publish",create:"Publish",follow:"Follow",voteup:"Upvote",publish:"Publish",join:"Join",acknowledged:"Upvote",popular:"Upvote",warmingup:"Recommend","new":"Publish",add:"Publish",promotion:"Recommend",collect:"Collect"}[b]}(f),action_timestamp:d};"User"===g?d.actor_member_hash_id=c.source.filter(function(a){return"member"===a[0]}).map(function(a){return a[1]}):d.actor_id=c.source.filter(function(a){return a[0]===f[0]}).map(function(a){return String(a[1])});
return d};var oN=function(a,b){if(a.pE){var c=a.Ec=new a.pE(a.QQ),d=z.L("feed-content",b)||z.L("feed-main",b);a.K(c);a.Ki&&(c.Ki=!0);d&&c.w(d);c.nf&&c.Kb&&z.pl(c.nf.register("i g",function(){return c.Kb()}),{group:"操作",name:"不感兴趣"});a.o().g(c,"Ignore",function(){(0,window.$)(b).slideUp(function(){a.dispose();(0,window.$)(b).remove()})})}};
var pN=function(a){var b=(0,window.$)(a);a=b.data("type");b=b.data("extra-options");return new mN({ac:hN,ad:jN,p:z.WD,a:z.OD,q:z.YD,r:lN,c:z.aE,l:z.ZD,f:z.$D,e:z.bE,pin:z.dE,eventcard:z.fE}[a]||z.Q,b)};var qN=function(a){rN||(this.Oo=a,this.mi=(0,window.$)(this.Oo.m()),(0,window.setTimeout)((0,z.t)(this.tc,this)))};var sN=function(a){(0,window.setTimeout)(function(){window.$.ajax({type:"POST",url:"/zreactor/deliver",data:JSON.stringify(a),contentType:"application/json",processData:!1})},50)};
var tN=function(a){var b=uN[a.mi.data("type")];AI(a.mi[0],function(){vN(a,"display")},a.Oo);a.Oo.o().g(a.Oo,"expand",function(c){c.target instanceof z.iD&&vN(a,"expand_"+b)}).g(a.Oo,"collapse",function(c){c.target instanceof z.iD&&vN(a,"collapse_"+b)});a.mi.on("click",".js-noHelp",function(){var b=!!(0,window.$)(this).data("revert");vN(a,b?"unhelpful":"revert_unhelpful");(0,window.$)(this).data("revert",!b)});window.$.each({".actioncard-body .more":"view_all",".actioncard-body .next:not(.disabled)":"next_page",
".actioncard-body .prev:not(.disabled)":"prev_page",".actioncard-body .items a":"open_topic",".js-validate, .js-headline-input, .js-choose-image":"open_form",'.zg-follow[data-follow^\x3d"t:"], .zg-btn-follow[data-follow^\x3d"t:"]':"follow_topic",'.zg-unfollow[data-follow^\x3d"t:"], .zg-btn-unfollow[data-follow^\x3d"t:"]':"unfollow_topic",'a.zg-follow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"follow_"+wN[b],'a.zg-unfollow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"unfollow_"+
wN[b],"a.js-toggleCommentBox":"expand_comments",'a[name\x3d"addnew"]':"comment",".feed-content h2 a":"open_"+xN[b],"a.ignore:not(.close)":"uninterest","a.revert":"revert_uninterest","a.ignore.close":"confirm_uninterest","button.up.pressed":"vote_up_"+b,"button.down.pressed":"vote_down_"+b,"button.up:not(.pressed)":"revert_vote_up_"+b,"button.down:not(.pressed)":"revert_vote_down_"+b,".js-collect":"collect_answer",".js-thank":"thanks",".js-share":"share",".js-report":"report",".js-write-answer":"open_write_answer",
"a.answer-date-link":"open_answer"},function(b,d){a.mi.on("click",b,function(){vN(a,d)})})};var vN=function(a,b){var c=window.$.extend({},yN(a),{action_type:b,time:(0,z.I)()});c.object_id&&("display"===b?a.XW(c):sN(c))};
var yN=function(a){var b=a.dE,c=window.$.extend({},b.data("meta"),{create:a.mi.find(".source .time").data("timestamp"),offset:(0,window.$)(".feed-item").index(a.mi)+1});return{mid:z.tm.ga_vars.user_hash,object_type:uN[a.mi.data("type")],object_id:b.data("id"),object_meta:c,context:zN,others:""}};var AN=function(a,b,c){z.tE.call(this,a,b,c);this.mJ=!0};var BN=function(){z.Q.call(this);this.gf=[];this.Jg=0;this.SI=!!(0,window.$)("#is-topstory").length;this.PG="feed-item-hook"};
var CN=function(a){var b=a.m(),c=a.fQ="/node/"+a.Ha.data("init").nodename,d=a.kq=new AN(b,c,!0);z.V.Ya(b,{module:a.SI?"TopStoryFeedList":"HomeFeedList"},function(){return{list:{list_size:d.nb().length,new_item_size:a.Jg||0}}});a.o().g(d,"itemcreated",function(a){this.gf.push(a.data.iU)}).g(d,"ignore",function(a){DN(this,a.key,a.value)});d.mj(a.PG);d.yb(a);d.init();if(a.Ha.data("delayed"))z.sp.on("guider2:topicselected",a.jW.bind(a))};var EN=function(a){a.Ha.on("click",".js-more-similar",function(){(0,window.$)(this).parent().slideUp("fast").nextUntil(":not(.hidden)").slideDown("fast")})};
var DN=function(a,b,c){a.gf.forEach(function(a){a.jd[b]===c&&(0,window.$)(a.h).fadeOut(150)})};var FN=function(a){a.Ha.on("click contextmenu","a",function(a){var c=a.currentTarget.href,d=c.includes("topic/"),c=c.includes("people/");if(d||c)if("click"!==a.type||a.ctrlKey||a.metaKey)c="",c="contextmenu"===a.type?"contextmenu":a.ctrlKey?"ctrl_click":"meta_click",z.ui({category:"open_link_in_new_tab",action:c,label:d?"topic":"people"})})};var GN=function(){this.interval=3E4};
var HN=function(a){a.he||(a.he=(0,window.setInterval)((0,z.t)(function(){IN()},a),a.interval))};var IN=function(){(0,window.$)(".feed-item-hook .time").each(function(){(0,window.$)(this).text(z.fj((0,window.$)(this).data("timestamp")))})};var JN=function(){};var KN=function(a){z.Q.call(this);this.config=window.$.extend(!0,{},{Aq:{},style:{},ic:{},Sy:{},Qe:void 0,fe:void 0,Jj:JN,ao:JN},a)};var LN=function(){};
var MN=function(a){z.Q.call(this);this.config=window.$.extend(!0,{},{state:"default",ap:"defaultGuide",className:"zh-guides",Ul:{},iF:LN,jx:LN,qv:[]},a);this.$o=[];this.init();this.render()};var NN=function(a){ON(a,"restart",{EI:!0,aM:function(){a.init();a.Vv()}})};var PN=function(a){QN(a);a.config.jx(a);ON(a,"done");a.H.trigger(RN.DONE)};
var SN=function(a,b){QN(a);var c;a:{var d=a.$o[b].config;c=d.interval;if(d.MA)c=!1;else{if(c&&(d=TN(a))&&(new Date).getTime()-d.date<c){c=!1;break a}c=!0}}c?(a.Zr=b,a.show(),a.$o[a.Zr].show(),ON(a,a.Hq&&"restart"===a.Hq.state?"restart-open":"open",{QI:!0})):a.NJ()};var QN=function(a){a.$o.forEach(function(a){a.hide()})};
var ON=function(a,b,c){c=void 0===c?{EI:!1,QI:!1,aM:LN}:c;var d=TN(a);if(!c.EI){var f="open done close restart restart-open forever nevershow".split(" ");d&&(b=f[Math.max(f.indexOf(a.config.state),f.indexOf(d.state),f.indexOf(b))])}b={index:a.Zr,state:b,date:d?c.QI?(new Date).getTime():d.date:(new Date).getTime()};JSON.stringify(b)!==JSON.stringify(d)&&(UN[a.config.ap]=b,window.$.ajax({url:"/settings/account/org",data:{guide:JSON.stringify(UN)},type:"PUT",success:c.aM}))};
var TN=function(a){var b=UN;return b&&b[a.config.ap]};var VN=function(a,b){var c=(0,window.$)(a),d=c.clone(!0).appendTo(b),f=c.offset(),c={width:c.width(),height:c.height()},f=Object.assign({position:"absolute","z-index":6},f,c);d.css(f);return d};var WN=function(a){return(0,window.$)('\n        \x3cdiv class\x3d"TryOpt"\x3e\n          \x3cdiv class\x3d"TryOpt-btnThumb"\x3e\x3c/div\x3e\n          \x3cdiv class\x3d"TryOpt-thumbArrow sprite-home-thumb-arrow"\x3e\x3c/div\x3e\n          \x3cdiv class\x3d"TryOpt-btnFollow sprite-home-btn-follow"\x3e\x3c/div\x3e\n        \x3c/div\x3e').appendTo(a)};
var XN=function(a){var b=(0,window.$)(".TryOpt",a);0===b.length&&(b=WN(a),(0,window.$)(".TryOpt-btnThumb",b).on("click",function(){(0,window.$)(a).trigger(RN.NEXT_GUIDE)}));b.css((0,window.$)("#zh-question-list").offset());return b};var YN=function(){z.Q.call(this);this.gR=new MN(ZN);this.iX=new MN($N);this.eY=new MN(aO)};var bO=function(){z.Q.call(this)};
var cO=function(){var a=(0,window.$)("#js-global-notify");if(a.length){var b=new z.jv;b.w(a[0]);wI(b);(0,window.$)(".zu-global-notify-close",a).click(function(){var c=(0,window.$)(this).data("id");window.$.post("/notice/read",{nid:c});b.dispose();a.remove()})}};
var dO=function(){(0,window.$)(".js-HomeEntry-ask").click(function(a){z.W("question_answer","click_add_question","Feed_above");z.V.trackEvent(a.target,{action:"Question",is_intent:!0});z.Dq(function(){z.Tv.ba().show()},!0,"#ask")()});(0,window.$)(".js-HomeEntry-answer").click(function(a){z.V.trackEvent(a.target,{action:"Answer",is_intent:!0})});(0,window.$)(".js-HomeEntry-post").click(function(a){z.W("feed","click_write_post","Feed_above");z.V.trackEvent(a.target,{action:"Post",is_intent:!0})})};
var eO=function(){z.Q.call(this)};var fO=function(){z.Q.call(this);this.Th="explore";this.SQ="explore_feed"};
var gO=function(a){var b=(0,window.$)("#js-explore-tab");if(b.length){var c=(0,window.$)(".tab-panel",b),d=(0,window.$)(".tab-nav",b),b=function(){var b={"daily-hot":0,"monthly-hot":1}[window.location.hash.slice(1)]||0;d.removeClass("active").eq(b).addClass("active");b=c.hide().eq(b).show().children("[data-type]");if(!b.data("inited")){b.data("inited",!0);var g={daily:nK,monthly:pK}[b.data("type")],g=new hO(g);g.use("expandLimit");a.K(g);g.w(b[0])}};a.o().g(window,"hashchange",b);b()}};
var iO=function(a){var b=(0,window.$)("#zh-recommend-list-full\x3e.zh-general-list")[0];if(b){var c=new z.El;c.use("nodeSource");c.use("childConstructor",{factory:z.gE});a.K(c);c.w(b)}};
var jO=function(){function a(a,b,c,d,l){c=(0,window.$)(c.target).closest(d,c.delegateTarget).index();z.xi(a,b,l,c+1)}var b=z.Ba(a,"view_answer","visit_answer"),c=z.Ba(a,"view_topic","visit_topic"),d=z.Ba(a,"view_roundtable","visit_roundtable");(0,window.$)("#zh-recommend").on("click","a.question_link",function(a){b(a,".feed-item","editor_recommendations_question_title")});(0,window.$)('div[data-type\x3d"daily"]').on("click","a.question_link",function(a){b(a,".feed-item","daily_trending_question_title")});
(0,window.$)('div[data-type\x3d"monthly"]').on("click","a.question_link",function(a){b(a,".feed-item","monthly_trending_question_title")});(0,window.$)("ul.hot-topics").on("click",'a[href*\x3d"topic"]',function(a){c(a,"li","explore_sidebar_trending_topics_name")});(0,window.$)("ul.hot-roundtables").on("click",'a[href*\x3d"roundtable"]',function(a){d(a,"li","explore_sidebar_trending_roundtable")});(0,window.$)("ul.hot-topics").on("click","img.avatar",function(a){c(a,"li","explore_sidebar_trending_topics_avatar")})};
var hO=function(a){z.zl.call(this,{source:kO(a),use:["autoload"]})};var kO=function(a){return function(){return a((0,window.$)(this.nb()).last().data("offset")).then(function(a){return{results:a}})}};var lO=function(a){z.Q.apply(this,arguments)};
var mO=function(a){var b=a.Vr;return function(){return(0,z.t)(function(a){var d=Array.from(b.children(".zm-tag-editor-edit-item").map(function(a,b){return(0,window.$)(b).find('a[name\x3d"remove"]').data("url-token")}));return a.filter(function(a){return d.every(function(b){return Number(b)!==Number(a[2])&&3<a.length})})},this)}};var nO=function(a,b,c){window.$.post("/node/QuestionExpertTopicsV2",{method:b,params:{url_token:c}}).then(function(){a.dispatchEvent(oO)})};
var pO=function(a){a.Vr.on("click",'a[name\x3d"remove"]',function(b){(0,window.$)(b.currentTarget).parent().remove();qO(a);nO(a,"delete_expert_topic",(0,window.$)(b.currentTarget).data("url-token"))})};var qO=function(a){var b=a.Vr.children(".zm-tag-editor-edit-item").length;b>=rO?(a.mE.hide(),a.Tw.show()):(a.mE.show(),a.Tw.hide());0===b?a.nE.show():a.nE.hide()};var sO=function(a){z.Q.apply(this,arguments)};
var tO=function(a){var b=(0,window.$)(".QuestionSuggestList .zh-general-list");b.length&&(a.jE=(0,window.$)(".QuestionSuggestListTitle"),a.kE=(0,window.$)(".QuestionSuggestList"),a.Tr=b,uO(a),vO(a),b.on("click",".question_link",function(){z.W("question_answer","click_visit_question_page","Questions_For_You")}))};
var uO=function(a){var b=(0,window.$)(".QuestionSuggestListTitle .js-feed-switcher");if(b.length)b.on("click","a",function(c){c=(0,window.$)(c.currentTarget);c.hasClass("current")||(b.find("a").removeClass("current"),c.addClass("current"),wO(a,c.data("feed-node")))})};
var wO=function(a,b){var c={params:{offset:0}};b&&(c.nodename=b);var d=a.Tr.data("init");window.$.extend(!0,d,c);a.Tr.attr("data-init",JSON.stringify(d));a.Tr.empty();a.En&&(a.removeChild(a.En),a.En.dispose(),a.En=null);c=a.Tr;d=new z.El({use:["autoload"]});a.K(d);d.use("nodeSource",{});d.w(c.get(0));a.En=d;a.En.nh();a.En.Hg()};var vO=function(a){var b=new lO;a.o().g(b,oO,function(){b.Vr.children(".zm-tag-editor-edit-item").length?(a.kE.show(),a.jE.show(),wO(a)):(a.kE.hide(),a.jE.hide())});b.w((0,window.$)(".MyTopicWrapper")[0])};
var xO=function(a){(0,window.$)(a.m()).on("click",'a[name\x3d"dislike"]',function(a){var c=(0,window.$)(a.currentTarget).closest(".feed-item");a=c.find('meta[itemprop\x3d"question-url-token"]').attr("content");window.$.post("/api/personalized_questions/ignore",{question_token:a});c.slideUp(function(){c.remove()});z.W("question_answer","click_ignore_question","Questions_For_You")})};var yO=function(a){z.Q.apply(this,arguments)};
var zO=function(a){var b=(0,window.$)(".js-desktop-share"),c=b.data("promotion");if("SixInnovations"===c){var d=b.find('button[name\x3d"weibo"]'),f=b.find('button[name\x3d"wechat"]'),g=b.find("img");f.on("click",function(){g.toggleClass("campaign-share-popout--open")});(0,window.$)(window.document).on("click",function(a){(0,window.$)(a.target).hasClass("campaign-share-popout")||(0,window.$)(a.target).hasClass("campaign-shareButton--wechat")||g.removeClass("campaign-share-popout--open")});d.on("click",
function(){a.un(c)})}else if("001"===c){var b=(0,window.$)(".promotion-shareButton--weibo"),d=(0,window.$)(".promotion-shareButton--wechat"),h=(0,window.$)(".promotion-wechatShareCard"),f=z.Ew(window.location.href);(0,window.$)("img",h).attr("src",f);d.on("click",function(){return h.toggleClass("promotion-wechatShareCard--show")});b.on("click",a.un)}};
var AO=function(){function a(){f.css("transform","translateX("+(h*b+-10*b)+"px)");0===b?c.css("display","none"):b===-1*(k-4)?d.css("display","none"):(c.css("display","block"),d.css("display","block"))}var b=0,c=(0,window.$)(".campaign-chapter-list-prev"),d=(0,window.$)(".campaign-chapter-list-next"),f=(0,window.$)(".campaign-chapter-list"),g=f.find("li"),h=(0,window.$)(g[0]).outerWidth(!0),k=g.length;a();c.click(function(){b+=1;a()});d.click(function(){--b;a()})};
var BO=function(){(0,window.$)(".campaign-summary-expand");var a=(0,window.$)(".campaign-summary-shorten"),b=(0,window.$)(".campaign-summary-complete");a.click(function(){a.remove();b.css("display","block")})};var zI={};z.WD.prototype.Nz=z.Z(50,function(a){a=(0,window.$)(a.currentTarget);var b=a.data();z.T.confirm(a.attr("title"),z.Cl("确定%s吗？",a.text()),function(a){a&&(window.$.post(z.Cl("/%s/uninterest",b.type),{id:b.id}),this.dispatchEvent("Ignore"))},this)});
z.WD.prototype.Xz=z.Z(49,function(){window.$.post("/post/undo_uninterest",{id:this.Cb})});z.OD.prototype.Kb=z.Z(48,function(){window.$.post("/question/uninterest",{qid:this.jd["question-id"]});this.dispatchEvent("Ignore")});z.WD.prototype.Kb=z.Z(47,function(a){window.$.post("/post/uninterest",{id:this.Cb});a||this.dispatchEvent("Ignore")});z.YD.prototype.Kb=z.Z(46,function(){window.$.post("/question/uninterest",{qid:this.jd["question-id"]});this.dispatchEvent("Ignore")});
z.ZD.prototype.Kb=z.Z(45,function(){window.$.post("/live/uninterest",{lid:this.jd["live-id"]});this.dispatchEvent("Ignore")});z.aE.prototype.Kb=z.Z(44,function(){window.$.post("/column/uninterest",{id:this.Cb});this.dispatchEvent("Ignore")});z.bE.prototype.Kb=z.Z(43,function(){window.$.post("/ebook/uninterest",{lid:this.jd["ebook-id"]});this.dispatchEvent("Ignore")});z.dE.prototype.Kb=z.Z(42,function(){window.$.post("/pin/uninterest",{pid:this.jd["pin-id"]});this.dispatchEvent("Ignore")});
z.nA.prototype.FC=z.Z(41,function(a){this.uo=a});z.Lv.prototype.qz=z.Z(39,function(){return this.Ta});z.tt.prototype.Cl=z.Z(32,function(a,b,c,d){z.ma(a)?this.nj(a):this.nj([a,b,c,d])});z.Tv.prototype.Cl=z.Z(31,function(a,b,c,d){this.Ma.Cl(a,b,c,d)});z.Ss.prototype.HC=z.Z(30,function(a){this.Fy=z.yb(arguments,0)});z.Dd.prototype.pm=z.Z(3,function(){return this.nG});yI.prototype.sk=!0;yI.prototype.Ah=function(){return this.gD};yI.prototype.toString=function(){return"Const{"+this.gD+"}"};
var CI={},FI={};BI.prototype.sk=!0;BI.prototype.Ah=function(){return this.Wk};BI.prototype.hA=!0;BI.prototype.pm=function(){return 1};var UI=/^[-,."'%_!# a-zA-Z0-9]+$/;EI.prototype.sk=!0;EI.prototype.Ah=function(){return this.LK};EI.prototype.hA=!0;EI.prototype.pm=function(){return 1};
var WI=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i,VI={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},XI={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},SI=/^[a-zA-Z0-9-]+$/,TI={EMBED:!0,IFRAME:!0,LINK:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,TEMPLATE:!0};z.y(II,z.Bt);
II.prototype.Pe=function(a,b,c){var d=this;this.Pb||(this.Pb=!0,this.tO(c).then(function(a){d.Pb=!1;a&&c&&c.length&&(d.BC=c,d.data.push(c),z.At(d),z.wt(d),d.Nd(),d.ab.value="",d.dispatchEvent("select"),z.zt(d))}))};II.prototype.Ym=function(a){var b=this;this.Pb||this.oQ(a).then(function(a){b.Pb=!1;a&&(z.wt(b),b.Nd(),z.zt(b))})};
II.prototype.$n=function(){if(0===this.O.Oa.length&&this.ab.value&&window.document.activeElement===this.ab){var a=z.M("div",{className:"zu-autocomplete-empty"},"没有名字为 "+(0,window.$)(this.ab).val()+" 的话题");(0,window.$)(this.O.M.h).html(a).show()}else 1<this.O.Oa.length&&!this.O.Oa[0][4]&&z.ks(this.O)};z.y(JI,z.tt);z.e=JI.prototype;
z.e.Pf=function(a){this.O=new z.st("/topic/autocomplete",this.ab,null,null,a,!0);this.O.Vg(!0);this.O.Gk=this.Ce;this.O.sn(this.Zf());this.o().g(this.O,"select",this.Uf);this.o().g(this.O,"suggestionsupdate",this.$n)};z.e.w=function(a){this.h=a;this.Be(!0);this.hc()};z.e.gm=function(){this.Hc||(this.Hc=z.L("zm-tag-editor-editor",this.h),this.qe=z.L("zm-tag-editor-command-buttons-wrap",this.h),this.ab=z.Me("input","",this.h)[0],this.Pf(this.qe))};z.e.Nd=function(){};z.e.oe=function(){};z.e.Uf=function(){};
z.e.EB=function(){};z.e.Ag=function(){return this.O.Ag()};z.y(KI,z.tt);z.e=KI.prototype;z.e.w=function(a){this.h=a;this.Zg=z.L("zm-tag-editor-labels",this.h);this.Be(!0);this.oe();this.hc()};
z.e.gm=function(){this.Hc||(this.Hc=z.M("div","zm-tag-editor-editor",[this.Lo=z.M("div","zg-section zg-clear"),this.qe=z.M("div","zg-section zm-tag-editor-command-buttons-wrap",[this.ab=z.J("zh-topic-merge-input"),z.M("a",{"class":"zg-mr15 zg-btn-blue",href:"#",name:"add",style:"display:none;"},"添加"),this.TG=z.J("zh-topic-merge-btn")])]),z.df(this.Hc,this.Zg),this.Pf(this.qe))};
z.e.Pf=function(a){this.O=new z.st("/topic/autocomplete",this.ab,null,null,a,!0);this.O.Vg(!0);this.O.Gk=this.Ce;this.O.sn(this.Zf());this.O.Ty=[this.cf];this.o().g(this.O,"select",this.Uf);this.o().g(this.O,"suggestionsupdate",this.$n)};z.e.Zf=function(){return(0,z.t)(function(a){return z.lb(a,function(a){return z.Mn(this.data,function(c){return c[1]!==a[1]&&3<a.length})},this)},this)};z.e.Uf=function(){var a=this.O.Ag().slice(1);a&&3<a.length&&(this.cG=a,this.Pe(a[3],a[0]))};
z.e.Pe=function(a,b){var c=this;(0,window.setTimeout)(function(){c.ab.value=b})};z.e.Nd=function(){};z.p($I,z.Q);
$I.prototype.init=function(){this.Eu=z.J("zh-pm-detail-item-wrap");this.o().g(this.Eu,"click",this.Xa);var a=z.J("zh-pm-editor-form");if(a){var b=this.nb()[0],c=void 0,c=b?(0,window.$)(b).data():z.Kk?{member:z.Kk.id,name:z.Kk.cH}:{},b=this.Kv=new z.rx({yv:!0,Gl:"to_admin"===c.type?[!0,{Tu:!1}]:!0});b.Cr=!1;b.ai(a);b.show();z.tx(b,c.member,c.name);b.dr((0,window.$)("#js-admin-feedback-token-input").val());c.token&&(a=c.type,b.qr=c.token,b.cw=a);b.focus()}aJ(this);this.Cp()};
$I.prototype.Cp=function(){(0,window.$)("#zh-pm-detail-item-wrap").on("click","a[name\x3dreport]",function(a){z.V.trackEvent(a.currentTarget,{action:"ReportIntent",element:"Button"});a=(0,window.$)(a.currentTarget).closest(".zm-pm-item");(new z.Jz({type:"message",id:a.data("token"),bM:a.data("talkerToken")})).render()})};$I.prototype.nb=function(){return z.gf(this.Eu)};
$I.prototype.Xa=function(a){var b=z.yr(this.Eu,a.target);if(b&&(a=z.to(b,this.Sf))){a=(0,window.$)(a).data();var c=a.token;switch(b.name){case "reply":this.Kv.show();var b=this.Kv,d=a.type;b.qr=c;b.cw=d;z.tx(this.Kv,a.member,a.name,!1);this.Kv.focus();break;case "delete":bJ(this,c)}}};z.p(dJ,z.Q);
dJ.prototype.init=function(){var a=z.J("zh-create-pm");a&&this.o().g(a,"click",this.tV);var a=z.J("zh-pm-item-wrap"),b=new z.El;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a);this.o().g(a,"click",this.Xa);z.Al(b,function(a){return z.V.Ya(a,{module:"MessageItem"},function(){return{card:{card_type:"Content",content:{type:"Message",token:String((0,window.$)(a).data("token"))}}}})});(0,window.$)("#js-admin-feedback-token-select").change(function(){var a=this.value;
window.location.href="self"===a?"/admin_feedback":"/admin_feedback/"+a});(0,window.$)("#zh-pm-item-wrap").on("click",'a[name\x3d"report"]',function(a){var b=(0,window.$)(a.currentTarget).closest(".zm-pm-item");(new z.Jz({type:"message",id:b.data("token"),bM:b.data("talkerToken")})).render();z.V.trackEvent(a.currentTarget,{action:"ReportIntent",element:"Button"})});z.im.ZU&&z.My().then(function(){window.location.reload()})};
dJ.prototype.tV=function(){var a=new z.rx({yv:!0});a.show();z.tx(a,-1);z.Wa(window.location.pathname,"admin_inbox")?a.dr("admin"):a.dr((0,window.$)("#js-admin-feedback-token-select").val())};
dJ.prototype.Xa=function(a){var b=z.yr(this.H0,a.target);if(b){a=b.name;b=z.to(b,this.Sf);if(!b||!a)return!0;var c=(0,window.$)(b).data(),d=c.member,f=c.name;switch(a){case "reply":a=!0;"to_admin"===c.type&&(a=[!0,{Tu:!1}]);z.Dq((0,z.t)(function(){var a=new z.rx({yv:!0,Gl:!1});a.show();var b=c.type;a.qr=c.token;a.cw=b;z.tx(a,d,f,!1);a.Id.focus()},this),a)();break;case "delete":var g=b.getAttribute("data-token");z.T.confirm("删除私信会话","你确定要删除与 "+f+"的所有会话吗？",function(a){a&&eJ(g)},this);break;case "edit":z.pr(this.sd,
this.li),this.Gn=-1}}};z.y(fJ,z.tE);fJ.prototype.init=function(a){fJ.v.init.call(this,a);this.hc(this.h)};fJ.prototype.KD=function(a){this.KD=a};fJ.prototype.hc=function(a){if(this.KD){var b=new z.nA,c=this.YQ;b.iz=this.ez;b.hz=c||b.hz;this.uo&&b.FC(this.uo);b.w(a)}};fJ.prototype.FC=function(a){this.uo=a};z.y(gJ,z.hj);gJ.prototype.init=function(){this.o().g(this.h,"click",this.pq)};gJ.prototype.pq=function(a){a=z.yr(this.h,a.target);"focus"===(a&&a.name)&&(0,z.RG)(a,this.ez,null,this.XQ,{follow_text:this.text[0],unfollow_text:this.text[1]})};z.y(hJ,z.hj);z.e=hJ.prototype;z.e.w=function(a){this.element=a;var b=(0,window.$)("\x3cul\x3e");this.uM=(0,window.$)("\x3cli\x3e");b.append(this.uM);(0,window.$)(a).append(b);this.vM||(this.vM=!0,this.wD=new z.ep(!0),this.o().ta(this.wD,"success",this.AV),this.wD.ajax(this.url,null,"POST"))};z.e.AV=function(){var a=z.Dn(this.wD);a&&(a&&a.r?z.T.message(a.msg):(iJ(this,this.uM,a.msg),this.vM=!1,this.C()))};z.e.C=function(){this.o().g(this.element,"click",this.pq)};
z.e.pq=function(a){var b=(a=a.target)?a.name:"";if(b)switch(b){case "load":case "loadmore":this.aB(a);break;case "topic":window.location.href=a.href}};z.e.aB=function(a){if(!this.$p){var b=a.getAttribute("data-token"),c=a.getAttribute("data-parent");this.$p=!0;this.Fk=new z.ep(!0);this.o().ta(this.Fk,"success",this.ds);this.AC=a.parentNode;this.AC.innerHTML='\x3cspan class\x3d"zg-gray"\x3e加载中...\x3c/a\x3e';this.Fk.ajax(this.url+"?child\x3d"+b+"\x26parent\x3d"+c,null,"POST")}};
z.e.ds=function(){var a=z.Dn(this.Fk);if(a)if(a&&a.r)z.T.message(a.msg);else if(a=a.msg,a[1]){(0,window.$)(this.AC).hide();for(var b=(0,window.$)(this.AC.parentNode),c=0;c<a[1].length;c++){var d=a[1][c],f=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");"topic"!==d[0][0]&&f.addClass("zm-topic-organize-loadmore");b.append(f);iJ(this,f,d)}this.$p=!1}};z.y(jJ,z.Lv);jJ.prototype.Rh=function(a){z.Mk[0][0]===a?this.pj():jJ.v.Rh.apply(this,arguments)};jJ.prototype.LE=function(a){if(a=z.Dn(a.target))a.r?z.T.message(a.msg):a.msg&&(window.location.href=a.msg)};z.p(lJ,z.Q);z.e=lJ.prototype;
z.e.T=function(a){z.Q.prototype.T.call(this,a);this.h=a;this.Ha=(0,window.$)(a);this.Ha.append(yJ(this.ia));this.Zv=this.Ha.find(".TopicIndex-subTopics")[0];this.Zv||(this.Ha.append(CO),this.Zv=this.Ha.find(".TopicIndex-subTopics")[0]);a=this.Ha.find(".TopicIndex-errTips");this.NO=this.Ha.find(".zg-anchor-hidden")[0];this.QK=this.Ha.find(".TopicIndex-editQuesInput")[0];this.cd=this.Ha.find(".TopicIndex-sectionTitle")[0];this.qD=this.Ha.find(".TopicIndex-editSectionTitle")[0];this.gC=this.Ha.find(".TopicIndex-questionList")[0];
this.Mo=this.Ha.find(".TopicIndex-editWrap .TopicIndex-questionList")[0];this.EQ=this.Ha.find(".TopicIndex-editWrap")[0];this.jM=a[0];this.RK=a[1];this.nM=a[2];sJ(this,{isEdit:!0})};z.e.B=function(){z.Q.prototype.B.call(this);this.h=z.M("div",{innerHTML:zJ(this.ia),"class":"TopicIndex-section is-edit"});this.T(this.h)};z.e.C=function(){z.Q.prototype.C.call(this);wJ(this,this.QK);vJ(this,this.Ha,this.ia.subTopic.map(function(a){return[a.text,a.token,void 0,a.De]}));qJ(this,this.Mo);this.Kj()};
z.e.Db=function(){z.Q.prototype.Db.call(this);this.Ha.find(".js-change").off("change",this.iM);this.Ha.off("click",".TopicIndex-questionList .js-delete",this.PK);this.Ha.off("click",".js-finish",this.SG);this.h.remove()};
z.e.Kj=function(){var a=this;this.iM=function(b){var c=b.target.value.trim();if(12<c.length)return b.target.value=c.substr(0,12),uJ(a,{type:"title",Ua:"标题字数不能超过12"});a.ia.id?""===c?0>=a.ia.indexItem.length&&0>=a.ia.subTopic.length?a.service.lQ(a.ia.id).then(function(){uJ(a,{type:"title",Ua:a.ia.title+"已删除"});a.dispatchEvent({type:oJ,data:{id:a.ia.id,title:""}});a.dispatchEvent(tJ)}).fail(function(b){return uJ(a,{type:"title",Ua:b||"删除失败"})}):uJ(a,{type:"title",Ua:"请输入标题"}):a.service.FZ(a.ia.id,c).then(function(){uJ(a,
{type:"title",Ua:""});nJ(a,{title:c})}).fail(function(b){return uJ(a,{type:"title",Ua:b||"保存失败"})}):0<c.length&&a.service.oO({title:c}).then(function(b){nJ(a,{id:b,title:c});uJ(a,{type:"question",Ua:""});uJ(a,{type:"title",Ua:""});a.BI||sJ(a,{isEdit:!1})}).fail(function(b){return uJ(a,{type:"title",Ua:b||"添加失败"})})};this.hZ=function(b){b=b.currentTarget.value.trim();for(var c=0,d=0;d<b.length;d++)var f=b.charCodeAt(d),c=c+(0<f&&128>=f?1:2);uJ(a,{type:"title",Ua:24<c?"标题不能超过 12 字":""})};this.PK=function(b){var c=
[].indexOf.call(a.Mo.children,(0,window.$)(b.target).closest(".TopicIndex-questionItem")[0]);a.service.kQ(a.ia.indexItem[c].id).then(function(){uJ(a,{type:"question",Ua:""});nJ(a,{indexItem:[c,1]})}).fail(function(b){return uJ(a,{type:"question",Ua:b||"删除失败"})})};this.SG=function(){a.jM.textContent||a.RK.textContent||a.nM.textContent||(a.Ph?a.BI=!1:(a.qD.value!==a.ia.title&&a.qD.dispatchEvent(new window.Event("change")),sJ(a,{isEdit:!1})))};this.Ha.find(".js-change").on("change",this.iM).on("input",
this.hZ);this.Ha.on("click",".TopicIndex-questionList .js-delete",this.PK);this.Ha.on("click",".js-finish",this.SG)};var oJ="update_module",tJ="del_module",xJ='\x3cspan class\x3d"zu-autocomplete-row-name" title\x3d"\x3c%\x3dlabel%\x3e" style\x3d"-webkit-user-select: none;" data-topicid\x3d"\x3c%\x3durl_token%\x3e"\x3e\x3c%\x3dlabel%\x3e\x3cspan class\x3d"zg-link-gray-normal"\x3e\x3c%\x3d answer_count \x3e 0 ? answer_count + \'个回答\' : \'\' %\x3e\x3c/span\x3e\x3c/span\x3e',CO='\x3cdiv class\x3d"TopicIndex-subTopicsWrap clearfix is-hide"\x3e\n      \x3cspan class\x3d"TopicIndex-subLabel"\x3e相关话题：\x3c/span\x3e\n      \x3cdiv class\x3d"TopicIndex-subTopics"\x3e\x3c/div\x3e\n    \x3c/div\x3e';z.p(AJ,z.Q);z.e=AJ.prototype;
z.e.B=function(){z.Q.prototype.B.call(this);var a=this.Nm;this.h=z.M("div",{innerHTML:'\n    \x3cdiv class\x3d"TopicBook-header"\x3e\n      \x3ca class\x3d"zg-anchor-hidden" name\x3d"TopicBook"\x3e\x3c/a\x3e\n      \x3ch3\x3e书籍推荐\x3c/h3\x3e\n      '+(a?'\n        \x3ca class\x3d"TopicBook-editButton zu-edit-button js-modify" name\x3d"edit"\x3e\n          \x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e\n          修改\n        \x3c/a\x3e':"")+'\n    \x3c/div\x3e\n    \x3cdiv class\x3d"TopicBook-content"\x3e\n      \x3cdiv class\x3d"TopicBook-items"\x3e\n      \x3c/div\x3e\n      '+(a?
'\n        \x3cdiv class\x3d"TopicBook-inputWrapper"\x3e\n          \x3cinput type\x3d"text" class\x3d"zg-form-text-input js-input" placeholder\x3d"复制知乎或亚马逊上的书籍链接"/\x3e\n          \x3cbutton class\x3d"zg-btn-blue js-submit TopicBook-finishButton"\x3e\n            确定\n          \x3c/button\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"TopicBook-errTips js-error"\x3e\x3c/div\x3e\n        ':"")+"\n    \x3c/div\x3e\n    ","class":"TopicBook","data-id":"TopicBook"})};
z.e.C=function(){z.Q.prototype.C.call(this);this.H=(0,window.$)(this.h);this.dh=this.H.find(".TopicBook-items");this.ql=this.H.find(".TopicBook-errTips");this.Kw=this.H.find(".js-input");this.H.find(".js-modify");this.AN=this.H.find(".js-submit");DJ(this,this.list);0>=this.list.length&&BJ(this);this.H.on("click",".js-preview",this.IS.bind(this));this.Nm&&(this.H.on("click",".js-modify",this.Iz.bind(this)),this.H.on("click",".js-delete",this.hp.bind(this)),this.H.on("click",".js-submit",this.kk.bind(this)),
this.Kw.on("keyup",this.aS.bind(this)))};z.e.Iz=function(){BJ(this)};z.e.aS=function(a){this.ql.text("");a.preventDefault();13===a.keyCode&&this.AN.click()};z.e.kk=function(){var a=this,b=this.Kw.val();if(!b)return CJ(this,"");this.dh.addClass("loading");FJ(b).then(function(b){return HJ(a.token,b.id).then(function(){DJ(a,{uN:b});CJ(a,"");a.dh.removeClass("loading");a.Kw.val("")},function(b){CJ(a,b);a.dh.removeClass("loading")})},function(b){CJ(a,b);a.dh.removeClass("loading")})};
z.e.IS=function(a){a.preventDefault();a.stopPropagation();var b=this.dh.children().index((0,window.$)(a.currentTarget).parents(".TopicBook-item"));if(b=this.list[b].RA){var b=(0,window.decodeURIComponent)(b),c=new z.R;c.Fe(!0);c.La("预览");c.render();var d=(0,window.$)(c.S());d.append((0,window.$)("\x3ciframe\x3e",{b0:"allowFullScreen",className:"book-preview",frameBorder:"0",height:"100%",width:"100%",src:b.replace("linkCode\x3dkpp","preview\x3dinline")}));c.F(!0);(0,window.$)(c.m()).addClass("TopicBook-dialog");
d.outerWidth(848).outerHeight(536);z.V.trackEvent(a.target,{action:"Click",element:"Button"},{button:{text:"试读"}})}};z.e.hp=function(a){var b=this;a.preventDefault();a.stopPropagation();var c=this.dh.children().index((0,window.$)(a.currentTarget).parent(".TopicBook-item"));window.$.ajax({method:"delete",url:"/topic_index/"+this.token+"/book",data:{book_id:this.list[c].id}}).then(function(){return DJ(b,{tN:c})})};z.p(KJ,z.Q);KJ.prototype.T=function(a){z.Q.prototype.T.call(this,a);this.h=a;this.H=(0,window.$)(a);this.jg=this.H.find(".TopicIndex-toc");this.xl=this.jg.find(".TopicIndex-tocItems");this.Ww=this.H.find(".TopicIndex-sectionWrap");this.qf=this.H.find(".TopicIndex-section");this.yl=this.jg.find("a")};
KJ.prototype.Kj=function(){var a=this;this.sO=function(b){if(20>a.qf.length){var c=new lJ(void 0,a.ia.id);z.zn(c,b.currentTarget.parentElement);a.Ug[a.H.find(".TopicIndex-section").length-1]=c;NJ(a,c);OJ(a,c)}else z.T.alert("暂不支持添加超过20个模块")};this.DQ=function(b){var c=(0,window.$)(b.currentTarget).parent(".TopicIndex-section");b=c[0];var d=a.Ww.children().index(c);a.Ug[d]?sJ(a.Ug[d],{isEdit:!0}):(c=new lJ(JJ(c),a.ia.id),c.w(b),a.Ug[d]=c,NJ(a,c),OJ(a,c))};this.H.on("click",".js-add",this.sO);this.H.on("click",
".js-edit",this.DQ);this.H.on("click",".js-drag",function(a){return a.preventDefault()})};KJ.prototype.C=function(){z.Q.prototype.C.call(this);RJ(this,this.jg);SJ(this,this.jg);LJ(this);this.ia.Nm&&(this.Ww.append(DO),this.qf.append(EO),this.jg.addClass("TopicIndex-toc--edit"),this.xl.find(".TopicIndex-tocLink").addClass("TopicIndex-tocLink--edit").prepend(QJ),this.Kj(),0===this.qf.length&&this.H.find(".js-add")[0].click());MJ(this)};
var EO='\x3ca class\x3d"TopicIndex-editButton zu-edit-button js-edit" name\x3d"edit"\x3e\n    \x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改\x3c/a\x3e',DO="\x3cdiv class\x3d\"TopicIndex-addBtnWrap\"\x3e\n    \x3cdiv class\x3d'TopicIndex-addSectionButton js-add'\x3e\n      \x3ci class\x3d'z-icon-follow'\x3e\x3c/i\x3e\n      \x3cspan\x3e添加下一个标题\x3c/span\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e",QJ='\n    \x3cspan class\x3d"TopicIndex-dragIcon js-drag"\x3e\n      \x3cspan class\x3d"zg-icon-drag-wrap"\x3e\x3ci class\x3d"zg-icon-drag"\x3e\x3c/i\x3e\x3c/span\x3e\n    \x3c/span\x3e\n    ';z.p(TJ,z.Q);TJ.prototype.B=function(){z.Q.prototype.B.call(this);this.h=z.M("div",{"class":"zu-top-feed-list-wrap "});this.T(this.h)};TJ.prototype.T=function(a){z.Q.prototype.T.call(this,a);this.H=(0,window.$)(a);this.H.append('\x3cdiv class\x3d"listview zu-top-feed-list zh-topic-index-log-list"\x3e\x3c/div\x3e');this.Za=this.H.find(".listview")};TJ.prototype.C=function(){z.Q.prototype.C.call(this);this.zp()};
TJ.prototype.zp=function(){var a=this,b=z.Mk[0][1],c={offset:0,limit:20},d=new z.El({use:["autoload"],source:function(){return window.$.get("/topic/"+b+"/commits",c).then(function(a){a.length>=c.limit&&(c.offset=a[a.length-1].created);return{results:a.map(function(a){var c={module:"模块",item:"相关条目",subtopic:"相关话题"},d=void 0;"update"===a.operation?d="module"===a.objectType?"更新了标题":"调整了条目顺序":"insert"===a.operation?d="新增了"+c[a.objectType]:"remove"===a.operation&&(d="删除了"+c[a.objectType]);var c=a.operator.id,
f=a.operator.name,n=a.operation,q=a.objectType,v=a.moduleId,F=a.moduleTitle,K=z.gj(a.created),O="question"===a.detail.itemType?"/question":"//zhuanlan.zhihu.com/p",ca=a.detail.title,Va=a.detail.origianlTitle,Sa=a.detail.itemTitle,Aa=a.detail.itemId,ua=a.detail.topicId;a=a.detail.topicTitle;return'\n\x3cdiv class\x3d"zm-item"\x3e\n  \x3ch2 class\x3d"zm-item-title"\x3e\n    \x3ca target\x3d"_blank" href\x3d"/topic/'+b+"#"+v+'"\x3e'+F+'\x3c/a\x3e\n  \x3c/h2\x3e\n  \x3cdiv\x3e\n    \x3ca target\x3d"_blank" href\x3d"/people/'+
c+'"\x3e'+f+'\x3c/a\x3e\n    \x3cspan class\x3d"zg-gray-normal"\x3e'+d+'\x3c/span\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"zg-item-log-detail"\x3e'+("subtopic"===q&&("insert"===n?'\x3cins\x3e\x3ca data-hovercard\x3d"t$t$'+ua+'" href\x3d"/topic/'+ua+'"\x3e'+a+"\x3c/a\x3e\x3c/ins\x3e":'\x3cdel\x3e\x3ca data-hovercard\x3d"t$t$'+ua+'" href\x3d"/topic/'+ua+'"\x3e'+a+"\x3c/a\x3e\x3c/del\x3e")||"module"===q&&("update"===n&&'\x3ca target\x3d"_blank" href\x3d"/topic/'+b+"#"+v+'"\x3e\x3cins\x3e'+ca+"\x3c/ins\x3e\x3cdel\x3e"+
Va+"\x3c/del\x3e\x3c/a\x3e"||"insert"===n&&'\x3cins\x3e\x3ca target\x3d"_blank" href\x3d"/topic/'+b+"#"+v+'"\x3e'+ca+"\x3c/a\x3e\x3c/ins\x3e"||"\x3cdel\x3e\x3cspan\x3e"+ca+"\x3c/span\x3e\x3c/del\x3e")||"item"===q&&("insert"===n&&'\x3cins\x3e\x3ca class\x3d"question_link" href\x3d"'+O+"/"+Aa+'"\x3e'+Sa+"\x3c/a\x3e\x3c/ins\x3e"||"remove"===n&&'\x3cdel\x3e\x3ca class\x3d"question_link" href\x3d"'+O+"/"+Aa+'"\x3e'+Sa+"\x3c/a\x3e\x3c/del\x3e"||'\x3ca class\x3d"question_link" href\x3d"'+O+"/"+Aa+'"\x3e'+
Sa+"\x3c/a\x3e"))+('\x3c/div\x3e\n  \x3ctime datetime\x3d"'+K+'"\x3e'+K+"\x3c/time\x3e\n\x3c/div\x3e")}),next:a.length>=c.limit}})},Nl:"zg-btn-white zu-button-more js-index-log-more"});d.w(this.Za[0]);d.o().ta(d,"next",function(){d.nb().length||(d.dispose(),a.Za.html('\x3cdiv class\x3d"empty-results"\x3e还没有记录\x3c/div\x3e'))});d.Hg();this.jf=d};z.y(UJ,z.Q);z.e=UJ.prototype;z.e.init=function(){z.UG.K(this);this.w(window.document.body)};
z.e.C=function(){UJ.v.C.call(this);$J(this);var a=z.J("zh-topic-top-answerer");a&&(new gJ(a,"people",["zg-follow","zg-unfollow"])).init();if(a=z.J("zh-topic-direct-question-list"))a=new fJ(a,null,"question",null,!0),a.mj("question-item"),a.init();if(!z.Y.uc){if(a=z.J("zh-topic-title"))this.ud=new jJ(!1,"/topic/update","title"),vI(this.ud,["tid\x3d"+this.eg]),this.ud.addEventListener("beforeedit",z.zE({vr:!0})),this.ud.w(a),(0,window.$)(a).on("click",".js-pin",function(){var a=(0,window.$)(this),c=
a.attr("data-action");window.$.post(c,{tid:z.Mk[0][3]}).done(function(c){if(!c)return z.T.message("网络异常");if(c.r)return z.T.message(c.msg);c=a.hasClass("pin")?'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/remove" class\x3d"js-pin zg-gray unpin topic-hover-content"\x3e\x3ci class\x3d"z-icon-unpin"\x3e\x3c/i\x3e取消常去话题\x3c/a\x3e':'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/add" class\x3d"js-pin zg-gray pin topic-hover-content"\x3e\x3ci class\x3d"z-icon-pin"\x3e\x3c/i\x3e设为常去话题\x3c/a\x3e';
a.replaceWith(c)})});if(a=z.J("zh-topic-desc"))(0,window.$)(a).find(".zm-editable-content").data("editable-maxlength"),this.am=new z.Pv(!0,"/topic/update","description"),this.am.fc='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e添加话题描述\x3c/a\x3e\x3c/div\x3e',vI(this.am,["tid\x3d"+this.eg]),this.am.Px=!1,this.am.KM=!1,this.am.addEventListener("beforeedit",z.zE({vr:!0})),this.am.w(a);if(a=z.J("zh-topic-faq"))this.$y=new z.Pv(!0,"/topic/"+(0,window.encodeURIComponent)(z.Mk[0][1])+"/faq","content"),this.$y.fc=
'\x3cdiv class\x3d"zm-topic-faq-container"\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e常见问题是该话题下经常会提到的问题的整理，以便后来者查阅（\x3ca href\x3d"/question/20388061" class\x3d"zg-link-litblue"\x3e如何创建？\x3c/a\x3e）\x3c/div\x3e\x3ca href\x3d"javascript:;" name\x3d"edit" class\x3d"zg-link-litblue"\x3e\x3cspan class\x3d"zg-blue-edit"\x3e\x3c/span\x3e为「'+z.Mk[0][0]+"」添加常见问题\x3c/a\x3e\x3c/div\x3e",this.$y.Px=!1,this.$y.w(a);eK(this)}fK(this);ZJ(this);bK(this);cK();dK(this);XJ(this);WJ();(a=z.L("zm-topic-feed-container"))&&
(new gJ(a,"question",["zg-follow","zg-unfollow"])).init();(a=z.J("zh-topic-side-children-list"))&&(new gJ(a,"topic",["zg-follow","zg-unfollow"])).init();iK();(0,window.$)(".js-may-disable").click(z.Dq(z.r,!0));VJ();jK(this);kK()};
z.e.JV=function(){this.Ps=this.Ma.cG;if(!this.AJ&&this.Ps){this.AJ=!0;this.lB=new z.ep(!0);this.o().ta(this.lB,"success",this.BO);this.lB.ajax("/topic/"+(0,window.encodeURIComponent)(z.Mk[0][1])+"/demand","action\x3dmerge\x26target_topic_id\x3d"+this.Ps[3]);var a=z.J("zh-topic-merged-msg");z.P(z.J("zh-topic-merge"),!1);z.P(a,!0);a=z.Me("a",null,a)[0];a.href="/topic/"+this.Ps[1];a.innerHTML=this.Ps[0];this.Ma&&(this.Ma.ab.value="")}};
z.e.BO=function(){var a=z.Dn(this.lB);if(!a)return z.T.message("网络异常");if(a.r){var b=z.J("zh-topic-merged-msg");z.P(z.J("zh-topic-merge"),!0);z.P(b,!1);this.AJ=!1;return z.T.message(a.msg)}};z.e.wV=function(){this.iG||(this.iG=!0,this.yy=new z.ep(!0),this.o().ta(this.yy,"success",this.zO),this.yy.ajax("/topic/"+(0,window.encodeURIComponent)(z.Mk[0][1])+"/demand","action\x3dremove"))};
z.e.zO=function(){var a=z.Dn(this.yy);if(!a)return z.T.message("网络异常");if(a.r)return z.T.message(a.msg);a=z.J("zh-topic-del-msg");z.P(z.J("zh-topic-del-btn"),!1);z.P(a,!0);this.Ma&&(this.Ma.ab.value="");this.iG=!1};
z.e.iW=function(a){if((a=a.target)&&a.name)if("add"===a.name){if(a=this.lx.value)this.nx=new z.ep(!0),this.o().ta(this.nx,"complete",this.yO),this.nx.ajax(window.location.href,"action\x3dadd_alias\x26alias\x3d"+(0,window.encodeURIComponent)(a))}else"remove"===a.name?(this.oC=new z.ep(!0),a=a.parentNode.getAttribute("data-token"),this.o().ta(this.oC,"complete",this.DO),this.oC.ajax(window.location.href,"action\x3dremove_alias\x26alias_token\x3d"+a)):"remove-merged"===a.name&&(this.pC=new z.ep(!0),
a=a.parentNode.getAttribute("data-token"),this.o().ta(this.pC,"complete",this.EO),this.pC.ajax("/topic/"+(0,window.encodeURIComponent)(z.Mk[0][1]+"/demand"),"action\x3dremove\x26target_topic_id\x3d"+a))};z.e.EO=function(){var a=z.Dn(this.pC);if(!a)return z.T.message("网络异常");if(a.r)return z.T.message(a.msg);YJ(this,a.msg)};z.e.DO=function(){var a=z.Dn(this.oC);if(!a)return z.T.message("网络异常");if(a.r)return z.T.message(a.msg);YJ(this,a.msg)};
z.e.yO=function(){var a=z.Dn(this.nx);if(!a)return z.T.message("网络异常");if(a.r)return z.T.message(a.msg);var a=a.msg,b=z.M("li");b.setAttribute("data-token",a[1]);b.innerHTML=a[0]+' \x3ca name\x3d"remove" href\x3d"javascript:;" class\x3d"zg-link-gray"\x3e移除\x3c/a\x3e';this.mx.appendChild(b);this.lx.value="";z.P(this.mx.parentNode,!0)};
z.e.QC=function(a){this.KB?this.sb.W()?this.sb.F(!1):(this.sb.F(!0),a.stopPropagation(),a.preventDefault(),this.Kl()):(a.stopPropagation(),a.preventDefault(),this.wk(),this.Kl());this.KB=!0};z.e.Kl=function(){this.o().ta(window.document,"click",function(){this.sb.F(!1)})};
z.e.wk=function(){var a=z.J("zh-topic-side-head"),b=this.Ng.getAttribute("data-auth");this.sb=new z.Xz;this.Yz=!0;"f-topic-manage"===b&&this.sb.Ia(this.oW=new z.Sz("管理话题"));this.sb.Ia(this.pW=new z.Sz("组织话题"));this.sb.Ia(this.nW=new z.Sz("话题日志"));this.Yz&&(this.sb.render(a),this.o().g(this.sb,"action",this.mk))};z.e.mk=function(a){var b="";a.target===this.oW?b="admin":a.target===this.pW?b="organize":a.target===this.nW&&(b="log");window.location.href=["/topic",this.ji[1],b].join("/")};
z.e.UV=function(){var a=z.Dn(this.nC);if(a&&!a.r){var b=[];z.A(a,function(a){b.push(z.lr(a,null,!0))});this.wX.innerHTML=b.join("")+'\x3cdiv class\x3d"zg-clear"\x3e\x3c/div\x3e';a.length&&z.P(z.J("zh-topic-side-related-topics-wrap"),!0)}};z.y(lK,z.Q);lK.prototype.B=function(){this.h=this.L().B("FORM",{method:"POST",style:"display:none"})};lK.prototype.post=function(a,b,c){var d=this.m();d||(this.render(),d=this.m());d.action=b||"";d.target=c||"";mK(this,d,a);d.submit()};z.y(qK,z.hj);qK.prototype.init=function(){var a=z.sn(new z.oj(window.location.href),"group_id");a&&(this.Mk=new z.ep(!1),this.o().ta(this.Mk,"success",this.SB),a&&this.Mk.ajax("/noti7/read","group_id\x3d"+a,"POST"))};qK.prototype.SB=function(){var a=z.Dn(this.Mk);if(a&&!a.r&&a.msg){var b=a.msg;if(!0===b||"true"===b||"True"===b)return;this.aV=a.msg;this.dispatchEvent("change")}(a=z.TG)&&z.ox(a)};z.y(rK,z.Q);z.e=rK.prototype;z.e.init=function(){z.UG.K(this);this.w(window.document.body)};
z.e.C=function(){rK.v.C.call(this);tK(this);if(this.Lu=z.J("zh-list-meta-wrap"))this.o().g(this.Lu,"click",this.DB),z.sn(new z.oj(window.location.href),"fc")&&vK(this);var a=z.J("zh-favlists-wrap");a&&(new fJ(a,null,"favlist",null,!0)).init();this.Ap();(a=z.J("zh-favlist-log-list-wrap"))&&(new fJ(a,null,"favlist",null,!0)).init();sK();if(a=z.J("zh-favlist-followers-wrap"))a=new fJ(a,null,"people",["zg-btn-follow","zg-btn-unfollow"],!0),a.mj("zm-profile-section-item"),a.KD(!0),a.init();this.o().g(window,
"hashchange",this.I0);this.nA();this.mq=new qK;this.mq.init()};z.e.Ap=function(){var a=z.J("zh-list-collection-wrap");if(a){(0,window.$)(a).on("click","a[name\x3dunfavo]",window.$.proxy(this.VS,this));var b=new z.El({bg:!1});this.K(b);b.use("childConstructor",{factory:z.gE}).use("expandLimit");b.w(a);this.o().g(b,"click!",function(a){"comment"===a.namespace&&a.Oc.fill("category",this.Th).fill("label","collection_answer")})}};
z.e.VS=function(a){a=a.target;var b=a.id.split("-"),c=b[1],b=b[2];(new z.ep(!0)).ajax("/collection/remove","answer_id\x3d"+c+"\x26favlist_id\x3d"+b);if(b=z.vf(a,"div","zm-item"))a=z.Co("zm-item-answer",b),1===a.length?z.N(b):(a=z.pb(a,function(a){return a.getAttribute("data-aid")===c}))&&z.N(a.parentNode)};z.e.BY=z.Dq(function(){z.Zz.ba().show(!0);z.wi("collect","click_add_collection_start","collections_sidebar_create_collection")},!0);
z.e.QC=function(a){this.KB?this.sb.W()?this.sb.F(!1):(this.sb.F(!0),a.stopPropagation(),a.preventDefault(),this.Kl()):(a.stopPropagation(),a.preventDefault(),this.wk(),this.Kl());this.KB=!0};z.e.Kl=function(){this.o().ta(window.document,"click",function(){this.sb.F(!1)})};z.e.wk=function(){var a=z.J("zh-list-side-head");this.sb=new z.Xz;this.Yz=!0;this.visible||this.sb.Ia(this.rW=new z.Sz("设置为公开"));this.sb.Ia(this.mW=new z.Sz("删除此收藏夹"));this.Yz&&(this.sb.render(a),this.o().g(this.sb,"action",this.mk))};
z.e.DB=function(a){a=a.target;switch(a&&a.name){case "edit":z.dA(z.Zz.ba());break;case "addcomment":z.ui({category:"collect",action:"click_add_collection_comment_start",label:"collection_collection_name_add_collection_comment_start"});vK(this);this.Ja.ii();this.Ja.pd()&&this.Ja.qj("view_comments",(0,window.parseInt)(z.qf(a),10)||0);break;case "remove":uK(this)}};
z.e.mk=function(a){a.target===this.rW?z.T.confirm("确定设置收藏夹为公开？","收藏夹设置为公开后，将不能再设置为私密。",function(a){a&&wK(this)},this):a.target===this.mW&&uK(this)};z.e.nA=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=oK(a).done(function(a){b.html(a)}))})};z.y(xK,z.hj);
xK.prototype.init=function(){if(this.Yk=z.J("zh-question-redirect-info"))this.Yk.innerHTML&&(this.Sp=!0),this.o().g(this.Yk,"click",function(a){"cancel"===a.target.name&&AK(this)});var a=z.J("zh-question-side-header-wrap");if(z.sm.fb&&!z.sm.VI&&a){var b=z.J("zh-question-filter-wrap");b?z.cf(a,b):a.style[z.C?"styleFloat":"cssFloat"]="none"}(this.Ng=z.J("zh-question-operation-menu"))&&this.wk();this.o().g(z.sp,"anon_change",function(a){var b=z.J("zh-question-side-invitation-anon");b&&z.P(b,a.xb);(b=
z.J("zh-question-side-invitation-notanon"))&&z.P(b,!a.xb);this.Zm&&this.Zm.gb(QI(this.data.Uh)||!a.xb)})};
xK.prototype.wk=function(){this.sb=new z.Xz;var a=this.data.ho,b=this.Ng.getAttribute("data-auth"),b=b?b.split(","):[];if(null==a||0===a)this.sb.Ia(this.ev=zK("使用匿名身份",!1)),yK(this),z.X.uc||z.rm("question_op_redirect")||"close"===z.X.status||z.X.Np||(this.sb.Ia(this.Zm=zK(this.Sp?"撤消重定向":"问题重定向")),this.Zm.gb(QI(this.data.Uh)||!this.data.xb)),z.rb(b,"auth-f-manage")&&this.sb.Ia(this.qW=zK("更新话题页显示",!1)),this.o().g(this.sb,"action",this.mk),this.ev&&this.o().g(z.sp,"anon_change",function(){yK(this)}),
this.Ib&&z.rb(b,"auth-pu-mark")&&(this.sb.Ia(this.JB=zK("优质回答",!0)),this.JB.yc(this.Ib.ZT)),a=new z.vA("Settings",this.sb),a.dj=!0,z.xA(a),a.w(this.Ng)};
xK.prototype.mk=function(a){if(a.target===this.ev)z.qp(this.data.xb?0:1);else if(a.target===this.Zm){if(!1===z.zE({Gq:!0})())return!1;this.Iq||(this.Iq=new z.mE(this.qa),this.o().g(this.Iq,"change",this.GU));this.sb.F(!1);this.Sp?AK(this):this.Iq.show()}else a.target===this.lW?(a=this.lW.Dg()?"/unlock_summary":"/lock_summary",z.fp("/question/"+this.data.Ga+a,function(){window.top!==window?window.top.location.href="/question/"+z.X.Ga:window.location.reload()},"POST")):a.target===this.qW?window.$.post("/refresh_topic_feeds",
{q:z.X.Ga}).done(function(a){a.r||z.T.message("操作成功！")}):a.target===this.JB&&(a=this.JB.Dg()?"/good_mark":"/good_unmark",window.$.post("/answer/"+this.Ib.Ga+a).done(function(a){a.r||z.T.message("操作成功！")}))};
xK.prototype.GU=function(){this.Yk.innerHTML='\x3cdiv class\x3d"zg-wrap"\x3e\x3cdiv class\x3d"zu-global-nitify-inner"\x3e\x3cspan class\x3d"zu-global-notify-icon"\x3e\x3c/span\x3e此问题将跳转至 \x3ca href\x3d"/question/'+this.Iq.Fv+'"\x3e'+this.Iq.OK+'\x3c/a\x3e（\x3ca href\x3d"javascript:;" name\x3d"cancel"\x3e撤消重定向\x3c/a\x3e）\x3c/div\x3e\x3c/div\x3e';z.P(this.Yk,!0);this.Sp=!0;this.Zm.Vq("撤消重定向")};z.y(BK,z.Q);var CK="headline",FO={experience:"/topic/bio/update",headline:"/people/edit"},GO="例：游戏开发者，科幻游戏爱好者;例：交互设计师，专注 iOS 平台产品设计;例：从医五年，口腔医学领域;例：金融硕士，三年从业经验;例：SNS 深度用户，社交产品设计师;例：十年互联网人，做过产品，写过代码;例：摄影爱好者，专注人像摄影;例：旅行爱好者，脚步遍及 32 个国家;例：读中外历史，研究各国文化;例：三次创业，两次失败，一次成功;例：坚持健身四年，专注有氧抗阻训练;例：做过动画，画过漫画".split(";");z.e=BK.prototype;
z.e.B=function(){this.L();var a,b;"experience"===this.type?(b="添加我在 "+this.tK.ji+" 话题下的话题经验",a="在 "+this.tK.ji+" 话题下的话题经验"):(b="添加一句话介绍",a="一句话介绍");a='\n    \x3cdiv class\x3d"zm-bio-item '+(this.content.length?"normal":"empty")+'"\x3e\n      \x3cp class\x3d"zm-bio-item-title"\x3e'+z.Ma(a)+'\x3c/p\x3e\n      \x3cinput class\x3d"zm-bio-item-checkbox" type\x3d"checkbox"/\x3e\n      \x3cimg class\x3d"avatar" src\x3d"'+z.Ma(z.Y.If())+'"\x3e\n      \x3cdiv class\x3d"zm-bio-item-empty-tip"\x3e\n        \x3cspan class\x3d"sprite-topic-exprience-icon-add"\x3e\x3c/span\x3e\n        \x3ca href\x3d"javascript:;" name\x3d"edit"\x3e'+
z.Ma(b)+'\x3c/a\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"zm-bio-item-content"\x3e\n        \x3cspan class\x3d"username"\x3e'+z.Ma(z.Y[0])+'\x3c/span\x3e\n        \x3cspan class\x3d"content"\x3e\n          '+("，"+z.Ma(this.content))+'\n        \x3c/span\x3e\n        \x3ca href\x3d"javascript:;" name\x3d"edit" class\x3d"zu-edit-button"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改\x3c/a\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  ';a=(0,window.$)(a);this.h=a.get(0);this.zf();this.UD=
a.find(".zm-bio-item-checkbox");this.Hr=a.find(".content");this.T(this.h)};
z.e.zf=function(){var a=this.L(),b=(0,window.$)('\n    \x3cdiv class\x3d"zm-command"\x3e\n      \x3cspan class\x3d"limitTip"\x3e'+(40-this.content.length)+' / 40\x3c/span\x3e\n      \x3ca href\x3d"javascript:;" name\x3d"cancel"\x3e取消\x3c/a\x3e\n      \x3ca href\x3d"javascript:;" name\x3d"save" class\x3d"zg-r3px zg-btn-blue"\x3e保存\x3c/a\x3e\n    \x3c/div\x3e\n  ').get(0),c=a.B("textarea",{className:"zm-bio-item-editor-input",value:this.content});this.GQ=a.B("div","zm-bio-item-editor",[a.B("div","zg-form-text-input",
c),b]);new z.Nr(c);a.appendChild(this.h,this.GQ);this.zj=(0,window.$)(c);this.gJ=a.yg("limitTip",b);this.type!==CK&&this.zj.prop("placeholder",GO[Math.floor(Math.random()*GO.length)])};z.e.T=function(a){BK.v.T.call(this,a);this.lr=this.content.length?"normal":"empty"};
z.e.C=function(){var a=this;BK.v.C.call(this);this.o().g(this.h,"click",function(){"normal"===this.lr?this.yc(!0):"empty"===this.lr&&(EK(this,"editing"),DK(this))});(0,window.$)(this.h).find("a").click(function(b){switch((0,window.$)(b.target).prop("name")){case "edit":EK(a,"editing");DK(a);break;case "cancel":a.fp();break;case "save":a.Pt()}b.stopPropagation()});this.zj.on("keyup",function(b){b=40-(0,window.$)(b.target).val().length;z.po(a.gJ,"exceed",0>b);z.of(a.gJ,b+" / 40")})};
z.e.Pt=function(){var a=this.zj.val();if(40>a.length){var b=this,c=FO[this.type];("experience"===this.type?window.$.post(c,{bio:a,tid:this.token}):window.$.post(c,{data:JSON.stringify({headline:a})})).then(function(){a.length?(b.Hr.text("，"+a),b.yc(!0),EK(b,"normal")):(b.Hr.text(""),b.yc(!1),EK(b,"empty"));b.aa(a)})}};z.e.fp=function(){this.content.length?EK(this,"normal"):EK(this,"empty")};z.e.aa=function(a){this.content=a;this.content.length?this.Hr.text("，"+a):this.Hr.text("")};
z.e.yc=function(a){this.UD.prop("checked",a);a&&this.dispatchEvent("bio_item_checked")};z.e.cb=function(){return this.content};z.e.getToken=function(){return this.token};z.e.Dg=function(){return this.UD.prop("checked")};z.y(FK,z.hj);var HK=null;z.e=FK.prototype;
z.e.render=function(a){var b=this;this.h=z.M("div","zu-bio-editor-wrap",[this.HT=z.M("div","zu-bio-editor-inner-wrap"),this.oc=z.M("div","zm-command",[this.zo=z.M("a",{name:"save",href:"#",className:"zg-r3px zg-btn-blue"},"完成")])]);var c=z.Y[4];c.length&&LK(this,c,{type:CK,token:"headline"});z.A(this.gG,function(a){LK(this,a[1],{type:"experience",ji:a[0][0],token:a[0][3]})},this);this.ET&&z.P(this.oc,!1);a.appendChild(this.h);this.o().g(this.oc,"click",this.Xa);this.g("bio_item_checked",function(a){z.A(this.items,
function(b){b!==a.target&&b.yc(!1)})});(0,window.$)(this.ua.Et()).click(function(){b.sa({action:"click_edit_topic_experience_close"})})};z.e.getSelection=function(){return this.items.find(function(a){return a.Dg()})};z.e.lz=function(){var a=this.getSelection();return a&&a.cb()};z.e.Xa=function(a){(a=this.vh(a.target))&&"save"===a.name&&(this.ua&&(MK(this),this.ua.F(!1)),this.dispatchEvent("change"),this.sa({action:"click_edit_topic_experience_submit"}))};
z.e.sa=function(a){this.dispatchEvent(Object.assign({type:"trackRequested",category:"edit_profile"},a))};z.y(NK,z.Q);z.e=NK.prototype;z.e.D=function(){RK(this);this.he.dispose();NK.v.D.call(this)};
z.e.w=function(a){this.h=a;this.cu=z.L("draft-saved-info",a);z.P(this.cu,!1);this.oI=z.L("draft-saved-time",a);this.IP=z.L("draft-clear-button",a);a=this.o().g(this.he,"tick",this.Gv).g(this.IP,"click",this.JP).g(this.pt,"keydown",this.kU);"oninput"in this.pt&&!z.C?a.g(this.pt,"input",this.JT):a.g(this.pt,"keydown",this.KT);var b=z.gm.ne&&1E3*z.gm.ne[1];b&&(SK(this,b),this.nD=(0,window.setInterval)((0,z.t)(function(){SK(this,b)},this),22E3))};
z.e.kU=function(a){(a.metaKey||a.ctrlKey)&&"s"===z.jl[a.keyCode]&&(this.EU(),this.isContentEditable||a.preventDefault())};z.e.Ky=function(){(0,window.$)(window).on("beforeunload.DraftSaver",(0,z.t)(function(){return"你的修改还未成功保存，确认离开该页面吗？"},this))};z.e.Xs=function(){(0,window.$)(window).off("beforeunload.DraftSaver")};z.e.JT=function(){QK(this);OK(this)};z.e.KT=function(a){z.Sn(a.keyCode)&&(QK(this),OK(this))};z.e.aa=function(a){this.bb.aa(a);this.bb.Yq()};z.e.cb=function(){return this.bb.zg()};
z.e.qL=function(){if(!this.Xd){var a=this.cb();if(a){PK(this,"保存中…");var a=(new z.uj).add("qid",this.qa).add("content",a).add("timestamp",(0,z.I)()),b=new z.ep;b.ajax("/answer/draft/save",a.toString(),"POST");this.o().g(b,"success",(0,z.t)(this.Rh,this));this.cJ=b;z.V.trackEvent(this.bb,{action:"AutoSave"})}}};z.e.TZ=150;z.e.Gv=z.Kr(NK.prototype.TZ,NK.prototype.qL,!0);z.e.FU=350;z.e.EU=z.Kr(NK.prototype.FU,NK.prototype.qL,!0);z.e.MT=3E3;
z.e.IT=z.Kr(NK.prototype.MT,function(){this.Xd||(this.cb()?this.Gv():TK(this))},!0);z.e.Rh=function(a){a=z.Dn(a.target);var b="",c=!1;0===a.r?(b="已保存",z.V.trackEvent(this.bb,{action:"AutoSave"})):(b=a.msg||"保存失败！请稍后再试。",c=!0);RK(this);z.P(this.cu,!0);PK(this,b,c);this.Xs();"保存成功"===a.msg&&this.dispatchEvent("saveContent");this.he.start()};
z.e.JP=function(a){a.preventDefault();z.T.confirm("清除草稿",this.CI?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",function(a){a&&(this.CI?(TK(this),this.bb.dispatchEvent("cancel_edit"),this.bb.pj()):(this.aa(""),TK(this),tI(this.bb)))},this)};z.y(VK,z.Q);
VK.prototype.B=function(){VK.v.B.call(this);var a=(0,window.$)('\x3cdiv class\x3d"carousel"\x3e\x3cdiv class\x3d"carousel-navigation-btn"\x3e\x3cdiv class\x3d"carousel-left-btn copyright-ico-prev"\x3e \x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"carousel-content"\x3e\x3c/div\x3e\x3cdiv class\x3d"carousel-navigation-btn"\x3e\x3cdiv class\x3d"carousel-right-btn copyright-ico-next"\x3e \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');this.rU=(0,window.$)(".carousel-left-btn",a);this.SX=(0,window.$)(".carousel-right-btn",a);
this.tF=(0,window.$)(".carousel-content",a);this.uF=(0,window.$)("\x3cdiv\x3e\x3c/div\x3e").addClass("carousel-navigation-dot-group");z.A(this.contents,function(a,c){this.tF.append(a);this.uF.append(this.bt[c])},this);this.tF.append(this.uF);WK(this,0);this.T(a[0]);this.H=(0,window.$)(this.h).addClass(this.className)};VK.prototype.C=function(){VK.v.C.call(this);this.rU.click(window.$.proxy(this.prev,this));this.SX.click(window.$.proxy(this.next,this))};
VK.prototype.next=function(){WK(this,this.oh+1)&&this.dispatchEvent({type:"rightShow",offset:this.oh})};VK.prototype.prev=function(){WK(this,this.oh-1)&&this.dispatchEvent({type:"leftShow",offset:this.oh})};var aL=void 0;z.p(bL,z.Pv);z.e=bL.prototype;z.e.mH=function(){var a=(0,window.$)("#zh-question-title h2.zm-editable-content")[0];return{title:a&&(/answer\/\d+$/.test(window.location.pathname)?z.qf(a):a.firstChild.nodeValue)||"",jl:this.Xj}};z.e.lz=function(){return this.Cx};z.e.Mv=function(a){this.xb=a};z.e.gb=function(a,b){this.enabled=a;this.iu?(this.pj(),this.fc=b,this.mc.innerHTML=this.fc):b&&(this.fc=b)};z.e.T=function(a){z.Pv.prototype.T.call(this,a);this.iu=!0;z.S.add(this.mc,"zu-answer-form-disabled-wrap")};
z.e.D=function(){this.du&&(z.N(this.du),this.PM=this.du=null);z.Pv.prototype.D.call(this)};z.e.jk=function(a){this.Mv(a.xb);this.eo&&(this.eo.checked=a.xb)};z.e.C=function(){z.Pv.prototype.C.call(this);this.o().g(z.sp,"anon_change",this.jk);fL(this)};
z.e.zf=function(){z.Pv.prototype.zf.call(this);var a=this.L(),b=z.Y.jb();this.du=a.B("div","zh-answer-form clearfix",[b?PI(this.OM):"",this.PM=a.B("div",null,[a.B("div","zu-answer-form-title",[b?OI(this.OM):"我来回答这个问题",this.kF=a.B("span")])])]);b&&!z.Y.uc&&(b=z.jm.value,"TOPIC"===z.jm.type?eL(this,b):cL(this,b),(0,window.$)(this.kF).on("click","a.zu-edit-button",function(a){z.ui({category:"edit_profile",action:"click_edit_topic_experience_start",label:"add_answer_box_edit_topic_experience",attributes:{text:(0,window.$)(a.target).text()}})}));
a.ju(this.du,this.Xj);this.o().g(this.PM,"click",this.Xa);z.Y.jb()?z.Y.Sd||gL(this,'\x3cdiv class\x3d"activate-mask-tip-answer"\x3e'+(z.Y.email?"为了正常使用知乎的提问、回答、评论和编辑功能，请验证你的邮箱。":"为了正常使用知乎的提问、回答、评论和编辑功能，请绑定你的手机或邮箱。")+"\x3c/div\x3e",'\x3cdiv class\x3d"zm-command"\x3e\x3ca class\x3d"zg-r3px zg-btn-blue" href\x3d"javascript:"\x3e我要激活\x3c/a\x3e\x3c/div\x3e'):gL(this,'\x3cdiv class\x3d"signin-mask-tip-answer"\x3e\x3c/div\x3e','\x3cdiv class\x3d"zm-command"\x3e\x3ca class\x3d"zg-r3px zg-btn-blue" href\x3d"javascript:"\x3e我要回答\x3c/a\x3e\x3c/div\x3e')};
z.e.Ht=function(a){switch(a){case "edit_bio":kL(this);break;case "cancel_delete":this.dispatchEvent(oM);break;case "answer_my_question":hL(this)}return!0};z.e.oe=function(){"editing"===this.status?this.Ub&&z.P(this.Ub,!0):this.Ub&&z.P(this.Ub,!1);z.P(this.Ad,!1);this.mc&&z.P(this.mc,!this.enabled)};
z.e.Vl=function(){var a=(0,z.Zv)(HO);this.oc=z.Ye(a({questionStatus:z.X.status,statusText:{suggest:"建议修改",evaluate:"建议修改",close:"关闭"}[z.X.status]}));this.zo=(0,window.$)(".submit-button",this.oc)[0];iL(this);(this.Ls=(0,window.$)("[name\x3dcopyright]",this.oc)[0]).value=z.Y.DA?"2":"1";jL(this);this.Ub.appendChild(this.oc);this.ready(function(){if(this.Ta&&this.Ta.on)this.Ta.on("load",this.mA,!1,this)});z.sm.fb||ZK()};
z.e.mA=function(){var a=new NK(this);z.Ac(this,a);this.o().g(a,"saveContent",function(){var a=!this.Zd&&this.Ta.bc.FullScreenPlugin;a&&sI(a)},!1,this);var b=uI(this);this.o().g(b,"focus",function(){a.he.start()}).g(b,"blur",function(){QK(a);a.Gv()}).g(this,"saveSuccess",function(){QK(a);TK(a)});a.w(this.oc);this.xG=a};z.e.yB=function(){var a=GK(),b=a.lz(),a=(a=a.getSelection())&&a.type;a===CK?cL(this,b):"experience"===a?eL(this,b):dL(this,"","填写话题经验，提升回答可信度")};
var oM="cancel_delete_answer",HO='\x3cdiv class\x3d"zm-command clearfix"\x3e'+(z.Y.uc?"":'\x3clabel class\x3d"zg-left anno-box"\x3e\x3cinput name\x3d"anno-checkbox" type\x3d"checkbox"\x3e 匿名 \x3cspan\x3e\x26nbsp\x3c/span\x3e\x3c/label\x3e ')+'\x3clabel class\x3d"zg-left copyright-box"\x3e\x3cselect name\x3d"copyright"\x3e\x3coption value\x3d1\x3e允许规范转载\x3c/option\x3e\x3coption value\x3d2\x3e允许付费转载\x3c/option\x3e\x3coption value\x3d0\x3e禁止转载\x3c/option\x3e\x3c/select\x3e'+(z.sm.fb?"":'\x3ca href\x3d"/terms#sec-licence-6" class\x3d"demo-trigger" target\x3d"_blank"\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark" style\x3d"margin-left: 5px;" id\x3d"copyright_question_mark" data-copyright-demo\x3d"true"\x3e\x3c/i\x3e\x3c/a\x3e')+
'\x3c/label\x3e \x3c% if (questionStatus !\x3d\x3d "normal") { %\x3e\x3cspan class\x3d"zg-gray-normal" style\x3d"margin-right:5px;"\x3e被\x3c%\x3d statusText %\x3e的问题不允许添加新的回答\x3c/span\x3e\x3ca class\x3d"zg-right" data-tooltip\x3d"s$b$为什么部分问题会被「关闭」「建议修改」？" href\x3d"/question/21290061 "\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark"\x3e\x3c/i\x3e\x3c/a\x3e\x3c% } %\x3e\x3cspan class\x3d"\x3c%\x3d (questionStatus !\x3d\x3d "normal" ? "hidden" : "") %\x3e zg-right"\x3e\x3ca class\x3d"submit-button zg-btn-blue" name\x3d"save" href\x3d"javascript:"\x3e发布回答\x3c/a\x3e\x3c/span\x3e\x3cdiv class\x3d"draft-controls zg-right '+
(z.sm.fb?"draft-controls-mobile":"")+'"\x3e\x3cspan class\x3d"draft-saved-info"\x3e\x3ca class\x3d"draft-clear-button goog-inline-block" href\x3d"#" data-tooltip\x3d"s$b$删除草稿"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e\x3cspan class\x3d"hide-text"\x3e清除草稿\x3c/span\x3e\x3c/a\x3e\x3cspan class\x3d"draft-saved-time"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e';z.y(lL,z.Q);lL.prototype.B=function(){lL.v.B.call(this);this.h=z.Ye(IO)};lL.prototype.C=function(){lL.v.C.call(this);this.Ha=(0,window.$)(this.m());this.tn=z.nt("answer",this.UE);var a=z.Ew(window.location.protocol+"//"+window.location.hostname+"/question/"+this.mX+"/answer/"+this.UE);(0,window.$)(".js-qrcode-image",this.Ha).attr("src",a);this.tc()};
lL.prototype.tc=function(){var a=this;(0,window.$)("button.weibo",this.Ha).click(function(){a.tn.done(function(a){a.r||(z.tD(a.msg.sina),z.wi("share","click_share_answer_to_weibo_start","answer_box_after_submit_answer"))})})};var IO='\x3cdiv class\x3d"answer-share-tip"\x3e分享我的回答到\x3cbutton class\x3d"wechat hidden-phone"\x3e\x3cdiv class\x3d"qr-code"\x3e扫描二维码\x3cimg class\x3d"js-qrcode-image" alt\x3d"微信分享二维码"\x3e\x3c/div\x3e\x3cspan class\x3d"ico z-ico-wechat"\x3e\x3c/span\x3e微信\x3c/button\x3e\x3cbutton class\x3d"weibo"\x3e\x3cspan class\x3d"ico z-ico-weibo"\x3e\x3c/span\x3e微博\x3c/button\x3e\x3c/div\x3e';z.y(mL,z.Pv);var pL=[{value:"精简文字描述",label:"精简文字描述"},{value:"补充必要的信息",label:"补充必要的信息"},{value:"改进标点或格式",label:"改进标点或格式"},{value:"other",label:"其他"}];z.e=mL.prototype;z.e.w=function(a){mL.v.w.call(this,a);this.o().g(z.sp,"anon_change",this.jk)};z.e.jk=function(a){this.KI||z.S.enable(this.h,"zm-editable-disabled",a.xb)};
z.e.Vl=function(){mL.v.Vl.call(this);this.kC=z.M("div",{"class":"zm-editable-require-reason-wrap",style:"padding:10px 0 0 0"},[z.M("a",{"class":"zg-right zg-link-litblue",href:"/question/19550238/answer/12202028",target:"_blank"},z.X.uc?"":"为什么问题可以被公共编辑？"),oL(),this.BJ=z.M("span"),this.oX=z.M("div",{"class":"zg-form-text-input",style:"height:22px;margin:10px 0 0 0;display:none"},this.nX=z.M("textarea",{style:"width:100%;height:22px !important;min-height:22px !important;"}))]);z.cf(this.kC,this.oc);
this.Oq&&qL(this," * 必选","zg-gray-normal");var a=z.Me("select",null,this.kC)[0];this.o().g(a,"change",function(){z.P(this.oX,"other"===a.value);qL(this," * 必选","zg-gray-normal")})};
z.e.Rh=function(a){var b=z.Me("select",null,this.kC)[0],c=b.value;if(this.Oq){if("none"===c){qL(this,"请选择一个修改理由");return}if("other"===b.value&&(c=z.mr(this.nX.value),!c)){qL(this,"请填写修改理由");return}}"title"===this.Ss&&-1===a.indexOf("?")&&-1===a.indexOf("？")?qL(this,"还没有输入问号"):("none"===c&&(c=""),this.params=["id\x3d"+this.qa+"\x26reason\x3d"+(0,window.encodeURIComponent)(c)+"\x26question_id\x3d"+this.qa],this.dispatchEvent("change"),mL.v.Rh.call(this,a),qL(this,"* 必选","zg-gray-normal"),this.Oq=!0)};
z.e.zg=function(){return this.Zd&&this.zW?(0,z.Fr)(z.$o(this.Ta.value)):mL.v.zg.call(this)};z.e.th=function(){(0,window.$)(window).on("beforeunload.EditorWithReason",(0,z.t)(function(){return"你对问题的修改还未保存，确认离开该页面吗？"},this))};z.e.Hi=function(){(0,window.$)(window).off("beforeunload.EditorWithReason")};z.e.pj=function(){mL.v.pj.call(this);this.Hi()};z.e.Xg=function(){mL.v.Xg.call(this);this.th()};z.y(rL,z.Q);rL.prototype.K=function(a,b){rL.v.K.call(this,a,b);this.o().g(a,"beforeexpand",this.SS)};rL.prototype.SS=function(a){var b=a.target;z.Ch(this,function(a){b!==a&&a.pd()&&a.Lc(!1)})};rL.prototype.dispose=function(){this.o().dispose();rL.v.dispose.call(this)};z.y(sL,z.R);sL.prototype.C=function(){sL.v.C.call(this);z.Zh(this,490);(0,window.$)(this.m()).addClass("user-guiding-dialog")};z.y(yL,z.Q);z.e=yL.prototype;z.e.B=function(){yL.v.B.call(this);this.h=z.M("div",{className:"question-invite-panel"})};z.e.C=function(){yL.v.C.call(this);this.H=(0,window.$)(this.m());z.V.Ya(this,{module:"InvitationCard"})};z.e.D=function(){yL.v.D.call(this);this.Y&&this.Y.dispose();delete this.Y;delete this.Jm;delete this.yk};z.e.pd=function(){return this.vb};z.e.ii=function(){this.Lc(!this.vb)};
z.e.Lc=function(a){a!==this.pd()&&(this.dispatchEvent(a?"beforeexpand":"beforecollapse"),a&&!this.Kc&&zL(this),this.vb=a,this.H.toggle(a),this.dispatchEvent(a?"expand":"collapse"))};
z.e.kA=function(a){var b=this,c=(0,z.Zv)(JO),d=new z.Qs(a,{Ce:20,source:"/question/ac/invite-people?question_token\x3d"+this.Eq,ej:this.m(),placeholder:"搜索你想邀请的人",rd:function(a,b,d){d.innerHTML=c(a.data)},filter:function(a){return z.lb(a,function(a){return!EL(b,a.member_hash)})},select:function(){return""},format:function(a){return a}});d.jj=function(){return!1};var f=d.M;f.className="suggest-persons search";f.Yh="person";f.Vg(!1);var g=(0,window.$)(".suggest-persons-wrapper",this.h),h=z.Wh(function(){(0,window.$)(f.m()).on("click",
"button",window.$.proxy(b.DH,b))}),k=(0,window.$)(".invite-title .spinner-gray");(0,window.$)(".search-input",this.h).on("input",function(){k.css("display","inline-block")});d.addEventListener("show",function(a){var c=this;k.hide();var d=f.m();g.hide();(0,window.$)(".no-result-tips",b.h).remove();var v=(0,window.$)(".person",d);5<v.length&&(v.hide().slice(0,5).show(),(0,window.$)('\x3ca class\x3d"js-more" href\x3d"#"\x3e更多搜索结果\x3c/a\x3e').appendTo(d).one("click",function(){var b=this;z.V.trackEvent(a.target,
{action:"LoadMore",element:"Button"});v.each(function(a,c){"none"===c.style.display&&xL(c,b.h)});v.show();(0,window.$)(this).remove();return!1}));h();v.each(function(a,b){wL(b);"none"!==b.style.display&&xL(b,c.h)})});d.addEventListener("hide",function(){k.hide();a.value.length?(0,window.$)(".no-result-tips",b.h).length||(g.hide(),(0,window.$)('\x3cspan class\x3d"no-result-tips"\x3e没有找到你想邀请的人\x3c/span\x3e').appendTo(b.h)):(g.show(),(0,window.$)(".no-result-tips",b.h).remove())});d.addEventListener("dismiss",
function(){(0,window.$)(".no-result-tips",b.h).remove();g.show()});this.Y=d};z.e.kV=function(){this.pd()?(this.Y&&this.Y.dispose(),zL(this)):this.Kc=!1};z.e.DR=function(){z.qp(0)};
z.e.DH=z.Dq(function(a){var b=a.target,c=this.DK((0,window.$)(b).parents(".person"));this.Jm&&"pending"===this.Jm.state()&&this.Jm.abort();var d=b.getAttribute("data-type"),f=z.S.has(b,this.yI),g=(0,z.t)(function(d){d?(z.V.trackEvent(a.target,{action:"Invite",element:"Button"}),GL(this,b,!0),this.yk.unshift(c),IL(this),FL(this,c.id,!0),this.BP()):(z.V.trackEvent(a.target,{action:"UnInvite",element:"Button"}),GL(this,b,!1),HL(this,c.id),FL(this,c.id,!1))},this);f?(this.Jm=LI(this.Eq,c.id),g(!1)):(this.Jm=
window.$.post("/question/askpeople",{qid:this.Eq,uid:c.id,_source_type:d,op:"add"}).done(function(a){a.r&&(z.T.message(a.msg),g(!1))}),g(!0),DL(this,d))},!0);z.e.ER=function(a){a=a.target.getAttribute("data-uid");LI(this.Eq,a);FL(this,a,!1);HL(this,a)};z.e.BP=z.Wh(function(){z.Y.Uh&&window.$.post("/question/popup",{action:"invite",question_token:this.Eq},function(a){a&&vL(new sL,a)})});
z.e.DK=function(a){var b=(0,window.$)(".zm-item-link-avatar",a),c=(0,window.$)(".zg-link",a);return{id:String((0,window.$)("button",a).data("uid")),avatar:(0,window.$)("img",b).attr("src"),fullname:c.text(),url_token:b.attr("href").split("/").slice(-1)[0]}};
var AL='\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cdiv class\x3d"spinner"\x3e正在加载，请稍等 \x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e\x3c/div\x3e',KL='你已邀请 \x3cspan class\x3d"invited-shortlist"\x3e\x3c% helper.each(persons.slice(0, 2), function(person, i, sliced) { %\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray" target\x3d"_blank"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3c%\x3d i !\x3d\x3d sliced.length - 1 ? "、" : ""%\x3e\x3c% }); %\x3e\x3c%\x3dhelper.fullList()%\x3e\x3c/span\x3e\x3c% if (persons.length \x3e 2) { %\x3e 等 \x3c%\x3dpersons.length%\x3e 人 \x3c% } %\x3e\x3c% if (persons.length \x3c maxInvites) { %\x3e ，还可以邀请 \x3c%\x3dmaxInvites - persons.length%\x3e 人\x3c% } %\x3e',JL=
'\x3cdiv class\x3d"invited-hovercard"\x3e\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cul class\x3d"invited-fulllist"\x3e\x3c% helper.each(persons, function(person, i) { %\x3e\x3cli\x3e\x3ca title\x3d"\x3c%-person.fullname%\x3e" class\x3d"zm-item-link-avatar" href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" target\x3d"_blank"\x3e\x3cimg src\x3d"\x3c%\x3dperson.avatar%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray" title\x3d"\x3c%-person.fullname%\x3e" target\x3d"_blank"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3cbutton class\x3d"cancel-button zg-link-btn zg-link-gray" data-uid\x3d"\x3c%\x3dperson.id%\x3e"\x3e收回邀请\x3c/button\x3e\x3c/li\x3e\x3c% }) %\x3e\x3c/ul\x3e\x3c/div\x3e',
JO='\x3ca data-hovercard\x3d"p$t$\x3c%\x3durl_token%\x3e" class\x3d"zm-item-link-avatar" href\x3d"\x3c%\x3dprofile_url%\x3e" title\x3d"\x3c%\x3dfullname%\x3e" target\x3d"_blank"\x3e\x3cimg src\x3d"\x3c%\x3davatar_path%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3cdiv class\x3d"content"\x3e\x3cbutton class\x3d"invite-button zg-btn zg-btn-green" data-uid\x3d"\x3c%\x3dmember_hash%\x3e" data-type\x3d"search"\x3e邀请回答\x3c/button\x3e\x3cdiv class\x3d"describe"\x3e\x3cspan data-hovercard\x3d"p$t$\x3c%\x3durl_token%\x3e" href\x3d"\x3c%\x3dprofile_url%\x3e" class\x3d"author-link-line" target\x3d"_blank"\x3e\x3ca class\x3d"zg-link author-link"\x3e\x3c%\x3dhighlighted_fullname%\x3e\x3c/a\x3e\x3c% if (badge) { %\x3e\x3c% if ((is_org || badge.identity) \x26\x26 badge.best_answerer) { %\x3e\x3ci class\x3d"icon icon-badge-id-an icon-badge" data-tooltip\x3d"s$b$优秀回答者 · 已认证的\x3c% if (is_org) { %\x3e机构\x3c% } else { %\x3e个人\x3c% } %\x3e"\x3e\x3c/i\x3e\x3c% } else if (is_org) { %\x3e\x3cspan class\x3d"OrgIcon sprite-global-icon-org-14" data-tooltip\x3d"s$b$已认证的机构"\x3e\x3c/span\x3e\x3c% } else if (badge.identity) { %\x3e\x3ci class\x3d"icon icon-badge-identity icon-badge" data-tooltip\x3d"s$b$已认证的个人"\x3e\x3c/i\x3e\x3c% } else if (badge.best_answerer) { %\x3e\x3ci class\x3d"icon icon-badge-best_answerer icon-badge" data-tooltip\x3d"s$b$优秀回答者"\x3e\x3c/i\x3e\x3c% } %\x3e\x3c/span\x3e\x3c% } %\x3e\x3c% if (badge) { %\x3e\x3c% if (badge.best_answerer) { %\x3e\x3cspan class\x3d"badge-summary"\x3e\x3c% if (badge.best_answerer.topics.length \x3d\x3d\x3d 1) { %\x3e\x3ca href\x3d"\x3c%\x3dprofile_url%\x3e#hilightbadge" target\x3d"_blank"\x3e\x3c%\x3dbadge.best_answerer.topics[0].name%\x3e话题优秀回答者\x3c/a\x3e\x3c/span\x3e\x3c% } else if (badge.best_answerer.topics.length \x3e 1) { %\x3e\x3ca href\x3d"\x3c%\x3dprofile_url%\x3e#hilightbadge" target\x3d"_blank"\x3e\x3c%\x3dbadge.best_answerer.topics[0].name%\x3e等 \x3c%\x3dbadge.best_answerer.topics.length%\x3e 个话题优秀回答者\x3c/a\x3e\x3c/span\x3e\x3c% } %\x3e\x3c% } else if (badge.identity) { %\x3e，\x3cspan class\x3d"badge-summary"\x3e\x3c%-badge.identity.description%\x3e\x3c/span\x3e\x3c% } %\x3e\x3c% } %\x3e\x3c% if (headline) { %\x3e \x3cspan class\x3d"bio" title\x3d"\x3c%-headline%\x3e"\x3e\x3c%\x3dhighlighted_headline%\x3e\x3c/span\x3e\x3c% } %\x3e\x3c/div\x3e\x3cdiv class\x3d"reason"\x3e\x3c% if (detailed_info) {%\x3e \x3c%\x3ddetailed_info%\x3e\x3c% } %\x3e\x3c% if (topic["answer_num"]) {%\x3e在 \x3ca href\x3d"\x3c%\x3dprofile_url%\x3e/topic/\x3c%\x3dtopic["url_token"]%\x3e/answers" data-hovercard\x3d"t$b$\x3c%\x3dtopic["url_token"]%\x3e" data-token\x3d"\x3c%\x3dtopic["url_token"]%\x3e" data-topicid\x3d"\x3c%\x3dtopic["id"]%\x3e" target\x3d"_blank"\x3e \x3c%\x3dtopic["name"]%\x3e \x3c/a\x3e 话题下有 \x3c%\x3dtopic["answer_num"]%\x3e 个回答 \x3c% } %\x3e\x3c/div\x3e\x3c/div\x3e';z.y(LL,z.Q);z.e=LL.prototype;
z.e.C=function(){var a=this;LL.v.C.call(this);var b=z.L("zm-meta-panel",this.h);this.o().g(b||this.h,"click",this.DB);ML(this);z.sm.fb||OL(this);this.o().g(this,"click!",function(a){"comment"===a.namespace&&a.Oc.fill("label","question")});this.g("trackRequested",function(a){a.label="question_box";z.ui(a)});z.V.Ya(this,{module:"QuestionItem"},function(){return{card:{card_type:"Content",content:{type:"Question",token:a.data.Ga.toString()}}}});"#showWechatShareTip"===window.location.hash&&window.location.pathname.match(/\/question\/([\d]+)$/)&&
(z.V.trackEvent(this,{action:"Share",element:"QRCode"},{share:{type:"Wechat"}}),z.ui({category:"share",action:"scan_share_question_to_wechat_start"}),window.location.hash="")};z.e.Cp=function(){var a=this.h.querySelector("a[name\x3dreport-question]");if(a){var b=this;a.addEventListener("click",function(){(new z.Jz({type:"question",id:b.data.qa,Ga:b.data.Ga})).render();z.V.trackEvent(b,{action:"ReportIntent",element:"Button"})})}};
z.e.Fh=function(){var a=(0,window.$)('a[name\x3d"share"]',this.m()).get(0);a&&z.uD(a,"question",this.data.Ga,window.location.protocol+"//"+window.location.host+"/question/"+this.data.Ga).yb(this)};
z.e.DB=function(a){var b=(a=z.yr(this.h,a.target))&&a.name;if(b){switch(b){case "addcomment":"添加评论"===window.$.trim((0,window.$)(a).text())?z.Dq(this.uH).call(this,a):this.uH(a);break;case "remove":QL(this);break;case "orgLock":RL(this);break;case "orgUnlock":SL(this);break;case "admin":PL(this,a);break;case "invite":this.AA.ii(),this.dispatchEvent(new z.WB("click!invitation",{category:"invitation",action:(this.AA.pd()?"show":"hide")+"_ask_to_answer_card",label:"?",value:this.data.Te}))}this.Gf&&
(this.Gf.update(),z.Hr(this.Gf.h))}};z.e.uH=function(a){this.Ja.ii();this.Ja.pd()&&this.Ja.qj("view_comments",(0,window.parseInt)(z.qf(a),10)||0)};z.e.SP=function(a){this.BE.X(a.msg.action);this.BE.Vq(a.msg.caption)};z.y(TL,z.Pv);z.e=TL.prototype;z.e.C=function(){TL.v.C.call(this);this.ready(function(){if(this.Ta&&this.Ta.on)this.Ta.on("load",this.mA,!1,this)})};
z.e.mA=function(){var a=new NK(this,!0);z.Ac(this,a);this.o().g(a,"saveContent",function(){var a=!this.Zd&&this.Ta.bc.FullScreenPlugin;a&&sI(a);(0,window.$)(this.ys).text("保存草稿并离开");(0,window.$)(this.h).find(".zu-edit-button span").text("修改（有未发布的编辑草稿）")}).g(a,"clearContent",function(){(0,window.$)(this.ys).text("取消");(0,window.$)(this.h).find(".zu-edit-button span").text("修改")});var b=uI(this);this.o().g(b,"focus",function(){a.he.start()}).g(b,"blur",function(){QK(a);this.VP!==this.zg()&&a.Gv()}).g(this,
"saveSuccess",function(){delete z.gm.ne;QK(a);TK(a)}).g(this,"save_unchanged",function(){delete z.gm.ne;QK(a);TK(a)});a.w(this.oc);z.gm.ne&&z.gm.ne[0]&&(0,window.$)(this.ys).text("保存草稿并离开")};
z.e.Vl=function(){this.oc=z.M("div","zm-command",[(0,window.$)('\x3cdiv class\x3d"draft-controls zg-left"\x3e\x3cspan class\x3d"draft-saved-info"\x3e\x3ca class\x3d"draft-clear-button goog-inline-block" href\x3d"#" data-tooltip\x3d"s$b$取消编辑并删除草稿"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e\x3cspan class\x3d"hide-text"\x3e清除草稿\x3c/span\x3e\x3c/a\x3e\x3cspan class\x3d"draft-saved-time"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e')[0],this.ys=z.M("a",{"class":"zm-command-cancel",name:"cancel",
href:"#"},"取消"),this.zo=z.M("a",{"class":"zg-r3px zg-btn-blue",name:"save",href:"#"},"发布")]);this.Ub.appendChild(this.oc)};z.e.az=function(){var a=this;window.$.get("/draft/get",{qid:this.Rq},function(b){b.r||(a.Ov(b.msg),a.VP=b.msg)})};z.e.kH=function(){var a=[];if(!this.disabled){var b="修改";z.gm.ne&&z.gm.ne[0]&&(b="修改（有未发布的编辑草稿）");a.push('\x3ca href\x3d"javascript:;" class\x3d"zu-edit-button" name\x3d"edit"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e\x3cspan\x3e'+b+"\x3c/span\x3e\x3c/a\x3e")}return a.join("")};z.y(UL,z.OD);var VL={qa:null,ib:null,oG:!1,ry:z.X};z.e=UL.prototype;z.e.Vi=function(){UL.v.Vi.call(this,{NF:".zm-editable-content"})};z.e.IL=function(){if(z.Om||this.options.oG)return!1;var a=(0,window.$)(".js-collapse-body",this.h)[0];return!!a&&1<a.offsetHeight/z.Lm.size.height};z.e.nw=function(){z.wi("view_answer","click_expand_answer","answer_box_expand_answer")};z.e.mw=function(){z.wi("view_answer","click_collapse_answer","answer_box_collapse_answer")};z.e.tJ=function(){this.aq()};
z.e.C=function(){var a=this;UL.v.C.call(this);WL(this);this.uf=z.L("zm-item-answer-author-info",this.h);this.Sh&&this.uf&&(this.vK=(this.xb=z.Wa(this.uf.innerHTML,"匿名用户"))?null:this.uf.innerHTML.replace(/src=".+?"/g,'src\x3d"'+z.Y[2]+'"'),this.Mv(this.ry.xb),this.o().g(this.uf,"click",function(a){"cancel-anon"===a.target.name&&z.qp(!1)}));this.hc();this.g("trackRequested",function(b){b.label="answer_box";b.value=(0,window.$)(a.h).index(".zm-item-answer")+1;z.ui(b)});"#showWechatShareTip"===window.location.hash&&
window.location.pathname.match(/\/question\/([\d]+)\/answer\/([\d]+)$/)&&(z.V.trackEvent(this,{action:"Share",element:"QRCode"},{share:{type:"Wechat"}}),z.ui({category:"share",action:"scan_share_answer_to_wechat_start"}),window.location.hash="")};
z.e.hc=function(){this.uf&&this.o().g(this.uf,"click",this.Xa);this.Sh&&(this.$O=z.Y);this.o().g(z.sp,"anon_change",function(a){this.Sh?this.Mv(a.xb):this.bh&&this.WM&&this.bh.getState()===z.FD.gh&&z.LD(this.WM)});XL(this);(0,window.$)(this.h).on("focusin focusout",function(a){(0,window.$)(this).toggleClass("focusin","focusin"===a.type)})};z.e.vh=function(a){return z.yr(this.h,a)};
z.e.Xa=function(a){var b=this.vh(a.target);if(b=b&&b.name)"edit"===b?(b=GK(),this.Dx||(IK(b),this.o().g(b,"change",this.yB).g(b,"trackRequested",function(a){a.label="answer_box_edit_topic_experience";z.ui(a)})),this.Dx=!0,KK(b),z.ui({category:"edit_profile",action:"click_edit_topic_experience_start",label:"answer_box_edit_topic_experience",attributes:{text:(0,window.$)(a.target).text()}})):"complex"===b&&(a=z.L("zm-item-answer-summary",this.h),b=z.L("zm-item-rich-text",this.h),z.P(a,!1),z.P(b,!0))};
z.e.yB=function(){var a=GK().lz()||"",b=z.L("bio",this.uf);if(!b){var c=z.L("author-link",this.uf),b=z.M("span","bio");z.df(b,c)}a&&(a="，"+ZI(a),a=z.Ma(a));b.title=a;b.innerHTML=a};
z.e.Mv=function(a){a?this.uf.innerHTML='匿名用户\x3ca class\x3d"zg-link-gray cancel-anon" href\x3d"#" name\x3d"cancel-anon"\x3e取消匿名\x3c/a\x3e':(a=z.Y.uc?"":'\x3ca name\x3d"edit" class\x3d"zu-edit-button" href\x3d"#"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改话题经验\x3c/a\x3e',this.vK?this.uf.innerHTML=this.vK+a:(a=[],a.push(MI()),a.push(NI(z.Y,"zm-item-answer-creator")),this.uf.innerHTML=a.join("")))};
z.e.nk=function(){var a=this,b=(0,window.$)(this.m());b.slideUp(function(){a.Sh?(a.Mp=!0,a.Zw="set_delete",a.dispatchEvent("change")):(a.dispose(),b.remove())})};z.e.sa=function(a){this.dispatchEvent(Object.assign({type:"trackRequested"},a))};z.y(ZL,z.Q);z.e=ZL.prototype;z.e.init=function(){z.UG.K(this);this.w(window.document.body)};z.e.C=function(){ZL.v.C.call(this);bM(this);this.mq=new qK;this.o().g(this.mq,"change",this.SB);this.mq.init();this.GL();var a=z.J("zh-question-meta-wrap");a&&(this.tv=new LL(this.data),this.K(this.tv),this.tv.w(a),this.tv.yb(this));aM(this);(a=z.tm.topic_errors_info)&&z.tn(a);this.sA();$L()};
z.e.GL=function(){this.data.Ga=z.X.Ga;this.Vi();this.Hy&&(cM(this),dM(this));kM(this);(this.Zx=z.J("zg-question-suggested-topics"))&&this.o().g(this.Zx,"click",this.hV);this.Fp();this.o().g(window,"hashchange",function(a){a=a.sc;a.oldURL&&"writing"===a.oldURL.split("#")[1]||pM(this)});gM(this);nM(this);jM(this);pM(this,null);fM(this);z.hm&&(0,window.setTimeout)(function(){window.location.href=z.hm},5E3)};
z.e.sA=function(){this.VK?(0,z.VG)("answer",this.vi[this.VK].Ga,"read"):(0,z.VG)("question",this.data.Ga,"read");this.o().g(this,["click!","show!"],function(a){"comment"===a.namespace&&a.Oc.fill("category","question_answer").fill("label","question_answer");"invitation"===a.namespace&&a.Oc.fill("label","question_page")})};
z.e.SB=function(){this.eT=!0;this.hl=(0,window.$)(this.mq.aV)[0];z.df(this.hl,z.L("zu-top"));z.P(this.hl,!0);z.sm.fb||(this.dk=new z.jv,this.dk.w(this.hl),wI(this.dk));this.o().g(this.hl,"click",this.AH);pM(this)};z.e.Vi=function(){this.Hy?eM(this,this.wT):eM(this,z.r)};
z.e.wT=function(a){"close"===z.X.status||z.X.Np||(a=a.target.m(),this.Yb=new mL(this.data.qa,"/question/detail","content",!0,null),nL(this.Yb,QI(this.data.Uh)),z.L("zm-editable-content",a).innerHTML&&(this.Yb.Oq=!0),this.Yb.w(a),this.o().g(this.Yb,"click_edit",function(){z.U.Bb("ga_question_supplement_edit_start")}),this.o().g(this.Yb,"cancel_edit",function(){z.U.Bb("ga_question_supplement_edit_cancel")}),this.o().g(this.Yb,"save_changed",function(){z.U.Bb("ga_question_supplement_edit_save_changed")}),
this.o().g(this.Yb,"save_unchanged",function(){z.U.Bb("ga_question_supplement_edit_save_unchanged")}),this.Yb.addEventListener("beforeedit",z.zE({Gq:!0})))};
z.e.AH=function(a){if("close"===a.target.name){if(this.dk&&(z.mv(this.dk),z.lv(this.dk,!1),window.history.replaceState)){a=new z.oj(window.location.href);var b=a.Ed();b.remove("q");b.remove("psq");window.history.replaceState({},"",a.kf+"?"+b.toString())}z.P(this.hl,!1);z.P(this.uv,!1)}else if("A"===a.target.tagName&&"zh-question-suggest-reask"===a.target.id&&(z.P(this.uv,!1),z.Tv.ba().show()),b="a"===(0,window.$)(a.target).prop("tagName").toLowerCase()?a.target:this.vh(a.target,"A"))a.preventDefault(),
a.stopPropagation(),a=b.getAttribute("data-source")||b.href,b=a.indexOf("#"),a=0>b?null:a.substr(b+1),pM(this,a?(0,window.decodeURIComponent)(a):a)};z.e.yS=function(){var a=this.ti,b=a.m(),c=a.Se.cb()[0];z.P(b,!1);c=z.Ye((0,z.ab)(c));z.cf(c,b);this.vi[a.ib]=null;this.gs=z.lb(this.gs,function(b){return b!==a.ib},this);var d=999;this.tx=z.lb(this.tx,function(b){b.aid===a.ib&&(d=b.vote);return b.aid!==a.ib},this);z.N(b);a.dispose();hM(this,c,d)};
z.e.xB=function(a){a=a.target;if(a instanceof UL){var b=a.m();switch(a.Zw){case "collap":this.vo.appendChild(b);z.S.add(b,"zm-item-collapsed");this.data.Te--;fM(this);break;case "cancel_collap":this.js.appendChild(b);z.S.remove(b,"zm-item-collapsed");iM(this,b);this.data.Te++;fM(this);break;case "set_delete":jM(this);this.data.Te--;fM(this);break;case "cancel_delete":iM(this,this.vi[this.$i].m()),jM(this),this.data.Te++,fM(this)}}};z.e.eH=function(a){return this.vi[a]};
z.e.UY=function(a){(a=z.yr(this.Di,a.target))&&a.name&&("expand"===a.name?(this.NP||mM(this),lM(this,!0)):lM(this,!1))};z.e.rV=function(){var a=this.vi[this.$i],b;a?(YL(a),iM(this,a.m())):(b=this.Lk,a=new z.ep(!0),this.o().ta(a,"success",function(){window.location.href="/question/"+z.X.Ga+"/answer/"+b.url_token}),a.ajax("/answer/unremove","aid\x3d"+b.id))};
z.e.iV=function(){var a=this.bb,b=a.eo&&a.eo.checked,c=Number(a.Ls.value),a={modal:!0,title:"确认放弃匿名身份？",content:"你在该问题下的赞同和关注行为将以实名显示。"},d=(0,z.t)(function(){if(!this.xhr||!this.xhr.Jc()){var a=this.bb.zg();if(a){var d=new z.ep(!0),h=new z.uj,k=b?1:0;h.add("id",this.qa).add("content",a).add("anon",k).add("copyright_status",c);d.on("success",function(){z.X.xb!==k&&(z.X.xb=k,z.sp.dispatchEvent(new z.rp(k)));z.V.trackEvent(this.bb,{action:"Ok"});var a=z.Dn(this.xhr);a?a.r?z.T.alert(a.msg):(a=z.Ye((0,z.ab)(a.msg[0])),
this.js.appendChild(a),hM(this,a,this.gs.length),z.rr(a),jM(this),QK(this.bb.xG),TK(this.bb.xG),this.bb.dispose(),z.X.xb||(new lL(this.data.Ga,this.vi[this.$i].Ga)).render((0,window.$)(".zu-main-content-inner").get(0)),this.data.Te++,fM(this)):z.T.message("网络异常")},!1,this);d.ajax("/answer/add",h.toString());this.xhr=d}}},this);z.X.xb&&!b?z.T.confirm(a,function(a){a&&d()}):d()};z.e.vh=function(){};
z.e.hV=function(a){if((a=this.vh(a.target))&&a.name){var b=a.name;"close"===b?z.P(this.Zx,!1):"addtag"===b&&(this.Ma.Pe(a.id.split("-")[1],a.innerHTML),z.P(a,!1))}};z.e.Fp=function(){this.TC=new xK(this.qa);this.TC.init()};z.y(qM,ZL);z.e=qM.prototype;z.e.GL=function(){(this.Ys=z.J("zh-single-answer-disable-wrap"))&&this.o().g(this.Ys,"click",this.QX);tM(this);this.Fp();wM();this.Vi();var a=(0,window.$)("#zh-question-answer-collections \x3e .zh-general-list").get(0);if(a){var b=new z.El({use:["autoload","nodeSource"]});this.K(b);b.w(a)}sM();rM(this)};z.e.sA=function(){this.o().g(this,["click!","show!"],function(a){"invitation"===a.namespace&&a.Oc.fill("label","answer_page")});qM.v.sA.call(this)};
z.e.QX=function(a){a.target&&a.target.name&&YL(this.Ib)};z.e.eH=function(a){if(this.Ib.ib===a)return this.Ib};z.e.aP='\x3ch3\x3e关于作者\x3c/h3\x3e\x3c% if (author) { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"/people/\x3c%\x3d author.url_token %\x3e" tabindex\x3d"-1"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"\x3c%\x3d author.avatar_path.replace("_s.","_m.") %\x3e"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e\x3ca href\x3d"/people/\x3c%\x3d author.url_token %\x3e"\x3e\x3c%\x3d author.fullname %\x3e\x3c/a\x3e\x3c/h2\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e\x3c%\x3d author.headline || "" %\x3e\x3c/div\x3e\x3c/div\x3e\x3c% } else { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"javascript:;"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"http://img.zhihu.dev:4080/66/6b/666b0abfc_m.jpg"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e匿名用户\x3c/h2\x3e\x3c/div\x3e\x3c% } %\x3e';
z.e.Fp=function(){this.TC=new xK(this.qa,this.Ib);this.TC.init();var a=z.J("js-sidebar-author-info");a&&(new gJ(a)).init();var b=(0,window.$)("#react-warrant-sidelist");b.length&&z.$w("AnswerWarrant").then(function(a){return a.renderSide(b)})};z.e.xB=function(a){a=a.target;if(a instanceof UL)switch(a.Zw){case "collap":z.S.add(a.m(),"zm-item-collapsed");break;case "cancel_collap":z.S.remove(a.m(),"zm-item-collapsed");break;case "set_delete":case "cancel_delete":vM(this),window.location.reload()}};xM.prototype={Vc:function(a){if(a)this.xF.push(a);else{var b={current:this.Af,kp:this.kp(),Tt:this.Tt()};z.A(this.xF,function(a){(0,window.setTimeout)(function(){a.call(null,b)})})}},remove:function(a){a=this.items.indexOf(a);-1!==a&&(this.items.splice(a,1),this.cq=Math.ceil(this.items.length/this.an),this.Vc());return a},kp:function(){return this.Af<this.cq},Tt:function(){return 1!==this.Af},next:function(){this.kp()&&(this.Af+=1,this.Vc())},prev:function(){this.Tt()&&(--this.Af,this.Vc())},random:function(a){if(2<=
this.cq){for(var b=[],c=1;c<this.cq+1;c++)b.push(c);0!==a&&z.tb(b,this.Af);this.Af=b[Math.floor(Math.random()*b.length)]}else a===this.an&&this.items.reverse(),this.Af=1;this.Vc();return this.items.length>this.an}};z.p(BM,z.Q);BM.prototype.C=function(){z.Q.prototype.C.call(this);this.ub=(0,window.$)(this.m());this.Or=this.ub.find(".js-pager");this.Za=this.ub.find(".js-list");this.oN=this.ub.find(".js-hidden-list");this.gz=(this.LL=!!this.ub.closest(".zu-main-sidebar").length)?"zg-follow":"zg-btn-follow";this.yZ=this.LL?"zg-unfollow":"zg-btn-unfollow";CM(this);FM(this)};var GM="follow_topic",HM="unfollow_topic",DM=6;z.p(IM,z.Q);z.e=IM.prototype;z.e.init=function(){this.w((0,window.$)(".js-topic-feed-page")[0])};
z.e.C=function(){z.Q.prototype.C.call(this);this.ub=(0,window.$)(this.m());this.WT=!this.ub.find(KM).length;this.ni=this.ub.find(".js-topic-cat-main");this.Tn=this.ub.find(".js-topic-title");this.Lr=this.ub.find(".js-feed-switcher");var a=(0,window.$)(".topic-recommend");if(a.length){var b=new BM;b.w(a[0]);this.o().g(b,GM,this.gS).g(b,HM,this.WS)}this.Za=this.ub.find(".zh-general-list");this.Za.length&&TM(this);JM(this);NM(this);this.tA()};
z.e.PH=function(a){var b=(0,window.decodeURIComponent)(window.location.hash.slice(1)),c=this.ni.find(KM),b=SM(c,b);!b.length&&a.data?(b=c.eq(0),this.ub.find(KM+"."+KO).removeClass(KO),b.addClass(KO),this.Tn.show(),this.KE(),window.location.hash=""):b.length&&(a=b.data("id"),this.Za.hide(),this.Tn.hide(),c=b,this.ub.find(KM+"."+KO).removeClass(KO),c.addClass(KO),c=this.Lr.find("a"),c.removeClass(OM),c.eq(0).addClass(OM),PM(this,a),UM(this,a,b))};
z.e.gS=function(a){QM(this,1);a=a.data;this.ni.find(".zm-topic-cat-more").length||this.ni.append(MM(this,a))};z.e.WS=function(a){QM(this,-1);this.ni.find('li[data-id\x3d"'+a.data.id+'"]').remove()};z.e.KE=function(){if(!this.Za.show().children().length)return this.Za.html('\x3cp class\x3d"zg-gray-normal" style\x3d"text-align:center;line-height:4;"\x3e该话题暂无动态\x3c/p\x3e')};
z.e.tA=function(){function a(a,c){var d={action:a,category:"topic"};c&&(d.attributes=c);z.ui(d)}this.ub.on("click",".js-topic-cat-main .zm-topic-cat-item",function(b){a("click_topic",{topic_id:(0,window.$)(b.currentTarget).data("id")})}).on("click",".topic-recommend .zg-follow",function(){a("click_follow_topic")}).on("click",".topic-recommend .js-pager",function(){a("click_change_topics")}).on("click",".js-topic-more a",function(){a("click_expand")}).on("click",".js-topic-all a",function(){a("click_read_more")})};
var KO="current",OM="current",KM=".zm-topic-cat-item",LM=100,VM='\x3cli class\x3d"zm-topic-cat-item" data-id\x3d"\x3c%\x3d id %\x3e" data-href\x3d"/topic/\x3c%\x3d url_token %\x3e"\x3e\x3ca href\x3d"#\x3c%\x3d name %\x3e"\x3e\x3c%\x3d name %\x3e\x3c/a\x3e\x3c/li\x3e';z.y(WM,z.Q);WM.prototype.init=function(){z.UG.K(this);this.w(window.document.body)};WM.prototype.C=function(){WM.v.C.call(this);this.Ap("zh-question-followers-list-wrap")};WM.prototype.Ap=function(a){if(a=z.J(a)){var b=new z.El;this.K(b);b.use("locationSource");b.w(a)}};z.y(XM,z.Q);XM.prototype.init=function(){z.UG.K(this);this.w(window.document.body);this.gu();ZM(this);$M(this);YM();this.uA()};
XM.prototype.gu=function(){var a=this;(0,window.$)("[data-paging]").each(function(){var b=new z.El({use:["dataPagingSource"]});b.use("childConstructor",{factory:z.gE});z.Al(b,function(a){z.V.Ya(a,{index:""});var b=a.getAttribute("data-type");"User"!==b&&"Topic"!==b||z.V.Ya(a,{module:b+"Item"},function(){return{card:{card_type:"Content",content:{type:b,token:a.getAttribute("data-token")}}}})});var c=(0,window.$)(this).data("navigable");c&&b.use("shortcut",c);a.K(b);b.w(this)});(0,window.$)(".column[data-entry-url]").click(function(a){var c=
(0,window.$)(a.currentTarget).data("entry-url");c&&!a.target.href&&window.open(c)})};XM.prototype.uA=function(){var a=aN();(0,window.$)(".page-search a.zu-button-more").click(function(b){z.V.trackEvent(b.target,{action:"LoadMore",element:"Button"},{search:a})})};z.y(bN,z.hj);bN.prototype.init=function(){var a=z.J("home-suggest-block");a&&(this.h=a,a=z.J("home-suggest-close-button"),this.o().ta(a,"click",function(){(new z.ep(!0)).ajax("/option","key\x3dno_show_lookup\x26value\x3d1");z.P(this.h,!1)}),a=z.J("home-suggest-refresh-button"),this.o().g(a,"click",this.TV),this.Fu=z.J("home-suggest-list"),eN(this))};bN.prototype.TV=function(){cN(this);return!0};
bN.prototype.uV=function(a){a.r||((a=a.msg)&&z.ma(a)&&a.length?(this.aA=[],this.ia=a,cN(this)):this.Fu.innerHTML="")};z.p(fN,z.Q);fN.prototype.T=function(a){z.Q.prototype.T.call(this,a);this.DJ=gN(a);this.nf=z.fn.cN(this.h)};fN.prototype.Kb=function(){this.uq()};fN.prototype.uq=function(){this.dispatchEvent("Ignore")};z.p(hN,fN);hN.prototype.C=function(){fN.prototype.C.call(this);this.Fj=this.DJ.actionCardType;if(this.Fj.startsWith("suggested_"))iN(this);else switch(this.Fj){case "suggested_questions":this.entryType="question",this.Cb=this.DJ.questionId,(0,window.$)(".js-toggleCommentBox",this.m()).on("click",this.NH.bind(this))}};hN.prototype.uq=function(){fN.prototype.uq.call(this);window.$.post("/actioncard/uninterest",{type:this.Fj})};
hN.prototype.Wf=function(){var a=(0,window.$)(".profile-reminder-template",this.h).html(),a=(0,window.$)(a),b=z.Y.gT;b&&a.find(".js-headline").text(b);a.find(".js-avatar-wrapper .avatar").attr({src:z.Y.If("xs"),srcset:z.Y.If("l")+" 2x"});(0,window.$)(this.h).closest(".js-inner").replaceWith(a)};hN.prototype.nz=function(){return(0,window.$)(".js-contentActions",this.m())[0]};z.Ca(hN.prototype,z.hH);z.p(jN,z.iD);z.e=jN.prototype;z.e.T=function(a){z.iD.prototype.T.call(this,a);kN(this)};
z.e.C=function(){var a=this;z.iD.prototype.C.call(this);this.Gp();this.pA();this.pU=this.jd["landing-url"];this.info=this.jd.info;this.DE={link:{url:this.pU},module:[{card:{content:[z.zw(this.info)]}}]};var b=this.m();z.V.Ya(this,{module:"AdItem"},function(){return{card:{card_type:"Content",content:a.Vo()}}});(0,window.$)(".js-adView",b).each(function(a,b){var f=(0,window.$)(b);z.vn(f[0],function(){z.yw(f.data("view-track"))})});(0,window.$)("a.js-adLink",b).one("click",function(){var a=(0,window.$)(this),
b=a.attr("href");a.attr("href",z.Eo(b,"click",1))});(0,window.$)(".AdFeed-impression",b).one("load",function(){z.V.trackEvent(a,{action:"Load",element:"Card"})})};z.e.Vo=function(){return z.zw(this.info)};z.e.pA=function(){var a=(0,window.$)(".js-share",this.m()).get(0),b=this.jd[this.entryType+"-url"];a&&b&&z.uD(a,this.entryType,this.We,b).yb(this)};z.e.Kb=function(a){z.yw(this.jd["close-track"]);z.V.trackEvent(a,{element:"Button",action:"Ignore"},this.DE);this.dispatchEvent("Ignore")};
z.e.expand=function(){this.vb||(this.vb=!0,z.S.add(this.h,this.kt),this.dispatchEvent("expand"),this.nw())};z.e.collapse=function(){this.vb&&(this.vb=!1,z.S.remove(this.h,this.kt),this.dispatchEvent("collapse"),this.mw())};z.e.nw=function(){var a=(0,window.$)(this.m()).index()+1;z.wi("view_ad","click_expand_answer","feed_ad_vote_up_expand_ad",a)};z.e.mw=function(){var a=(0,window.$)(this.m()).index()+1;z.wi("view_ad","click_collapse_answer","feed_ad_collapse_ad",a)};
z.e.sW=function(a){window.open(LO,"_blank");var b=Object.assign({link:{url:LO,anchor:"知乎广告介绍"}},this.DE);z.V.trackEvent(a,{element:"Link",action:"OpenUrl"},b)};var LO="/promotion-intro";z.Ca(jN.prototype,z.iH);z.p(lN,z.iD);lN.prototype.Kb=function(){window.$.post("/roundtable/"+this.We,{action:"mute"});this.dispatchEvent("Ignore")};z.y(mN,z.Q);z.e=mN.prototype;z.e.C=function(){mN.v.C.call(this);this.Lj()};z.e.T=function(a){var b=this;mN.v.T.call(this,a);oN(this,a);z.V.Ya(this,{module:"FeedItem",index:""},function(){if(b.Ec&&b.Ec.tH)return b.Ec.tH();var c={card_type:"Feed",feed_source:nN(b,a)};b.Ec&&b.Ec.Az&&(c.content=b.Ec.Az());return{card:c}})};z.e.Ki=function(){this.Ki=!0};
z.e.Lj=function(a){var b={".js-ignoreContentItem":this.jS,".js-unIgnoreContentItem":this.XS,".js-ignoreRelatedContentItem":this.kS,".js-close":this.nk,'a[name\x3d"dislike"]':this.MR,".column[data-entry-url]":this.vH};z.Mb(b,a||{});z.Db(b,function(a,b){if(z.qa(a))(0,window.$)(this.h).on("click",b,window.$.proxy(a,this))},this)};z.e.nk=function(){var a=this,b=(0,window.$)(this.m());b.slideUp(function(){a.dispose();b.remove()})};
z.e.jS=function(){if(this.Ec&&this.Ec.Kb){var a=(0,window.$)(".feed-hide-options",this.h),b=!!a.length;this.Ec.Kb(b);b&&a.show().siblings().hide();z.V.trackEvent((0,window.$)(".ignore",this.h),{action:"Ignore",element:"Button"})}};z.e.XS=function(){if(this.Ec&&this.Ec.Xz){var a=(0,window.$)(".feed-hide-options",this.h),b=!!a.length;this.Ec.Xz();b&&a.hide().siblings().show()}};z.e.kS=function(a){this.Ec&&this.Ec.Nz&&this.Ec.Nz(a)};
z.e.MR=function(){var a=this,b=(0,window.$)(this.h),c=(0,window.$)(".undo-dislike-options",b);if(!c.length&&this.Ec&&this.Ec.Kb)this.Ec.Kb();else{var d=(0,window.$)(".feed-item-inner",b),f=c.data();c.off().one("click",".revert",function(){d.slideDown();c.slideUp();window.$.post("/topstory/item/uninterest/revert",f);z.V.trackEvent((0,window.$)(".ignore",a.h),{action:"UnIgnore",element:"Button"})}).one("click",".close",function(){a.nk()});window.$.post("/topstory/item/uninterest",f).done(function(){d.slideUp();
c.slideDown()});z.V.trackEvent((0,window.$)(".ignore",this.h),{action:"Ignore",element:"Button"})}};var zN=(0,window.$)("#is-topstory").length?"topstory2":"homefeed",rN=z.C&&!z.E(9),uN={ac:"actioncard",q:"question",a:"answer",p:"article",c:"column",r:"roundtable",f:"favorites",l:"live",e:"ebook",pin:"pin",eventcard:"eventcard"},wN={question:"question",answer:"question",article:"column",column:"column",roundtable:"roundtable",favorites:"favorites"},xN={question:"question",answer:"question",article:"article",column:"column",roundtable:"roundtable",favorites:"favorites",live:"live",ebook:"ebook",pin:"pin",
eventcard:"eventcard"};qN.prototype.tc=function(){this.dE=(0,window.$)('meta[itemprop\x3d"ZReactor"]',this.mi);this.dE.length&&(tN(this),this.zT())};qN.prototype.XW=function(){var a=[],b=z.Kr(550,function(){a.length&&(sN(a),a=[])},!0);return function(c){a.push(c);b()}}();
qN.prototype.zT=z.Wh(function(){z.G(z.U,"click_feed_fresh",function(a){sN({mid:z.tm.ga_vars.user_hash,object_type:"btn",object_id:2,object_meta:{load_items:a.data.count},action_type:"click",context:zN,others:"",time:(0,z.I)()})});z.G(z.U,"topstory_feed_more",function(){sN({mid:z.tm.ga_vars.user_hash,object_type:"btn",object_id:1,object_meta:{next:(0,window.$)("#js-home-feed-list .feed-item").length+1},action_type:"click",context:zN,others:"",time:(0,z.I)()})})});z.y(AN,z.tE);AN.prototype.Pk=function(a){a&&!a.r&&(a=a.msg,a.length?(z.P(this.de,0<a.length),this.offset+=a.length,this.ls(a),z.uE(this,!1),z.wE(this)):this.tl.hide())};var MO={ROUNDTABLE_ADD_RELATED:"roundtable",ARTICLE_VOTE_UP:"post_vote",ARTICLE_CREATE:"post_create",RECOMMENDED:"feed_recommended",QUESTION_FOLLOW:"feed_question_follow",QUESTION_CREATE:"feed_question",ANSWER_VOTE_UP:"feed_answer_vote",ANSWER_CREATE:"feed_answer_answer"};
AN.prototype.US=function(a){var b=a.currentTarget.h.getAttribute("data-feedtype"),b=MO[b];"comment"===a.namespace&&b&&a.Oc.fill("category","feed").fill("label",b)};AN.prototype.Yu=function(a){var b=pN(a);b.Ki();this.K(b);this.o().g(b,"click!",this.US);b.w(a);new qN(b);z.vn(a,function(){z.V.trackCardShow(a,{element:"ListItem"})});return b};AN.prototype.cC=function(a){return{params:a,method:"next"}};z.p(BN,z.Q);BN.prototype.C=function(){z.Q.prototype.C.call(this);this.Ha=(0,window.$)(this.m());CN(this);this.yj=(0,window.$)("#zh-main-feed-fresh-button");this.yj.length&&(this.yj.click(window.$.proxy(this.tX,this)),this.SI?this.o().g(z.U,"topstory2",this.MJ):this.o().g(z.U,"homefeed",this.MJ));EN(this);FN(this)};BN.prototype.jW=function(){this.kq.Hg();window.$.get("/node/HomeTopics",function(a){a&&(0,window.$)(a).insertBefore("#zh-home-list-title")})};
BN.prototype.MJ=function(a){!this.yj.hasClass("disabled")&&(a=(0,window.parseInt)(a.Xf,10))&&(this.Jg+=a,0<this.Jg&&this.yj.text((99<this.Jg?"99+":this.Jg)+" 条新动态").show())};
BN.prototype.tX=function(){var a=this;this.yj.text("加载中…").addClass("disabled");var b=this.Jg;z.U.Bb({type:"click_feed_fresh",data:{count:b}});window.$.post(this.fQ,this.kq.cC({action:"live",limit:b,start:this.kq.UB(this.kq.nb()[0])})).done(function(c){a.yj.removeClass("disabled");a.Jg-=b;0>=a.Jg&&a.yj.hide();if(c&&c.msg.length){a.Gw||(a.Gw=(0,window.$)('\x3cdiv class\x3d"feed-item-hook feed-divider"\x3e\x3cspan\x3e上次你看到这里\x3c/span\x3e\x3c/div\x3e'));var d=(0,window.$)("."+a.PG,a.Ha).eq(0);d.length&&
3<=b?a.Gw.insertBefore(d):a.Gw.remove();a.kq.ls(c.msg,"prepend")}});z.V.trackEvent(this,{action:"LoadNewFeed",element:"Button"})};z.ka(GN);z.p(KN,z.Q);z.e=KN.prototype;
z.e.B=function(){function a(b,d){for(var f=z.ha(Object.keys(d)),g=f.next();!g.done;g=f.next()){var h=g.value,g=d[h];"string"===typeof g?(g=(0,window.$)("\x3cdiv/\x3e",{"class":"OrgGuide-"+h,text:g}).get(0),(0,window.$)(b).append(g)):g&&"object"===typeof g&&(h=(0,window.$)("\x3cdiv/\x3e",{"class":"OrgGuide-"+h}).get(0),(0,window.$)(b).append(h),a(h,g))}}z.Q.prototype.B.call(this);var b=this.config.YL,b=(0,window.$)("\x3cdiv/\x3e",{"class":"OrgGuide OrgGuide-"+b.NK+" OrgGuide-"+b.NK+"-"+b.index}).get(0);
a(b,this.config.ic);this.h=b;this.H=(0,window.$)(b)};
z.e.render=function(a){z.Q.prototype.render.call(this,a);this.Va=a;a=(0,window.$)(this.getParent());var b=(0,window.$)(".OrgGuide-step",this.H);if(0<b.length)for(var b=(0,window.$)("\x3cul/\x3e",{"class":"OrgGuide-stepInfoDotsList"}).appendTo(b),c=this.config.YL,d=0;d<c.total;d++){var f=(0,window.$)("\x3cli/\x3e",{"class":"OrgGuide-stepInfoDot"}).appendTo(b);d<=c.index&&f.addClass("done");d<c.total-1&&(0,window.$)("\x3chr/\x3e",{"class":"OrgGuide-stepInfoSplit"}).appendTo(b)}a.css(this.config.Aq);this.H.css(this.config.style).appendTo(a);
this.Kj()};z.e.hide=function(){this.H.hide();this.config.ao(this)};
z.e.show=function(){var a=this.config;a.Jj(this);this.H.show();(0,window.$)(".OrgGuide-stepInfo",this.H).width((0,window.$)(".OrgGuide-footer",this.H).width()-(0,window.$)(".OrgGuide-btnNext",this.H).width());(0,window.$)(window).scrollTop(0);var b=this.H.width(),c=this.H.height(),d={},f=this.config.Qe,g=this.config.LY;if(f){f.Rg=f.Rg||"bttom center";var h=(0,window.$)(this.config.Qe.Fa),k=h.offset(),l=h.width(),h=h.height(),f=f.Rg.split(" ");switch(f[0]){case "left":d.left=k.left-b-g;break;case "right":d.left=
k.left+l+g;break;case "top":d.top=k.top-c-g;break;case "bottom":d.top=k.top+h+g}switch(f[1]){case "left":d.left=k.left;break;case "right":d.left=k.left+l-b;break;case "top":d.top=k.top;break;case "bottom":d.top=k.top+h-c;break;case "center":d.left=k.left+(l-b)/2;break;case "middle":d.top=k.top+(h-c)/2}}else k=(0,window.$)(this.getParent()),g=k.width(),k=k.height(),d.left=(g-b)/2,d.top=(k-c)/2;this.H.css(d);(b=this.config.fe)&&this.H.addClass("OrgGuide-"+b);"once-per-visit"===a.FY&&(a.MA=!0)};
z.e.Kj=function(){function a(a){var c=JN;switch(typeof a){case "string":c=function(){(0,window.$)(b.getParent()).trigger(a)};break;case "object":c=function(){(0,window.$)(b.getParent()).trigger(a.type,a.data)};break;case "function":c=a}return c}for(var b=this,c=this.config.Sy,d=z.ha(Object.keys(c)),f=d.next();!f.done;f=d.next())f=f.value,this.H.on("click",".OrgGuide-"+f,a(c[f]))};var UN;z.p(MN,z.Q);z.e=MN.prototype;z.e.B=function(){this.H=(0,window.$)("\x3cdiv/\x3e",{"class":"ZhGuides "+this.config.className});this.h=this.H.get(0)};z.e.init=function(){this.Hq=TN(this);this.Zr=0};
z.e.render=function(){z.Q.prototype.render.call(this);for(var a=this.config,b=a.qv,a=a.Ul,c=z.ha(Object.keys(b)),d=c.next();!d.done;d=c.next())for(var d=d.value,f=b[d],g=f.Ul,h=f.Yg.length,k=z.ha(Object.keys(f.Yg)),l=k.next();!l.done;l=k.next()){var l=l.value,n=f.Yg[l];n.YL={NK:d,index:l,total:h};l=window.$.extend(!0,{},a,g,n);l=new KN(l);l.render(this.m());this.$o.push(l)}this.H.appendTo((0,window.$)("body"));this.Kj()};
z.e.Kj=function(){function a(a){return function(c){a.call(b,c)}}for(var b=this,c=z.ha(Object.keys(RN)),d=c.next();!d.done;d=c.next()){var d=RN[d.value],f=LN;switch(d){case "closeGuide":f=this.LP;break;case "nextGuide":f=this.NJ}this.H.on(d,a(f))}};z.e.Vv=function(){this.config.iF(this);var a=TN(this);if(a)switch(a.state){case "open":SN(this,a.index);return;case "close":case "done":case "nevershow":case "restart-open":PN(this);return}SN(this,0)};z.e.LP=function(){PN(this);ON(this,"close")};
z.e.NJ=function(){var a=this.Zr+1;a>=this.$o.length?PN(this):SN(this,a)};z.e.show=function(a){this.H.fadeIn(500,a)};z.e.hide=function(a){this.H.fadeOut(500,a)};var RN={NEXT_GUIDE:"nextGuide",CLOSE_GUIDE:"closeGuide",DONE:"done"};z.p(YN,z.Q);YN.prototype.init=function(){var a=this.gR,b=this.iX,c=this.eY;a.H.on(RN.DONE,function(){a.hide(function(){b.Vv()})});b.H.on(RN.DONE,function(){b.hide(function(){c.Vv()})});a.Vv()};
var NO={jx:function(a){a.H.fadeOut(500)},Ul:{LY:20,Aq:{background:"rgba(255, 255, 255, .8)"},style:{width:380,height:180},ic:{header:"",content:"",footer:"",btnClose:""},Sy:{btnNext:RN.NEXT_GUIDE,btnClose:RN.CLOSE_GUIDE}}},aO=window.$.extend(!0,{},NO,{ap:"guideForOrgSearch",className:"SearchGuides",state:"forever",qv:{searchGuide:{Yg:[{ic:{header:"搜索",content:"还没关注任何话题和用户哦~ 试试搜索一下 :)",footer:null},Aq:{background:"rgba(255, 255, 255, .4)"},style:{width:(0,window.$)("#zh-top-search").width(),height:130},
Qe:{Fa:"#zh-top-search",Rg:"bottom center"},fe:"arrow--top search",FY:"once-per-visit",MA:!z.Y.GW}]}}}),$N=window.$.extend({},NO,{ap:"guideForOrgProfile",className:"OrgProfileGuides",state:"forever",qv:{profileGuide:{Yg:[{ic:{header:"机构信息尚待完善",content:"立即去完善主页资料，让主页展示内容更丰富！",footer:{btnJump:"完善主页资料",btnNext:null}},Sy:{btnJump:function(){window.location.href="/org/edit"}},Aq:{background:"rgba(255, 255, 255, .4)"},Qe:{Fa:".top-nav-profile",Rg:"bottom center"},fe:"arrow--top",interval:6048E5,MA:!z.Y.FW}]}}}),
ZN=window.$.extend({},NO,{ap:"guideForOrg",className:"OrgTeachGuides",iF:function(a){var b=(0,window.$)(".zm-side-nav-li-guide"),c=(0,window.$)(".zm-side-nav-link-guide",b),d=(0,window.$)(".btn-nevershow",c);b.off().one("mouseenter",function(){c.removeClass("active")}).on("click",function(){NN(a);z.V.trackEvent(c,{action:"Click",element:"Button",name:"机构帐号新手引导",url:window.location.href})});d.off().on("click",function(){a.H.remove();ON(a,"nevershow");b.remove()});(d=TN(a))&&!["open","nevershow"].includes(d.state)&&
b.show();a.H.css({left:0,top:0,width:"100%",height:"100%"})},jx:function(a){var b=TN(a);if(!b||"open"===b.state){(0,window.$)(window).scrollTop(0);var b=(0,window.$)(".zm-side-nav-li-guide").show(),c=(0,window.$)(".zm-side-nav-link-guide",b);a.H.animate(Object.assign(c.offset(),{width:c.width(),height:c.height()}),500,function(){c.addClass("active").fadeOut(200).fadeIn(150).fadeOut(100).fadeIn(50)})}},qv:{startGuide:{Yg:[{Aq:{background:"rgba(255, 255, 255, .4)"},style:{width:522},ic:{header:"欢迎来到知乎",
content:"参加机构帐号新手教学，更快上手帐号运营，只需1分钟哦！",footer:{btnNext:"开始教学吧"}}}]},zutopGuide:{Ul:{ic:{footer:{stepInfo:{info:"如何探索社区?",step:""},btnNext:"下一步"}},fe:"arrow--top",Qe:{Rg:"bottom center"}},Yg:[{ic:{header:"搜索",content:"找到需要关注的内容、用户、话题。"},style:{width:(0,window.$)("#zh-top-search").width()},Qe:{Fa:"#zh-top-search"},fe:"arrow--top search"},{ic:{header:"话题",content:"在这里浏览你已关注的话题下的热门内容和最新内容，也许有适合你回答的问题。"},Qe:{Fa:"#top-nav-dd-topic"}},{ic:{header:"发现",content:"在这里发现全站热门内容和编辑推荐的优质内容。",footer:{btnNext:"我知道了"}},
Qe:{Fa:"#zh-top-nav-explore"}}]},homeentryGuide:{Ul:{style:{width:(0,window.$)(".HomeEntry-box").width()},ic:{footer:{stepInfo:{info:"如何创建新内容？",step:""},btnNext:"下一步"}},Qe:{Fa:".HomeEntry-box",Rg:"bottom center"},Jj:function(a){VN(".HomeEntry",a.getParent())},ao:function(a){a=a.getParent();(0,window.$)(".HomeEntry",a).remove()}},Yg:[{ic:{header:"提问",content:"在这里提问，召集用户来回答。"},fe:"arrow--top ask"},{ic:{header:"回答",content:"发现适合你回答和用户邀请你回答的问题。"},fe:"arrow--top answer"},{ic:{header:"写文章",content:"如果没有适合回答的问题，也可以写文章主动发布信息哦。"},
fe:"arrow--top post"},{ic:{header:"草稿",content:"回答和文章的草稿都保存在这里。",footer:{btnNext:"我知道了"}},fe:"arrow--top draft"}]},analyticsGuide:{Yg:[{ic:{header:"数据统计",content:"在这里可以查看已发布内容的各项数据指标。",footer:{stepInfo:{info:"如何运营？"},btnNext:"我知道了"}},Qe:{Fa:".zm-side-nav-li-analytics",Rg:"left middle"},fe:"arrow--right",Jj:function(a){a=VN(".zm-side-nav-li-analytics",a.getParent());(0,window.$)(".zm-side-nav-link",a).addClass("active")},ao:function(a){a=a.getParent();(0,window.$)(".zm-side-nav-li-analytics",a).remove()}}]},
ophelpGuide:{Yg:[{ic:{header:"运营帮助中心",content:"这里有产品使用技巧和运营指南。",footer:{stepInfo:{info:"如何运营？"},btnNext:"我知道了"}},Qe:{Fa:".zm-side-nav-li-ophelp",Rg:"left middle"},fe:"arrow--right",Jj:function(a){a=VN(".zm-side-nav-li-ophelp",a.getParent());(0,window.$)(".zm-side-nav-link",a).addClass("active")},ao:function(a){a=a.getParent();(0,window.$)(".zm-side-nav-li-ophelp",a).remove()}}]},optGuide:{Ul:{style:{width:380,height:180},ic:{footer:{stepInfo:{info:"如何互动？",step:""},btnNext:"下一步"}},Qe:{Fa:".TryOpt",
Rg:"bottom left"}},Yg:[{ic:{header:"赞同/反对",content:"点“赞同”或“反对”为答案投票，传达你的立场和态度。"},fe:"arrow--top user-opt",Jj:function(a){a=XN(a.getParent());(0,window.$)(".TryOpt-thumbArrow",a).show();(0,window.$)(".TryOpt-btnThumb",a).show().addClass("sprite-home-btn-thumb-undo")}},{ic:{header:"赞同/反对",content:"点“赞同”或“反对”为答案投票，传达你的立场和态度。"},fe:"arrow--top user-opt",Jj:function(a){a=XN(a.getParent());(0,window.$)(".TryOpt-thumbArrow",a).hide();(0,window.$)(".TryOpt-btnThumb",a).show().removeClass("sprite-home-btn-thumb-undo").addClass("sprite-home-btn-thumb-done").off("click")}},
{ic:{header:"关注问题",content:"关注问题后，当这个问题下有优质的答案会通知你，你也可以在「我关注的问题」里找到它。",footer:{btnNext:"我知道了"}},fe:"arrow--top user-opt",Jj:function(a){a=XN(a.getParent());(0,window.$)(".TryOpt-thumbArrow",a).hide();(0,window.$)(".TryOpt-btnThumb",a).show().removeClass("sprite-home-btn-thumb-undo").addClass("sprite-home-btn-thumb-done").off("click");(0,window.$)(".TryOpt-btnFollow",a).show()},ao:function(a){a=a.getParent();(0,window.$)(".TryOpt",a).remove()}}]}}});z.y(bO,z.Q);bO.prototype.init=function(){z.UG.K(this);this.w(window.document.body)};
bO.prototype.C=function(){bO.v.C.call(this);z.Dq(z.r,{Tu:!0})();var a=z.J("js-home-feed-list");if(a){var b=new BN;this.K(b);b.w(a)}z.J("home-settings-page-wrap")&&(a=z.J("zh-topic-block-editor"))&&(new z.Et(z.nm)).w(a);(new bN).init();cO();dO();a=(0,window.$)(".zg-tip-salt-update");if(b=z.si.get("Salt::lastViewTime")){var b=new Date(Number(b)),c=b.getDay(),d=(new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()+252E5,d=1<c||7<=b.getHours()?d+864E5*(1-c+7):d+864E5*(1-c);(new Date).getTime()>=
(new Date(d)).getTime()&&a.show()}else a.show();a=GN.ba();HN(a);a=z.Y;if(a.uc){UN={};try{UN=JSON.parse(a.EW||"{}")}catch(f){}(new YN).init()}};z.y(eO,z.Q);eO.prototype.init=function(){z.UG.K(this);this.w(window.document.body)};eO.prototype.C=function(){eO.v.C.call(this);var a=(0,window.$)("#zh-following-question-item-list").children(".zh-general-list");if(a.length){var b=new z.El;this.K(b);b.use("nodeSource");b.w(a.get(0))}};z.y(fO,z.Q);fO.prototype.init=function(){z.UG.K(this);this.w(window.document.body)};fO.prototype.C=function(){fO.v.C.call(this);gO(this);this.nA();iO(this);jO();this.o().g(this,"click!",function(a){"comment"===a.namespace&&a.Oc.fill("category",this.Th).fill("label",this.SQ)})};
fO.prototype.nA=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=oK(a).done(function(a){b.html(a)}))});b.on("click",".content \x3e a",function(){var a=(0,window.$)(this).closest("li").index()+1;z.ui({category:"collection",action:"visit_collection",label:"explore_sidebar_trending_collections_collection_name",value:a})})};z.y(hO,z.El);
hO.prototype.C=function(){hO.v.C.call(this);this.use("childConstructor",{Qj:z.OD})};z.p(lO,z.Q);lO.prototype.C=function(){this.Vr=(0,window.$)(".MyTopicList",this.m());this.mE=(0,window.$)(".MyTopicAdd",this.m());this.Tw=(0,window.$)(".js-MyTopicMax-title",this.m());this.nE=(0,window.$)(".js-MyTopicEmpty-title",this.m());var a=new JI({Uf:this.jV.bind(this),Zf:mO(this)});a.w(this.m());this.Ma=a;pO(this);qO(this);this.dispatchEvent(oO)};
lO.prototype.jV=function(){var a=this.Ma.Ag().slice(1);if(a&&3<a.length){var b=a[1];this.Tw.before('\x3cspan class\x3d"zm-tag-editor-edit-item"\x3e\n      \x3ca class\x3d"nor" href\x3d"/topic/'+b+'"\x3e'+a[0]+'\x3c/a\x3e\n      \x3ca data-url-token\x3d"'+b+'" href\x3d"#" class\x3d"zg-r3px zm-tag-editor-remove-button" name\x3d"remove"\x3e\x3c/a\x3e\n    \x3c/span\x3e');qO(this);nO(this,"add_expert_topic",b)}};var rO=20,oO="topic:change";z.p(sO,z.Q);sO.prototype.init=function(){z.UG.K(this);this.w(window.document.body);tO(this);var a=(0,window.$)(".QuestionHotList .zh-general-list");if(a.length){var b=new z.El({use:["autoload"]});this.K(b);b.use("nodeSource",{});b.w(a.get(0))}xO(this)};z.p(yO,z.Q);yO.prototype.init=function(){z.UG.K(this);this.w(window.document.body);this.qA();AO();BO()};yO.prototype.qA=function(){if(z.Om){var a=(0,window.$)(".promotion-mobileshareButton");if(z.lj)z.Fw(),a.on("touchstart click",z.Iw);else a.on("touchstart click",this.un)}else zO(this)};
yO.prototype.un=function(a){var b=void 0,b="SixInnovations"===a?{appkey:"3063806388",title:"氯消毒技术如何促进时尚的发展？制冷技术与人口增长有怎样的关系？录音技术为何影响到了民权运动？科普名作《我们如何走到今天》将为你一一梳理历史上这些意想不到的联系。「知乎书店」独家首发电子版，欢迎阅读： http://t.cn/RVoP92h"}:{appkey:"3063806388",title:"一万小时工作经验写成的书，价值几何？知乎电子书功能已上架：https://www.zhihu.com/books/promotion/001?utm_campaign\x3dzhihubook\x26utm_source\x3dzhihu_campaign\x26utm_medium\x3dweibo_share"};window.open("http://service.weibo.com/share/share.php?"+window.$.param(b),"_blank","width\x3d615,height\x3d505")||
(window.location.href="http://service.weibo.com/share/share.php?"+window.$.param(b))};z.x("ZH.entryQuestionFollowersPage",function(){(new WM).init()});z.x("ZH.entrySQ",function(){(new ZL).init()});z.x("ZH.entrySA",function(){(new qM).init()});z.x("ZH.entryL",function(){(new rK).init()});z.x("ZH.entryT",function(){(new UJ).init()});z.x("ZH.entrySearch",function(){(new XM).init()});z.x("ZH.entryPM",function(){(new dJ).init()});z.x("ZH.entryPMDetail",function(){(new $I).init()});z.x("ZH.entryTopicFeed",function(){(new IM).init()});z.x("ZH.entryHome",function(){(new bO).init()});
z.x("ZH.entryQuestionFollowing",function(){(new eO).init()});z.x("ZH.entryExplore",function(){(new fO).init()});z.x("ZH.entryQuestion",function(){(new sO).init()});z.x("ZH.entryPubPromo",function(){(new yO).init()});z.lg("page-main");}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/page-main.a1f31fc1.js